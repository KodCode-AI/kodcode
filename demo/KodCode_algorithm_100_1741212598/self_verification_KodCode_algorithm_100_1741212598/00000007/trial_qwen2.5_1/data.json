{
  "metadata": {
    "prompt_id": "00000007",
    "row_id": 7,
    "seed_ids": [
      1095
    ],
    "mode": "algorithm"
  },
  "instruction": "You are given a 2D matrix where each row is sorted in ascending order. Your task is to implement a function `search_value_in_matrix` that performs a 2D matrix binary search to find the given value. The function should return the coordinates `[row, col]` of the value if it exists, otherwise return `[-1, -1]`.\n\n**Input**:\n- `matrix`: A 2D list of integers where each row is sorted in ascending order.\n- `value`: An integer to search for in the matrix.\n\n**Output**:\n- A list containing the coordinates `[row, col]` of the value if found, otherwise `[-1, -1]`.\n\n**Constraints**:\n- The matrix can have up to \\(1000\\) rows and \\(1000\\) columns.\n- Each row can have up to \\(1000\\) elements.\n- The matrix is guaranteed to be non-empty.\n\n**Example**:\n```python\nmatrix = [\n    [1, 4, 7, 11, 15],\n    [2, 5, 8, 12, 19],\n    [3, 6, 9, 16, 22],\n    [10, 13, 14, 17, 24],\n    [18, 21, 23, 26, 30]\n]\ntarget = 1\nsearch_value_in_matrix(matrix, target) # Output: [0, 0]\n\ntarget = 20\nsearch_value_in_matrix(matrix, target) # Output: [-1, -1]\n```\n\n**Performance Requirement**:\n- The solution should be efficient and avoid deep recursion to prevent stack overflow.",
  "solution_code": "def search_value_in_matrix(matrix, value):\n    \"\"\"\n    Performs a 2D matrix binary search to find the given value.\n    \"\"\"\n    if not matrix or not matrix[0]:\n        return [-1, -1]\n    \n    rows, cols = len(matrix), len(matrix[0])\n    left, right = 0, rows * cols - 1\n    \n    while left <= right:\n        mid = (left + right) // 2\n        mid_value = matrix[mid // cols][mid % cols]\n        \n        if mid_value == value:\n            return [mid // cols, mid % cols]\n        elif mid_value < value:\n            left = mid + 1\n        else:\n            right = mid - 1\n    \n    return [-1, -1]",
  "test_code": "import pytest\n\ndef test_search_value_in_matrix():\n    matrix = [\n        [1, 4, 7, 11, 15],\n        [2, 5, 8, 12, 19],\n        [3, 6, 9, 16, 22],\n        [10, 13, 14, 17, 24],\n        [18, 21, 23, 26, 30]\n    ]\n    assert search_value_in_matrix(matrix, 1) == [0, 0]\n    assert search_value_in_matrix(matrix, 20) == [-1, -1]\n    assert search_value_in_matrix(matrix, 7) == [0, 2]\n    assert search_value_in_matrix(matrix, 15) == [0, 4]\n\ndef test_search_matrix_empty():\n    assert search_value_in_matrix([], 5) == [-1, -1]\n    assert search_value_in_matrix([[]], 5) == [-1, -1]\n\ndef test_search_matrix_single_row():\n    matrix = [[1, 3, 5]]\n    assert search_value_in_matrix(matrix, 1) == [0, 0]\n    assert search_value_in_matrix(matrix, 3) == [0, 1]\n    assert search_value_in_matrix(matrix, 5) == [0, 2]\n    assert search_value_in_matrix(matrix, 0) == [-1, -1]\n\ndef test_search_matrix_single_column():\n    matrix = [[1], [2], [3], [4], [5]]\n    assert search_value_in_matrix(matrix, 3) == [2, 0]\n    assert search_value_in_matrix(matrix, 6) == [-1, -1]\n\ndef test_search_matrix_large():\n    matrix = [[i + j * 100 for i in range(10)] for j in range(100)]\n    for i in range(10):\n        assert search_value_in_matrix(matrix, i * 100 + i) == [i, i]\n    for value in range(1000, 100000):\n        if value % 100 < 10:\n            assert search_value_in_matrix(matrix, value) == [value // 100, value % 100]\n        else:\n            assert search_value_in_matrix(matrix, value) == [-1, -1]",
  "file_source": "KodCode_questions2sv_algorithm_100_1741212598_sanitized_prepared_results1.jsonl"
}