{
  "metadata": {
    "prompt_id": "00000032",
    "row_id": 32,
    "seed_ids": [
      537
    ],
    "mode": "algorithm"
  },
  "instruction": "You are tasked with solving the Collatz Conjecture problem to find the starting number, under a given limit, that produces the longest sequence. Given a positive integer \\( n \\), find the number under \\( n \\) that generates the longest sequence.\n\n**Input Format**:\n- The input will be a single positive integer \\( n \\) (\\( 2 \\leq n \\leq 1,000,000 \\)).\n\n**Output Format**:\n- Output the starting number under \\( n \\) that produces the longest sequence.\n\n**Performance Requirements**:\n- Your solution should efficiently handle the input within the given constraints.\n\n**Example**:\n```\nInput:\n1000000\n\nOutput:\n837799\n```\n\n**Explanation**:\nThe number 837799 under 1,000,000 produces the longest sequence as per the Collatz conjecture.\n\n**Note**:\n- Your solution should be optimized to handle the given constraints efficiently.",
  "solution_code": "def collatz_sequence_length(n, cache={1: 1}):\n    \"\"\"\n    Returns the length of the Collatz sequence starting from n.\n    Cache is used to store previously computed lengths for efficiency.\n    \"\"\"\n    if n in cache:\n        return cache[n]\n    if n % 2 == 0:\n        cache[n] = 1 + collatz_sequence_length(n // 2)\n    else:\n        cache[n] = 2 + collatz_sequence_length((n - 1) // 2)\n    return cache[n]\n\ndef find_longest_collatz_sequence(limit):\n    \"\"\"\n    Finds the starting number under limit that produces the longest Collatz sequence.\n    \"\"\"\n    longest_sequence = 0\n    starting_number = 0\n    for i in range(1, limit):\n        length = collatz_sequence_length(i)\n        if length > longest_sequence:\n            longest_sequence = length\n            starting_number = i\n    return starting_number",
  "test_code": "from solution import find_longest_collatz_sequence, collatz_sequence_length\n\ndef test_collatz_sequence_length():\n    assert collatz_sequence_length(13) == 10\n    assert collatz_sequence_length(7) == 17\n    assert collatz_sequence_length(35) == 154\n    assert collatz_sequence_length(626331) == 351\n\ndef test_find_longest_collatz_sequence():\n    assert find_longest_collatz_sequence(10) == 9\n    # Example given in the problem statement\n    assert find_longest_collatz_sequence(1000000) == 837799\n    # Additional test cases\n    assert find_longest_collatz_sequence(1000) == 871\n    assert find_longest_collatz_sequence(10000) == 6372\n    assert find_longest_collatz_sequence(100000) == 83779\n\n# Run the tests\nimport pytest\npytest.main([__file__])",
  "file_source": "KodCode_questions2sv_algorithm_100_1741212598_sanitized_prepared_results0.jsonl"
}