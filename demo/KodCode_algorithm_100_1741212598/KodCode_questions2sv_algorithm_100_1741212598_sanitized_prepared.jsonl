{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are given a function `energy_conversion` that converts energy units. The function uses a dictionary to map different energy units to their corresponding values in joules. Your task is to extend this function to handle more complex cases and improve its robustness.\n\n**Task**:\n1. Modify the `energy_conversion` function to handle a new unit: \"electronvolt_per_photon\". The conversion factor for this unit is defined as `1 electronvolt_per_photon = 6.241509074460763e+15 joules`.\n2. Add a feature to allow users to convert from \"electronvolt_per_photon\" to any other unit and vice versa.\n3. Improve error handling to provide more informative error messages when invalid units are provided.\n4. Ensure that the function correctly handles the conversion of \"electronvolt_per_photon\" and includes appropriate test cases in the docstrings.\n\n**Input and Output**:\n- **Parameters**:\n  - `from_type`: A string representing the unit to convert from.\n  - `to_type`: A string representing the unit to convert to.\n  - `value`: A numeric value to convert.\n\n- **Output**:\n  - A float representing the converted value.\n\n**Constraints**:\n- The function must support the new unit \"electronvolt_per_photon\" in both directions (from and to).\n- The function must provide an informative error message when invalid units are provided.\n\n**Performance Requirements**:\n- The function should handle conversions efficiently with a time complexity of O(1).\n\n**Scenario**:\nYou are working on a project to convert energy values between various units, and you need to incorporate the conversion of \"electronvolt_per_photon\". The function should be robust and provide clear error messages for any invalid unit conversions.\n\n**Example**:\n```python\n>>> energy_conversion(\"electronvolt_per_photon\", \"joule\", 1)\n6.241509074460763e+15\n>>> energy_conversion(\"joule\", \"electronvolt_per_photon\", 6.241509074460763e+15)\n1.0\n>>> energy_conversion(\"electronvolt_per_photon\", \"wattsecond\", 1)\n0.00016402208664101444\n>>> energy_conversion(\"wattsecond\", \"electronvolt_per_photon\", 0.00016402208664101444)\n1.0\n```\n\n**Note**:\n- You must include appropriate test cases in the docstrings to demonstrate the functionality of the updated `energy_conversion` function.\n- Ensure that the function raises a `ValueError` with a descriptive message when an invalid unit is provided."}], "metadata": {"prompt_id": "00000000", "row_id": 0, "seed_ids": [648], "mode": "algorithm", "instruction": "You are given a function `energy_conversion` that converts energy units. The function uses a dictionary to map different energy units to their corresponding values in joules. Your task is to extend this function to handle more complex cases and improve its robustness.\n\n**Task**:\n1. Modify the `energy_conversion` function to handle a new unit: \"electronvolt_per_photon\". The conversion factor for this unit is defined as `1 electronvolt_per_photon = 6.241509074460763e+15 joules`.\n2. Add a feature to allow users to convert from \"electronvolt_per_photon\" to any other unit and vice versa.\n3. Improve error handling to provide more informative error messages when invalid units are provided.\n4. Ensure that the function correctly handles the conversion of \"electronvolt_per_photon\" and includes appropriate test cases in the docstrings.\n\n**Input and Output**:\n- **Parameters**:\n  - `from_type`: A string representing the unit to convert from.\n  - `to_type`: A string representing the unit to convert to.\n  - `value`: A numeric value to convert.\n\n- **Output**:\n  - A float representing the converted value.\n\n**Constraints**:\n- The function must support the new unit \"electronvolt_per_photon\" in both directions (from and to).\n- The function must provide an informative error message when invalid units are provided.\n\n**Performance Requirements**:\n- The function should handle conversions efficiently with a time complexity of O(1).\n\n**Scenario**:\nYou are working on a project to convert energy values between various units, and you need to incorporate the conversion of \"electronvolt_per_photon\". The function should be robust and provide clear error messages for any invalid unit conversions.\n\n**Example**:\n```python\n>>> energy_conversion(\"electronvolt_per_photon\", \"joule\", 1)\n6.241509074460763e+15\n>>> energy_conversion(\"joule\", \"electronvolt_per_photon\", 6.241509074460763e+15)\n1.0\n>>> energy_conversion(\"electronvolt_per_photon\", \"wattsecond\", 1)\n0.00016402208664101444\n>>> energy_conversion(\"wattsecond\", \"electronvolt_per_photon\", 0.00016402208664101444)\n1.0\n```\n\n**Note**:\n- You must include appropriate test cases in the docstrings to demonstrate the functionality of the updated `energy_conversion` function.\n- Ensure that the function raises a `ValueError` with a descriptive message when an invalid unit is provided."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:<|Analysis Begin|>\n\n### Core Identification\n- **Algorithm/Data Structure**: Introspective Sort\n- **Complexity**: The complexity is a hybrid of Quicksort, Heapsort, and Insertion Sort. The average and best-case time complexity is \\(O(n \\log n)\\). The worst-case time complexity is \\(O(n^2)\\) if the partition function is poorly chosen.\n- **Principles**: Introspective Sort uses Quicksort, but switches to Heapsort if the depth of the recursion exceeds a certain threshold to avoid the worst-case scenario of Quicksort. Insertion Sort is used for small subarrays to optimize performance.\n\n### Characteristics & Applications\n- **Properties**: It is in-place and does not require additional space, except for the recursion stack.\n- **Common Use Cases**: Ideal for sorting large datasets that do not fit into memory or where randomness is important to avoid worst-case performance.\n- **Strengths/Limitations**: It provides good average-case performance and is stable for both large and small datasets. However, it can be less efficient for very small arrays due to the overhead of recursive calls.\n\n### Implementation Challenges\n- **Edge Cases**: Empty arrays, arrays with one element, and arrays with repeated elements.\n- **Performance Bottlenecks**: The partitioning phase can be slow if the pivot is not chosen well.\n- **Error Scenarios**: Incorrect sorting order due to poor pivot selection or incorrect recursive depth handling.\n- **Optimization Points**: Use of insertion sort for small subarrays, efficient pivot selection, and handling edge cases properly.\n\n<|Analysis End|>\n\n<|Question Begin|>\n\n**Problem Statement**:\nYou are tasked with implementing a sorting algorithm that uses Introspective Sort. Introspective Sort is a hybrid sorting algorithm that provides good average-case performance and is particularly useful for sorting large arrays. Your task is to complete the `intro_sort` function to ensure the algorithm works correctly and efficiently.\n\n**Function Signature**:\n```python\ndef intro_sort(array: list, start: int, end: int, size_threshold: int, max_depth: int) -> list:\n    \"\"\"\n    Sorts the array between indices `start` and `end` (inclusive) using Introspective Sort.\n    \n    :param array: The array to be sorted\n    :param start: The starting index of the subarray to sort\n    :param end: The ending index of the subarray to sort\n    :param size_threshold: The threshold size at which insertion sort is used\n    :param max_depth: The maximum depth of recursion before switching to Heap Sort\n    :return: The sorted subarray\n    \"\"\"\n```\n\n**Input**:\n- `array`: A list of integers to be sorted.\n- `start`: The starting index of the subarray to sort.\n- `end`: The ending index of the subarray to sort.\n- `size_threshold`: The threshold size at which insertion sort is used.\n- `max_depth`: The maximum depth of recursion before switching to Heap Sort.\n\n**Output**:\n- A sorted subarray.\n\n**Constraints**:\n- The length of `array` is between 1 and 10,000.\n- The indices `start` and `end` are valid and `start <= end`.\n\n**Examples**:\n```python\n# Example 1\narray = [4, 2, 6, 8, 1, 7, 8, 22, 14, 56, 27, 79"}], "metadata": {"prompt_id": "00000001", "row_id": 1, "seed_ids": [206], "mode": "algorithm", "instruction": "<|Analysis Begin|>\n\n### Core Identification\n- **Algorithm/Data Structure**: Introspective Sort\n- **Complexity**: The complexity is a hybrid of Quicksort, Heapsort, and Insertion Sort. The average and best-case time complexity is \\(O(n \\log n)\\). The worst-case time complexity is \\(O(n^2)\\) if the partition function is poorly chosen.\n- **Principles**: Introspective Sort uses Quicksort, but switches to Heapsort if the depth of the recursion exceeds a certain threshold to avoid the worst-case scenario of Quicksort. Insertion Sort is used for small subarrays to optimize performance.\n\n### Characteristics & Applications\n- **Properties**: It is in-place and does not require additional space, except for the recursion stack.\n- **Common Use Cases**: Ideal for sorting large datasets that do not fit into memory or where randomness is important to avoid worst-case performance.\n- **Strengths/Limitations**: It provides good average-case performance and is stable for both large and small datasets. However, it can be less efficient for very small arrays due to the overhead of recursive calls.\n\n### Implementation Challenges\n- **Edge Cases**: Empty arrays, arrays with one element, and arrays with repeated elements.\n- **Performance Bottlenecks**: The partitioning phase can be slow if the pivot is not chosen well.\n- **Error Scenarios**: Incorrect sorting order due to poor pivot selection or incorrect recursive depth handling.\n- **Optimization Points**: Use of insertion sort for small subarrays, efficient pivot selection, and handling edge cases properly.\n\n<|Analysis End|>\n\n<|Question Begin|>\n\n**Problem Statement**:\nYou are tasked with implementing a sorting algorithm that uses Introspective Sort. Introspective Sort is a hybrid sorting algorithm that provides good average-case performance and is particularly useful for sorting large arrays. Your task is to complete the `intro_sort` function to ensure the algorithm works correctly and efficiently.\n\n**Function Signature**:\n```python\ndef intro_sort(array: list, start: int, end: int, size_threshold: int, max_depth: int) -> list:\n    \"\"\"\n    Sorts the array between indices `start` and `end` (inclusive) using Introspective Sort.\n    \n    :param array: The array to be sorted\n    :param start: The starting index of the subarray to sort\n    :param end: The ending index of the subarray to sort\n    :param size_threshold: The threshold size at which insertion sort is used\n    :param max_depth: The maximum depth of recursion before switching to Heap Sort\n    :return: The sorted subarray\n    \"\"\"\n```\n\n**Input**:\n- `array`: A list of integers to be sorted.\n- `start`: The starting index of the subarray to sort.\n- `end`: The ending index of the subarray to sort.\n- `size_threshold`: The threshold size at which insertion sort is used.\n- `max_depth`: The maximum depth of recursion before switching to Heap Sort.\n\n**Output**:\n- A sorted subarray.\n\n**Constraints**:\n- The length of `array` is between 1 and 10,000.\n- The indices `start` and `end` are valid and `start <= end`.\n\n**Examples**:\n```python\n# Example 1\narray = [4, 2, 6, 8, 1, 7, 8, 22, 14, 56, 27, 79"}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are required to enhance the `StackWithQueues` class to support an additional operation: `get_min()`. This operation should return the minimum element in the stack in \\(O(1)\\) time complexity. You must implement this operation without using any additional data structures other than the two queues provided.\n\n### Input Format\n- The class will be instantiated as an object `stack`.\n- `stack.push(item)`: Pushes an integer `item` onto the stack.\n- `stack.pop()`: Removes the top element from the stack and returns it. If the stack is empty, it should raise an `IndexError`.\n- `stack.peek()`: Returns the top element of the stack without removing it. If the stack is empty, it should return `None`.\n- `stack.get_min()`: Returns the minimum element in the stack in \\(O(1)\\) time complexity.\n\n### Output Format\n- The `get_min()` method should return the minimum element in the stack.\n\n### Constraints\n- The stack can contain up to \\(10^5\\) elements.\n- The stack will only contain integer values.\n- The stack will not be empty when `get_min()` is called.\n\n### Performance Requirements\n- All operations (`push()`, `pop()`, `peek()`, and `get_min()`) must run in constant or amortized constant time.\n\n### Example\n```python\nstack = StackWithQueues()\nstack.push(5)\nstack.push(4)\nstack.push(6)\nstack.push(3)\nstack.get_min()  # Output should be 3\nstack.pop()\nstack.get_min()  # Output should be 4\n```\n\n### Context\nImplement the `get_min()` method in the `StackWithQueues` class to support the operation described above. Ensure that the implementation meets the specified time complexity requirements."}], "metadata": {"prompt_id": "00000002", "row_id": 2, "seed_ids": [416], "mode": "algorithm", "instruction": "You are required to enhance the `StackWithQueues` class to support an additional operation: `get_min()`. This operation should return the minimum element in the stack in \\(O(1)\\) time complexity. You must implement this operation without using any additional data structures other than the two queues provided.\n\n### Input Format\n- The class will be instantiated as an object `stack`.\n- `stack.push(item)`: Pushes an integer `item` onto the stack.\n- `stack.pop()`: Removes the top element from the stack and returns it. If the stack is empty, it should raise an `IndexError`.\n- `stack.peek()`: Returns the top element of the stack without removing it. If the stack is empty, it should return `None`.\n- `stack.get_min()`: Returns the minimum element in the stack in \\(O(1)\\) time complexity.\n\n### Output Format\n- The `get_min()` method should return the minimum element in the stack.\n\n### Constraints\n- The stack can contain up to \\(10^5\\) elements.\n- The stack will only contain integer values.\n- The stack will not be empty when `get_min()` is called.\n\n### Performance Requirements\n- All operations (`push()`, `pop()`, `peek()`, and `get_min()`) must run in constant or amortized constant time.\n\n### Example\n```python\nstack = StackWithQueues()\nstack.push(5)\nstack.push(4)\nstack.push(6)\nstack.push(3)\nstack.get_min()  # Output should be 3\nstack.pop()\nstack.get_min()  # Output should be 4\n```\n\n### Context\nImplement the `get_min()` method in the `StackWithQueues` class to support the operation described above. Ensure that the implementation meets the specified time complexity requirements."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:Design a function `interleave_strings` that takes two strings `first_str` and `second_str` and returns a new string where the characters from `first_str` and `second_str` are interleaved. If one string is longer, the extra characters should be appended to the end of the result string.\n\n**Function Signature**: `def interleave_strings(first_str: str, second_str: str) -> str:`\n\n**Input**:\n- `first_str` (1 <= len(first_str) <= 10^5): A string consisting of lowercase English letters.\n- `second_str` (1 <= len(second_str) <= 10^5): A string consisting of lowercase English letters.\n\n**Output**:\n- Return a single string that is the result of interleaving `first_str` and `second_str`.\n\n**Examples**:\n```python\n>>> interleave_strings(\"ABCD\", \"XY\")\n'AXBYCD'\n>>> interleave_strings(\"XY\", \"ABCD\")\n'XAYBCD'\n>>> interleave_strings(\"AB\", \"XYZ\")\n'AXBYZ'\n>>> interleave_strings(\"ABC\", \"\")\n'ABC'\n```\n\n**Constraints**:\n- The input strings contain only lowercase English letters.\n- The lengths of the input strings are between 1 and 10^5.\n\n**Performance Requirement**:\n- The function should handle the largest input size (10^5 characters) within 1 second."}], "metadata": {"prompt_id": "00000003", "row_id": 3, "seed_ids": [289], "mode": "algorithm", "instruction": "Design a function `interleave_strings` that takes two strings `first_str` and `second_str` and returns a new string where the characters from `first_str` and `second_str` are interleaved. If one string is longer, the extra characters should be appended to the end of the result string.\n\n**Function Signature**: `def interleave_strings(first_str: str, second_str: str) -> str:`\n\n**Input**:\n- `first_str` (1 <= len(first_str) <= 10^5): A string consisting of lowercase English letters.\n- `second_str` (1 <= len(second_str) <= 10^5): A string consisting of lowercase English letters.\n\n**Output**:\n- Return a single string that is the result of interleaving `first_str` and `second_str`.\n\n**Examples**:\n```python\n>>> interleave_strings(\"ABCD\", \"XY\")\n'AXBYCD'\n>>> interleave_strings(\"XY\", \"ABCD\")\n'XAYBCD'\n>>> interleave_strings(\"AB\", \"XYZ\")\n'AXBYZ'\n>>> interleave_strings(\"ABC\", \"\")\n'ABC'\n```\n\n**Constraints**:\n- The input strings contain only lowercase English letters.\n- The lengths of the input strings are between 1 and 10^5.\n\n**Performance Requirement**:\n- The function should handle the largest input size (10^5 characters) within 1 second."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are given a Python function `integer_square_root` that calculates the integer square root of a non-negative integer using a binary search approach. Your task is to implement a more efficient version of this function. Specifically, you need to optimize the current implementation to reduce the number of iterations in the binary search while handling edge cases properly.\n\n**Function Signature**:\n```python\ndef optimized_integer_square_root(num: int) -> int:\n    pass\n```\n\n**Requirements**:\n- The function must handle non-negative integers as input and raise a `ValueError` if the input is negative.\n- The function should return the integer square root of `num` rounded down to the nearest integer.\n- The optimized version should have a time complexity of \\(O(\\log(n))\\) and use \\(O(1)\\) space complexity.\n- Implement an early return for perfect squares and optimize the bounds checking in the binary search.\n\n**Test Cases**:\n```python\nassert optimized_integer_square_root(15) == 3\nassert optimized_integer_square_root(31) == 5\nassert optimized_integer_square_root(25) == 5\nassert optimized_integer_square_root(1) == 1\nassert optimized_integer_square_root(0) == 0\nassert optimized_integer_square_root(2_147_483_647) == 46340\nassert optimized_integer_square_root(-1) is None  # Should raise ValueError\n```\n\n**Note**:\nEnsure that the edge cases and performance are handled correctly. Optimize the bounds checking and early returns to improve the efficiency of the function."}], "metadata": {"prompt_id": "00000004", "row_id": 4, "seed_ids": [691], "mode": "algorithm", "instruction": "You are given a Python function `integer_square_root` that calculates the integer square root of a non-negative integer using a binary search approach. Your task is to implement a more efficient version of this function. Specifically, you need to optimize the current implementation to reduce the number of iterations in the binary search while handling edge cases properly.\n\n**Function Signature**:\n```python\ndef optimized_integer_square_root(num: int) -> int:\n    pass\n```\n\n**Requirements**:\n- The function must handle non-negative integers as input and raise a `ValueError` if the input is negative.\n- The function should return the integer square root of `num` rounded down to the nearest integer.\n- The optimized version should have a time complexity of \\(O(\\log(n))\\) and use \\(O(1)\\) space complexity.\n- Implement an early return for perfect squares and optimize the bounds checking in the binary search.\n\n**Test Cases**:\n```python\nassert optimized_integer_square_root(15) == 3\nassert optimized_integer_square_root(31) == 5\nassert optimized_integer_square_root(25) == 5\nassert optimized_integer_square_root(1) == 1\nassert optimized_integer_square_root(0) == 0\nassert optimized_integer_square_root(2_147_483_647) == 46340\nassert optimized_integer_square_root(-1) is None  # Should raise ValueError\n```\n\n**Note**:\nEnsure that the edge cases and performance are handled correctly. Optimize the bounds checking and early returns to improve the efficiency of the function."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Scenario\n\nYou are given a sorted list of integers and a target sum. Your task is to implement a function that finds the indices of the two numbers in the list that add up to the target sum using the two-pointer technique.\n\n### Requirements\n\n- **Function Name**: `two_sum_indices`\n- **Input**:\n  - A list of integers, `nums`, which is sorted in non-decreasing order.\n  - An integer, `target`, representing the target sum.\n- **Output**:\n  - Return a list of two integers, representing the indices of the two numbers in `nums` that add up to `target`. If no such pair exists, return an empty list.\n\n### Constraints\n\n- The length of `nums` will be in the range \\([2, 10^4]\\).\n- The elements of `nums` will be in the range \\([-10^9, 10^9]\\).\n- There will be exactly one solution, and you may not use the same element twice.\n- `nums` is sorted in non-decreasing order.\n\n### Example\n\n```python\ndef test_two_sum_indices():\n    assert two_sum_indices([2, 7, 11, 15], 9) == [0, 1]\n    assert two_sum_indices([2, 7, 11, 15], 17) == [0, 3]\n    assert two_sum_indices([2, 7, 11, 15], 18) == [1, 2]\n    assert two_sum_indices([2, 7, 11, 15], 26) == [2, 3]\n    assert two_sum_indices([1, 3, 3], 6) == [1, 2]\n    assert two_sum_indices([2, 7, 11, 15], 8) == []\n    assert two_sum_indices([3 * i for i in range(10)], 19) == []\n    assert two_sum_indices([1, 2, 3], 6) == []\n    print(\"All tests passed!\")\n\nif __name__ == \"__main__\":\n    test_two_sum_indices()\n```\n\n### Performance Requirements\n\nThe function should run efficiently, with a time complexity of \\(O(n)\\) and a space complexity of \\(O(1)\\).\n\n### Question\n\nImplement the `two_sum_indices` function."}], "metadata": {"prompt_id": "00000005", "row_id": 5, "seed_ids": [716], "mode": "algorithm", "instruction": "### Scenario\n\nYou are given a sorted list of integers and a target sum. Your task is to implement a function that finds the indices of the two numbers in the list that add up to the target sum using the two-pointer technique.\n\n### Requirements\n\n- **Function Name**: `two_sum_indices`\n- **Input**:\n  - A list of integers, `nums`, which is sorted in non-decreasing order.\n  - An integer, `target`, representing the target sum.\n- **Output**:\n  - Return a list of two integers, representing the indices of the two numbers in `nums` that add up to `target`. If no such pair exists, return an empty list.\n\n### Constraints\n\n- The length of `nums` will be in the range \\([2, 10^4]\\).\n- The elements of `nums` will be in the range \\([-10^9, 10^9]\\).\n- There will be exactly one solution, and you may not use the same element twice.\n- `nums` is sorted in non-decreasing order.\n\n### Example\n\n```python\ndef test_two_sum_indices():\n    assert two_sum_indices([2, 7, 11, 15], 9) == [0, 1]\n    assert two_sum_indices([2, 7, 11, 15], 17) == [0, 3]\n    assert two_sum_indices([2, 7, 11, 15], 18) == [1, 2]\n    assert two_sum_indices([2, 7, 11, 15], 26) == [2, 3]\n    assert two_sum_indices([1, 3, 3], 6) == [1, 2]\n    assert two_sum_indices([2, 7, 11, 15], 8) == []\n    assert two_sum_indices([3 * i for i in range(10)], 19) == []\n    assert two_sum_indices([1, 2, 3], 6) == []\n    print(\"All tests passed!\")\n\nif __name__ == \"__main__\":\n    test_two_sum_indices()\n```\n\n### Performance Requirements\n\nThe function should run efficiently, with a time complexity of \\(O(n)\\) and a space complexity of \\(O(1)\\).\n\n### Question\n\nImplement the `two_sum_indices` function."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Question\n\nYou are given a modified version of the Playfair cipher implementation provided in the code snippets. Your task is to implement a function `advanced_encrypt` that enhances the existing encryption algorithm by adding support for handling non-alphabetic characters and improving performance. Additionally, you need to implement a function `advanced_decrypt` that decrypts the text using the same key.\n\n#### Function Specifications\n1. **advanced_encrypt(key: str, text: str) -> str**\n   - **Input**:\n     - `key`: A string representing the encryption key.\n     - `text`: A string representing the plaintext to be encrypted.\n   - **Output**:\n     - A string representing the encrypted text.\n   - **Constraints**:\n     - The key should only contain alphabetic characters.\n     - The text can contain uppercase and lowercase letters, as well as non-alphabetic characters.\n     - The text should be converted to uppercase before encryption.\n   - **Performance Requirement**: The function should handle large texts efficiently.\n\n2. **advanced_decrypt(key: str, cipher_text: str) -> str**\n   - **Input**:\n     - `key`: A string representing the decryption key.\n     - `cipher_text`: A string representing the ciphertext to be decrypted.\n   - **Output**:\n     - A string representing the decrypted text.\n   - **Constraints**:\n     - The key should only contain alphabetic characters.\n     - The `cipher_text` should already be in uppercase.\n\n#### Implementation Steps\n1. Modify the `generate_table` function to handle non-alphabetic characters in the key.\n2. Implement the `advanced_encrypt` and `advanced_decrypt` functions to handle non-alphabetic characters and improve performance.\n3. Ensure that the functions are efficient and handle large inputs effectively.\n\n#### Example\n```python\nkey = \"marvin\"\ntext = \"jessica!123\"\n\n# Encrypted text\nencrypted_text = advanced_encrypt(key, text)\n# Decrypted text\ndecrypted_text = advanced_decrypt(key, encrypted_text)\n\nprint(f\"Encrypted: {encrypted_text}\")\nprint(f\"Decrypted: {decrypted_text}\")\n```\n\n#### Expected Output\n```\nEncrypted: QRACRWU!123\nDecrypted: JESSICA!123\n```\n\n#### Note\n- Make sure to handle all possible edge cases, such as empty strings or keys with non-alphabetic characters.\n- Optimize the code to handle large texts efficiently."}], "metadata": {"prompt_id": "00000006", "row_id": 6, "seed_ids": [65], "mode": "algorithm", "instruction": "### Question\n\nYou are given a modified version of the Playfair cipher implementation provided in the code snippets. Your task is to implement a function `advanced_encrypt` that enhances the existing encryption algorithm by adding support for handling non-alphabetic characters and improving performance. Additionally, you need to implement a function `advanced_decrypt` that decrypts the text using the same key.\n\n#### Function Specifications\n1. **advanced_encrypt(key: str, text: str) -> str**\n   - **Input**:\n     - `key`: A string representing the encryption key.\n     - `text`: A string representing the plaintext to be encrypted.\n   - **Output**:\n     - A string representing the encrypted text.\n   - **Constraints**:\n     - The key should only contain alphabetic characters.\n     - The text can contain uppercase and lowercase letters, as well as non-alphabetic characters.\n     - The text should be converted to uppercase before encryption.\n   - **Performance Requirement**: The function should handle large texts efficiently.\n\n2. **advanced_decrypt(key: str, cipher_text: str) -> str**\n   - **Input**:\n     - `key`: A string representing the decryption key.\n     - `cipher_text`: A string representing the ciphertext to be decrypted.\n   - **Output**:\n     - A string representing the decrypted text.\n   - **Constraints**:\n     - The key should only contain alphabetic characters.\n     - The `cipher_text` should already be in uppercase.\n\n#### Implementation Steps\n1. Modify the `generate_table` function to handle non-alphabetic characters in the key.\n2. Implement the `advanced_encrypt` and `advanced_decrypt` functions to handle non-alphabetic characters and improve performance.\n3. Ensure that the functions are efficient and handle large inputs effectively.\n\n#### Example\n```python\nkey = \"marvin\"\ntext = \"jessica!123\"\n\n# Encrypted text\nencrypted_text = advanced_encrypt(key, text)\n# Decrypted text\ndecrypted_text = advanced_decrypt(key, encrypted_text)\n\nprint(f\"Encrypted: {encrypted_text}\")\nprint(f\"Decrypted: {decrypted_text}\")\n```\n\n#### Expected Output\n```\nEncrypted: QRACRWU!123\nDecrypted: JESSICA!123\n```\n\n#### Note\n- Make sure to handle all possible edge cases, such as empty strings or keys with non-alphabetic characters.\n- Optimize the code to handle large texts efficiently."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are given a 2D matrix where each row is sorted in ascending order. Your task is to implement a function `search_value_in_matrix` that performs a 2D matrix binary search to find the given value. The function should return the coordinates `[row, col]` of the value if it exists, otherwise return `[-1, -1]`.\n\n**Input**:\n- `matrix`: A 2D list of integers where each row is sorted in ascending order.\n- `value`: An integer to search for in the matrix.\n\n**Output**:\n- A list containing the coordinates `[row, col]` of the value if found, otherwise `[-1, -1]`.\n\n**Constraints**:\n- The matrix can have up to \\(1000\\) rows and \\(1000\\) columns.\n- Each row can have up to \\(1000\\) elements.\n- The matrix is guaranteed to be non-empty.\n\n**Example**:\n```python\nmatrix = [\n    [1, 4, 7, 11, 15],\n    [2, 5, 8, 12, 19],\n    [3, 6, 9, 16, 22],\n    [10, 13, 14, 17, 24],\n    [18, 21, 23, 26, 30]\n]\ntarget = 1\nsearch_value_in_matrix(matrix, target) # Output: [0, 0]\n\ntarget = 20\nsearch_value_in_matrix(matrix, target) # Output: [-1, -1]\n```\n\n**Performance Requirement**:\n- The solution should be efficient and avoid deep recursion to prevent stack overflow."}], "metadata": {"prompt_id": "00000007", "row_id": 7, "seed_ids": [1095], "mode": "algorithm", "instruction": "You are given a 2D matrix where each row is sorted in ascending order. Your task is to implement a function `search_value_in_matrix` that performs a 2D matrix binary search to find the given value. The function should return the coordinates `[row, col]` of the value if it exists, otherwise return `[-1, -1]`.\n\n**Input**:\n- `matrix`: A 2D list of integers where each row is sorted in ascending order.\n- `value`: An integer to search for in the matrix.\n\n**Output**:\n- A list containing the coordinates `[row, col]` of the value if found, otherwise `[-1, -1]`.\n\n**Constraints**:\n- The matrix can have up to \\(1000\\) rows and \\(1000\\) columns.\n- Each row can have up to \\(1000\\) elements.\n- The matrix is guaranteed to be non-empty.\n\n**Example**:\n```python\nmatrix = [\n    [1, 4, 7, 11, 15],\n    [2, 5, 8, 12, 19],\n    [3, 6, 9, 16, 22],\n    [10, 13, 14, 17, 24],\n    [18, 21, 23, 26, 30]\n]\ntarget = 1\nsearch_value_in_matrix(matrix, target) # Output: [0, 0]\n\ntarget = 20\nsearch_value_in_matrix(matrix, target) # Output: [-1, -1]\n```\n\n**Performance Requirement**:\n- The solution should be efficient and avoid deep recursion to prevent stack overflow."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are given a singly linked list, and your task is to implement a function `detect_cycle` that detects whether a cycle exists in the linked list using Floyd's cycle detection algorithm.\n\n#### Function Signature\n\n```python\ndef detect_cycle(linked_list: LinkedList) -> bool:\n    pass\n```\n\n#### Input\n- `linked_list` (LinkedList): A singly linked list instance.\n\n#### Output\n- `bool`: `True` if a cycle exists in the linked list, otherwise `False`.\n\n#### Constraints\n- The linked list can contain up to \\(10^5\\) nodes.\n- Each node's data is an integer ranging from \\(-10^6\\) to \\(10^6\\).\n\n#### Performance Requirements\n- The function should run in \\(O(n)\\) time complexity.\n- The function should use \\(O(1)\\) space complexity.\n\n#### Example\n\n```python\nlinked_list = LinkedList()\nlinked_list.add_node(1)\nlinked_list.add_node(2)\nlinked_list.add_node(3)\nlinked_list.add_node(4)\n\n# Create a cycle in the linked list\nlinked_list.head.next_node.next_node.next_node = linked_list.head.next_node\n\nassert detect_cycle(linked_list) == True\n\nlinked_list2 = LinkedList()\nlinked_list2.add_node(1)\n\nassert detect_cycle(linked_list2) == False\n```\n\n### Additional Requirements\n\n- Ensure your implementation handles edge cases such as an empty list and a list with only one node.\n- Avoid any potential type errors by checking for `None` values before accessing `next_node`."}], "metadata": {"prompt_id": "00000008", "row_id": 8, "seed_ids": [327], "mode": "algorithm", "instruction": "You are given a singly linked list, and your task is to implement a function `detect_cycle` that detects whether a cycle exists in the linked list using Floyd's cycle detection algorithm.\n\n#### Function Signature\n\n```python\ndef detect_cycle(linked_list: LinkedList) -> bool:\n    pass\n```\n\n#### Input\n- `linked_list` (LinkedList): A singly linked list instance.\n\n#### Output\n- `bool`: `True` if a cycle exists in the linked list, otherwise `False`.\n\n#### Constraints\n- The linked list can contain up to \\(10^5\\) nodes.\n- Each node's data is an integer ranging from \\(-10^6\\) to \\(10^6\\).\n\n#### Performance Requirements\n- The function should run in \\(O(n)\\) time complexity.\n- The function should use \\(O(1)\\) space complexity.\n\n#### Example\n\n```python\nlinked_list = LinkedList()\nlinked_list.add_node(1)\nlinked_list.add_node(2)\nlinked_list.add_node(3)\nlinked_list.add_node(4)\n\n# Create a cycle in the linked list\nlinked_list.head.next_node.next_node.next_node = linked_list.head.next_node\n\nassert detect_cycle(linked_list) == True\n\nlinked_list2 = LinkedList()\nlinked_list2.add_node(1)\n\nassert detect_cycle(linked_list2) == False\n```\n\n### Additional Requirements\n\n- Ensure your implementation handles edge cases such as an empty list and a list with only one node.\n- Avoid any potential type errors by checking for `None` values before accessing `next_node`."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are given a list of integers and need to partition it into two subsets such that the difference between the sums of the subsets is minimized. Implement a function that returns the minimum possible difference.\n\n**Function Signature**: \n```python\ndef find_min_difference(numbers: list[int]) -> int:\n    pass\n```\n\n**Input**:\n- `numbers` (1 <= len(numbers) <= 100): A list of integers.\n\n**Output**:\n- Return an integer representing the minimum possible difference between the sums of the two subsets.\n\n**Examples**:\n```python\nassert find_min_difference([1, 2, 3, 4, 5]) == 1\nassert find_min_difference([5, 5, 5, 5, 5]) == 5\nassert find_min_difference([5, 5, 5, 5]) == 0\nassert find_min_difference([3]) == 3\nassert find_min_difference([]) == 0\nassert find_min_difference([1, 2, 3, 4]) == 0\nassert find_min_difference([-1, -5, 5, 1]) == 0\nassert find_min_difference([9, 9, 9, 9, 9]) == 9\nassert find_min_difference([1, 5, 10, 3]) == 1\nassert find_min_difference([-1, 0, 1]) == 0\nassert find_min_difference(range(10, 0, -1)) == 1\nassert find_min_difference([-1]) == 1\nassert find_min_difference([0, 0, 0, 1, 2, -4]) == 2\nassert find_min_difference([-1, -5, -10, -3]) == 3\n```\n\n**Constraints**:\n- The list can contain both positive and negative integers.\n- The list can be empty or contain a single element.\n- The list will not contain more than 100 elements.\n\n**Performance**:\n- Aim for a solution with a time complexity of \\(O(n \\times s)\\) and a space complexity of \\(O(n \\times s)\\)."}], "metadata": {"prompt_id": "00000009", "row_id": 9, "seed_ids": [21], "mode": "algorithm", "instruction": "You are given a list of integers and need to partition it into two subsets such that the difference between the sums of the subsets is minimized. Implement a function that returns the minimum possible difference.\n\n**Function Signature**: \n```python\ndef find_min_difference(numbers: list[int]) -> int:\n    pass\n```\n\n**Input**:\n- `numbers` (1 <= len(numbers) <= 100): A list of integers.\n\n**Output**:\n- Return an integer representing the minimum possible difference between the sums of the two subsets.\n\n**Examples**:\n```python\nassert find_min_difference([1, 2, 3, 4, 5]) == 1\nassert find_min_difference([5, 5, 5, 5, 5]) == 5\nassert find_min_difference([5, 5, 5, 5]) == 0\nassert find_min_difference([3]) == 3\nassert find_min_difference([]) == 0\nassert find_min_difference([1, 2, 3, 4]) == 0\nassert find_min_difference([-1, -5, 5, 1]) == 0\nassert find_min_difference([9, 9, 9, 9, 9]) == 9\nassert find_min_difference([1, 5, 10, 3]) == 1\nassert find_min_difference([-1, 0, 1]) == 0\nassert find_min_difference(range(10, 0, -1)) == 1\nassert find_min_difference([-1]) == 1\nassert find_min_difference([0, 0, 0, 1, 2, -4]) == 2\nassert find_min_difference([-1, -5, -10, -3]) == 3\n```\n\n**Constraints**:\n- The list can contain both positive and negative integers.\n- The list can be empty or contain a single element.\n- The list will not contain more than 100 elements.\n\n**Performance**:\n- Aim for a solution with a time complexity of \\(O(n \\times s)\\) and a space complexity of \\(O(n \\times s)\\)."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:#### Context\nA Lychrel number is a natural number that cannot form a palindrome through the reverse and add process within a specified number of iterations. The reverse and add process involves reversing the digits of a number and adding it to the original number.\n\n#### Problem\nYou are given a function `solution(limit: int = 10000)` that identifies Lychrel numbers below a specified limit. The function iterates through each number, performing the reverse and add process up to 50 times to check if a palindrome is formed. If not, the number is considered a Lychrel number.\n\nYour task is to implement an optimized version of the `solution` function that can handle larger limits more efficiently. Specifically, optimize the function to handle numbers up to \\(10^8\\) and determine how many Lychrel numbers exist within this range.\n\n#### Requirements\n1. **Input**:\n   - A single integer `limit` representing the upper limit for checking Lychrel numbers (e.g., `limit = 100000000` for the range up to 99999999).\n2. **Output**:\n   - Return the count of Lychrel numbers below the given limit.\n3. **Constraints**:\n   - \\(1 \\leq \\text{limit} \\leq 10^8\\).\n4. **Performance**:\n   - The solution should be efficient and handle the given constraints within a reasonable time.\n\n#### Example\n```python\ndef solution_optimized(limit: int) -> int:\n    # Your optimized solution here\n    pass\n\n# Example usage\nlimit = 100000000\nprint(f\"{solution_optimized(limit) = }\")\n```\n\n#### Hints\n- Consider optimizing the reverse and add process for larger numbers.\n- Explore ways to reduce the number of iterations if a palindrome is formed earlier.\n- Optimize string conversion and palindrome checks for performance.\n\n#### Note\nProvide a thorough explanation of the optimizations implemented in your solution."}], "metadata": {"prompt_id": "00000010", "row_id": 10, "seed_ids": [589], "mode": "algorithm", "instruction": "#### Context\nA Lychrel number is a natural number that cannot form a palindrome through the reverse and add process within a specified number of iterations. The reverse and add process involves reversing the digits of a number and adding it to the original number.\n\n#### Problem\nYou are given a function `solution(limit: int = 10000)` that identifies Lychrel numbers below a specified limit. The function iterates through each number, performing the reverse and add process up to 50 times to check if a palindrome is formed. If not, the number is considered a Lychrel number.\n\nYour task is to implement an optimized version of the `solution` function that can handle larger limits more efficiently. Specifically, optimize the function to handle numbers up to \\(10^8\\) and determine how many Lychrel numbers exist within this range.\n\n#### Requirements\n1. **Input**:\n   - A single integer `limit` representing the upper limit for checking Lychrel numbers (e.g., `limit = 100000000` for the range up to 99999999).\n2. **Output**:\n   - Return the count of Lychrel numbers below the given limit.\n3. **Constraints**:\n   - \\(1 \\leq \\text{limit} \\leq 10^8\\).\n4. **Performance**:\n   - The solution should be efficient and handle the given constraints within a reasonable time.\n\n#### Example\n```python\ndef solution_optimized(limit: int) -> int:\n    # Your optimized solution here\n    pass\n\n# Example usage\nlimit = 100000000\nprint(f\"{solution_optimized(limit) = }\")\n```\n\n#### Hints\n- Consider optimizing the reverse and add process for larger numbers.\n- Explore ways to reduce the number of iterations if a palindrome is formed earlier.\n- Optimize string conversion and palindrome checks for performance.\n\n#### Note\nProvide a thorough explanation of the optimizations implemented in your solution."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are tasked with implementing a function to approximate the square root of a given number using Newton's method. The function should handle edge cases and ensure robust performance.\n\n### Function Signature\n\n```python\nfrom typing import Tuple\n\ndef square_root_approximate(\n    a: float, \n    initial_guess: float = 2.0, \n    max_iter: int = 9999, \n    tolerance: float = 1e-14\n) -> Tuple[float, int, bool]:\n    \"\"\"\n    Approximate the square root of a number using Newton's method.\n    \n    Args:\n    a (float): The number to find the square root of.\n    initial_guess (float): The initial guess for the square root. Default is 2.0.\n    max_iter (int): The maximum number of iterations to perform. Default is 9999.\n    tolerance (float): The tolerance level for the approximation. Default is 1e-14.\n    \n    Returns:\n    Tuple[float, int, bool]: \n        - The approximated square root.\n        - The number of iterations performed.\n        - A boolean indicating if the approximation converged within the tolerance.\n    \n    Raises:\n    ValueError: If the input number is negative.\n    \"\"\"\n```\n\n### Constraints\n- The function should handle both positive and negative inputs correctly.\n- `a` must be a non-negative number.\n- The function should return the best approximation within the given tolerance and iteration limit.\n\n### Performance Requirements\n- Ensure the function converges to the correct result within the specified tolerance for all valid inputs.\n- The function should perform no more than `max_iter` iterations.\n\n### Example\n```python\n# Example usage\na = 16\ninitial_guess = 2.0\nmax_iter = 1000\ntolerance = 1e-10\n\nroot, iterations, converged = square_root_approximate(a, initial_guess, max_iter, tolerance)\nprint(root)  # Output: 4.0\nprint(iterations)  # Output: 4\nprint(converged)  # Output: True\n```\n\n### Requirements\n- Implement the logic to handle edge cases and ensure robust performance.\n- Use the provided `fx` and `fx_derivative` functions for the Newton's method.\n- Ensure the function correctly handles negative inputs by raising a `ValueError`."}], "metadata": {"prompt_id": "00000011", "row_id": 11, "seed_ids": [824], "mode": "algorithm", "instruction": "You are tasked with implementing a function to approximate the square root of a given number using Newton's method. The function should handle edge cases and ensure robust performance.\n\n### Function Signature\n\n```python\nfrom typing import Tuple\n\ndef square_root_approximate(\n    a: float, \n    initial_guess: float = 2.0, \n    max_iter: int = 9999, \n    tolerance: float = 1e-14\n) -> Tuple[float, int, bool]:\n    \"\"\"\n    Approximate the square root of a number using Newton's method.\n    \n    Args:\n    a (float): The number to find the square root of.\n    initial_guess (float): The initial guess for the square root. Default is 2.0.\n    max_iter (int): The maximum number of iterations to perform. Default is 9999.\n    tolerance (float): The tolerance level for the approximation. Default is 1e-14.\n    \n    Returns:\n    Tuple[float, int, bool]: \n        - The approximated square root.\n        - The number of iterations performed.\n        - A boolean indicating if the approximation converged within the tolerance.\n    \n    Raises:\n    ValueError: If the input number is negative.\n    \"\"\"\n```\n\n### Constraints\n- The function should handle both positive and negative inputs correctly.\n- `a` must be a non-negative number.\n- The function should return the best approximation within the given tolerance and iteration limit.\n\n### Performance Requirements\n- Ensure the function converges to the correct result within the specified tolerance for all valid inputs.\n- The function should perform no more than `max_iter` iterations.\n\n### Example\n```python\n# Example usage\na = 16\ninitial_guess = 2.0\nmax_iter = 1000\ntolerance = 1e-10\n\nroot, iterations, converged = square_root_approximate(a, initial_guess, max_iter, tolerance)\nprint(root)  # Output: 4.0\nprint(iterations)  # Output: 4\nprint(converged)  # Output: True\n```\n\n### Requirements\n- Implement the logic to handle edge cases and ensure robust performance.\n- Use the provided `fx` and `fx_derivative` functions for the Newton's method.\n- Ensure the function correctly handles negative inputs by raising a `ValueError`."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Question\n\nYou are given a function `f(x)` that takes a float and returns a float. Your task is to implement a numerical integration function using Simpson's method to approximate the definite integral of `f(x)` over a given interval \\([a, b]\\).\n\n#### Function Signature\n```python\ndef simpson_integration(function, a: float, b: float, precision: int) -> float:\n    pass\n```\n\n#### Constraints\n- \\(0 \\leq a \\leq b \\leq 1000\\)\n- \\(1 \\leq \\text{precision} \\leq 10\\)\n\n#### Input & Output\n- **function**: A function that takes a float and returns a float.\n- **a**: The lower limit of integration.\n- **b**: The upper limit of integration.\n- **precision**: The desired precision of the result.\n\n#### Return\nThe function should return the approximated value of the integral of `f(x)` over the interval \\([a, b]\\) with the specified precision.\n\n#### Example\n```python\nassert simpson_integration(lambda x: x * x, 1, 2, 4) == 2.333\n```\n\n#### Detailed Instructions\n1. The method should use Simpson's method to approximate the integral.\n2. Ensure that the function `f(x)` is called with valid arguments.\n3. Handle edge cases and ensure the function returns a float rounded to the specified precision.\n4. Optimize the method to handle large intervals and high precision requirements efficiently.\n\n#### Additional Notes\n- Ensure to validate the input values as shown in the provided code snippet.\n- The Simpson's method formula should be applied correctly over the interval.\n- Use a fixed number of steps (1000) in your implementation, as in the provided code snippet."}], "metadata": {"prompt_id": "00000012", "row_id": 12, "seed_ids": [821], "mode": "algorithm", "instruction": "### Question\n\nYou are given a function `f(x)` that takes a float and returns a float. Your task is to implement a numerical integration function using Simpson's method to approximate the definite integral of `f(x)` over a given interval \\([a, b]\\).\n\n#### Function Signature\n```python\ndef simpson_integration(function, a: float, b: float, precision: int) -> float:\n    pass\n```\n\n#### Constraints\n- \\(0 \\leq a \\leq b \\leq 1000\\)\n- \\(1 \\leq \\text{precision} \\leq 10\\)\n\n#### Input & Output\n- **function**: A function that takes a float and returns a float.\n- **a**: The lower limit of integration.\n- **b**: The upper limit of integration.\n- **precision**: The desired precision of the result.\n\n#### Return\nThe function should return the approximated value of the integral of `f(x)` over the interval \\([a, b]\\) with the specified precision.\n\n#### Example\n```python\nassert simpson_integration(lambda x: x * x, 1, 2, 4) == 2.333\n```\n\n#### Detailed Instructions\n1. The method should use Simpson's method to approximate the integral.\n2. Ensure that the function `f(x)` is called with valid arguments.\n3. Handle edge cases and ensure the function returns a float rounded to the specified precision.\n4. Optimize the method to handle large intervals and high precision requirements efficiently.\n\n#### Additional Notes\n- Ensure to validate the input values as shown in the provided code snippet.\n- The Simpson's method formula should be applied correctly over the interval.\n- Use a fixed number of steps (1000) in your implementation, as in the provided code snippet."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are required to implement a function that calculates the Manhattan distance between two points in an n-dimensional space. The function should be efficient and robust, handling various edge cases and providing meaningful error messages.\n\n**Requirements**:\n- Your function should be named `manhattan_distance_improved` and should take two parameters: `point_a` and `point_b`, both of which are lists of numbers representing points in the same n-dimensional space.\n- It should raise a `ValueError` if the points do not have the same number of dimensions.\n- It should raise a `TypeError` if the inputs are not lists of numbers.\n- The function should return a float representing the Manhattan distance.\n\n**Example Usage**:\n```python\n>>> manhattan_distance_improved([1,1], [2,2])\n2.0\n>>> manhattan_distance_improved([1.5,1.5], [2,2])\n1.0\n>>> manhattan_distance_improved([1.5,1.5], [2.5,2])\n1.5\n>>> manhattan_distance_improved([-3, -3, -3], [0, 0, 0])\n9.0\n>>> manhattan_distance_improved([1,1], None)\nTraceback (most recent call last):\n    ...\nValueError: Missing an input\n>>> manhattan_distance_improved([1,1], [2, 2, 2])\nTraceback (most recent call last):\n    ...\nValueError: Both points must be in the same n-dimensional space\n>>> manhattan_distance_improved([1, \"one\"], [2, 2, 2])\nTraceback (most recent call last):\n    ...\nTypeError: Expected a list of numbers as input, found str\n```\n\n**Performance Requirements**:\n- Your implementation should handle points with up to 1000 dimensions efficiently.\n\n**Note**: You are encouraged to use list comprehension and built-in functions for a concise and efficient implementation."}], "metadata": {"prompt_id": "00000013", "row_id": 13, "seed_ids": [714], "mode": "algorithm", "instruction": "You are required to implement a function that calculates the Manhattan distance between two points in an n-dimensional space. The function should be efficient and robust, handling various edge cases and providing meaningful error messages.\n\n**Requirements**:\n- Your function should be named `manhattan_distance_improved` and should take two parameters: `point_a` and `point_b`, both of which are lists of numbers representing points in the same n-dimensional space.\n- It should raise a `ValueError` if the points do not have the same number of dimensions.\n- It should raise a `TypeError` if the inputs are not lists of numbers.\n- The function should return a float representing the Manhattan distance.\n\n**Example Usage**:\n```python\n>>> manhattan_distance_improved([1,1], [2,2])\n2.0\n>>> manhattan_distance_improved([1.5,1.5], [2,2])\n1.0\n>>> manhattan_distance_improved([1.5,1.5], [2.5,2])\n1.5\n>>> manhattan_distance_improved([-3, -3, -3], [0, 0, 0])\n9.0\n>>> manhattan_distance_improved([1,1], None)\nTraceback (most recent call last):\n    ...\nValueError: Missing an input\n>>> manhattan_distance_improved([1,1], [2, 2, 2])\nTraceback (most recent call last):\n    ...\nValueError: Both points must be in the same n-dimensional space\n>>> manhattan_distance_improved([1, \"one\"], [2, 2, 2])\nTraceback (most recent call last):\n    ...\nTypeError: Expected a list of numbers as input, found str\n```\n\n**Performance Requirements**:\n- Your implementation should handle points with up to 1000 dimensions efficiently.\n\n**Note**: You are encouraged to use list comprehension and built-in functions for a concise and efficient implementation."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Scenario\nYou are working on a project that involves converting between mass and energy based on Einstein's famous equation, \\(E = mc^2\\). Your task is to implement a more robust version of the provided functions to handle a wider range of input values and to ensure that the results are accurate within a certain tolerance.\n\n### Problem Description\nImplement a function `calculate_energy_from_mass` that calculates the energy equivalent of a given mass \\(m\\) using the formula \\(E = mc^2\\), and a function `calculate_mass_from_energy` that calculates the mass equivalent of a given energy \\(E\\) using the formula \\(m = \\frac{E}{c^2}\\). Both functions should handle the following requirements:\n\n1. **Input Validation**: Both functions should raise a `ValueError` if the input is negative, indicating that the input is not physically meaningful.\n2. **Accuracy**: The functions should return results accurate to at least 15 decimal places.\n3. **Error Handling**: The functions should handle very small or very large input values to avoid floating-point precision issues.\n\n### Function Signatures\n```python\ndef calculate_energy_from_mass(mass: float) -> float:\n    \"\"\"\n    Calculates the energy (in Joules) equivalent of the given mass (in kilograms).\n    \n    mass (float): The mass in kilograms.\n    \n    Returns:\n    float: The energy in Joules.\n    \n    Raises:\n    ValueError: If the mass is negative.\n    \"\"\"\n    # Your implementation here\n\ndef calculate_mass_from_energy(energy: float) -> float:\n    \"\"\"\n    Calculates the mass (in kilograms) equivalent of the given energy (in Joules).\n    \n    energy (float): The energy in Joules.\n    \n    Returns:\n    float: The mass in kilograms.\n    \n    Raises:\n    ValueError: If the energy is negative.\n    \"\"\"\n    # Your implementation here\n```\n\n### Constraints\n- The input values for `mass` and `energy` can be very large or very small, but they must be within the range of valid floating-point numbers.\n- The output should be accurate to at least 15 decimal places.\n\n### Example Usage\n```python\n# Example 1\n>>> calculate_energy_from_mass(1.0)\n8.987551787368176e+16\n>>> calculate_mass_from_energy(8.987551787368176e+16)\n1.0\n\n# Example 2\n>>> calculate_energy_from_mass(124.56)\n1.11948945063458e+19\n>>> calculate_mass_from_energy(1.11948945063458e+19)\n124.56\n\n# Example 3\n>>> calculate_energy_from_mass(0)\n0.0\n>>> calculate_mass_from_energy(0)\n0.0\n\n# Example 4\n>>> calculate_energy_from_mass(-1.0)\nTraceback (most recent call last):\n    ...\nValueError: Mass can't be negative.\n\n# Example 5\n>>> calculate_mass_from_energy(-1.0)\nTraceback (most recent call last):\n    ...\nValueError: Energy can't be negative.\n```\n\n### Additional Constraints\n- The implementation should not rely on any external libraries for calculations. Use only the basic arithmetic operations and standard Python functions.\n\n### Performance Requirements\nThe functions should perform efficiently and should not have significant performance bottlenecks."}], "metadata": {"prompt_id": "00000014", "row_id": 14, "seed_ids": [150], "mode": "algorithm", "instruction": "### Scenario\nYou are working on a project that involves converting between mass and energy based on Einstein's famous equation, \\(E = mc^2\\). Your task is to implement a more robust version of the provided functions to handle a wider range of input values and to ensure that the results are accurate within a certain tolerance.\n\n### Problem Description\nImplement a function `calculate_energy_from_mass` that calculates the energy equivalent of a given mass \\(m\\) using the formula \\(E = mc^2\\), and a function `calculate_mass_from_energy` that calculates the mass equivalent of a given energy \\(E\\) using the formula \\(m = \\frac{E}{c^2}\\). Both functions should handle the following requirements:\n\n1. **Input Validation**: Both functions should raise a `ValueError` if the input is negative, indicating that the input is not physically meaningful.\n2. **Accuracy**: The functions should return results accurate to at least 15 decimal places.\n3. **Error Handling**: The functions should handle very small or very large input values to avoid floating-point precision issues.\n\n### Function Signatures\n```python\ndef calculate_energy_from_mass(mass: float) -> float:\n    \"\"\"\n    Calculates the energy (in Joules) equivalent of the given mass (in kilograms).\n    \n    mass (float): The mass in kilograms.\n    \n    Returns:\n    float: The energy in Joules.\n    \n    Raises:\n    ValueError: If the mass is negative.\n    \"\"\"\n    # Your implementation here\n\ndef calculate_mass_from_energy(energy: float) -> float:\n    \"\"\"\n    Calculates the mass (in kilograms) equivalent of the given energy (in Joules).\n    \n    energy (float): The energy in Joules.\n    \n    Returns:\n    float: The mass in kilograms.\n    \n    Raises:\n    ValueError: If the energy is negative.\n    \"\"\"\n    # Your implementation here\n```\n\n### Constraints\n- The input values for `mass` and `energy` can be very large or very small, but they must be within the range of valid floating-point numbers.\n- The output should be accurate to at least 15 decimal places.\n\n### Example Usage\n```python\n# Example 1\n>>> calculate_energy_from_mass(1.0)\n8.987551787368176e+16\n>>> calculate_mass_from_energy(8.987551787368176e+16)\n1.0\n\n# Example 2\n>>> calculate_energy_from_mass(124.56)\n1.11948945063458e+19\n>>> calculate_mass_from_energy(1.11948945063458e+19)\n124.56\n\n# Example 3\n>>> calculate_energy_from_mass(0)\n0.0\n>>> calculate_mass_from_energy(0)\n0.0\n\n# Example 4\n>>> calculate_energy_from_mass(-1.0)\nTraceback (most recent call last):\n    ...\nValueError: Mass can't be negative.\n\n# Example 5\n>>> calculate_mass_from_energy(-1.0)\nTraceback (most recent call last):\n    ...\nValueError: Energy can't be negative.\n```\n\n### Additional Constraints\n- The implementation should not rely on any external libraries for calculations. Use only the basic arithmetic operations and standard Python functions.\n\n### Performance Requirements\nThe functions should perform efficiently and should not have significant performance bottlenecks."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Scenario\nYou are developing a system where tasks need to be processed based on their priority and a custom scoring mechanism. You have been provided with a `FixedPriorityQueue` and an `ElementPriorityQueue`. Your task is to implement a new `CustomPriorityQueue` that combines the functionalities of both queues. The `CustomPriorityQueue` should handle tasks based on the following rules:\n\n1. Tasks are added to the queue based on a score, as in `ElementPriorityQueue`.\n2. The queue should support multiple priority levels, similar to `FixedPriorityQueue`.\n3. When a task is processed, it should follow a mixed strategy: first, tasks are processed by priority level in the order of their priority (highest to lowest), and within each priority level, tasks are processed in FIFO order.\n4. The queue should support the following operations:\n   - `enqueue(priority: int, score: int)`: Add a task to the queue with the given priority and score.\n   - `dequeue()`: Remove and return the task with the highest priority (and score if priorities are the same), following FIFO within each priority level.\n\n### Constraints\n- The queue should handle up to 100 tasks.\n- The priority levels are integers from `0` to `2`.\n- The score is an integer.\n\n### Performance Requirements\n- The `enqueue` and `dequeue` operations should run in `O(log N)` time complexity.\n\n### Expected Output\n```python\ncq = CustomPriorityQueue()\ncq.enqueue(0, 10)\ncq.enqueue(1, 15)\ncq.enqueue(2, 20)\ncq.enqueue(0, 12)\ncq.enqueue(1, 14)\ncq.enqueue(2, 22)\nprint(cq)  # Output: Priority 0: [10, 12], Priority 1: [15, 14], Priority 2: [20, 22]\nprint(cq.dequeue())  # Output: 10\nprint(cq)  # Output: Priority 0: [12], Priority 1: [15, 14], Priority 2: [20, 22]\nprint(cq.dequeue())  # Output: 12\nprint(cq)  # Output: Priority 0: [], Priority 1: [15, 14], Priority 2: [20, 22]\nprint(cq.dequeue())  # Output: 15\n```\n\n### Implementation\nWrite a class `CustomPriorityQueue` that meets the above requirements and includes methods for `enqueue` and `dequeue`."}], "metadata": {"prompt_id": "00000015", "row_id": 15, "seed_ids": [386], "mode": "algorithm", "instruction": "### Scenario\nYou are developing a system where tasks need to be processed based on their priority and a custom scoring mechanism. You have been provided with a `FixedPriorityQueue` and an `ElementPriorityQueue`. Your task is to implement a new `CustomPriorityQueue` that combines the functionalities of both queues. The `CustomPriorityQueue` should handle tasks based on the following rules:\n\n1. Tasks are added to the queue based on a score, as in `ElementPriorityQueue`.\n2. The queue should support multiple priority levels, similar to `FixedPriorityQueue`.\n3. When a task is processed, it should follow a mixed strategy: first, tasks are processed by priority level in the order of their priority (highest to lowest), and within each priority level, tasks are processed in FIFO order.\n4. The queue should support the following operations:\n   - `enqueue(priority: int, score: int)`: Add a task to the queue with the given priority and score.\n   - `dequeue()`: Remove and return the task with the highest priority (and score if priorities are the same), following FIFO within each priority level.\n\n### Constraints\n- The queue should handle up to 100 tasks.\n- The priority levels are integers from `0` to `2`.\n- The score is an integer.\n\n### Performance Requirements\n- The `enqueue` and `dequeue` operations should run in `O(log N)` time complexity.\n\n### Expected Output\n```python\ncq = CustomPriorityQueue()\ncq.enqueue(0, 10)\ncq.enqueue(1, 15)\ncq.enqueue(2, 20)\ncq.enqueue(0, 12)\ncq.enqueue(1, 14)\ncq.enqueue(2, 22)\nprint(cq)  # Output: Priority 0: [10, 12], Priority 1: [15, 14], Priority 2: [20, 22]\nprint(cq.dequeue())  # Output: 10\nprint(cq)  # Output: Priority 0: [12], Priority 1: [15, 14], Priority 2: [20, 22]\nprint(cq.dequeue())  # Output: 12\nprint(cq)  # Output: Priority 0: [], Priority 1: [15, 14], Priority 2: [20, 22]\nprint(cq.dequeue())  # Output: 15\n```\n\n### Implementation\nWrite a class `CustomPriorityQueue` that meets the above requirements and includes methods for `enqueue` and `dequeue`."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:**Problem Statement**:\nYou are required to implement a function to calculate the Builtin Voltage of a pn junction diode. The function should validate input parameters and handle edge cases appropriately. Additionally, you need to extend the functionality by allowing the user to specify the temperature in the function call.\n\n**Function Signature**:\n```python\nfrom typing import Tuple\n\ndef enhanced_builtin_voltage(\n    donor_conc: float, \n    acceptor_conc: float, \n    intrinsic_conc: float, \n    temperature: float = 300.0\n) -> float:\n    \"\"\"\n    Calculate the Builtin Voltage of a pn junction diode with given donor, acceptor, and intrinsic concentrations.\n    \n    :param donor_conc: Donor concentration (unit = 1/cm\u00b3)\n    :param acceptor_conc: Acceptor concentration (unit = 1/cm\u00b3)\n    :param intrinsic_conc: Intrinsic concentration (unit = 1/cm\u00b3)\n    :param temperature: Temperature in Kelvin (unit = K), default is 300 K\n    :return: Builtin Voltage (unit = V)\n    \n    Constraints:\n    - 1e10 <= donor_conc, acceptor_conc, intrinsic_conc <= 1e18\n    - 100 <= temperature <= 1000\n    \n    Examples:\n    >>> enhanced_builtin_voltage(donor_conc=1e17, acceptor_conc=1e17, intrinsic_conc=1e10, temperature=300)\n    0.833370010652644\n    >>> enhanced_builtin_voltage(donor_conc=1000, acceptor_conc=3000, intrinsic_conc=2000, temperature=400)\n    1.7257443376740775\n    >>> enhanced_builtin_voltage(donor_conc=1000, acceptor_conc=0, intrinsic_conc=1000, temperature=300)\n    Traceback (most recent call last):\n      ...\n    ValueError: Acceptor concentration should be positive\n    \"\"\"\n```\n\n**Requirements**:\n1. Validate that all input parameters are positive and within the specified constraints.\n2. Ensure that the donor and acceptor concentrations are greater than the intrinsic concentration.\n3. Use the provided constants from the `scipy.constants` module for the Boltzmann constant and the electron volt.\n4. Return the correct Builtin Voltage in volts.\n5. Include a comprehensive docstring with examples and constraints."}], "metadata": {"prompt_id": "00000016", "row_id": 16, "seed_ids": [185], "mode": "algorithm", "instruction": "**Problem Statement**:\nYou are required to implement a function to calculate the Builtin Voltage of a pn junction diode. The function should validate input parameters and handle edge cases appropriately. Additionally, you need to extend the functionality by allowing the user to specify the temperature in the function call.\n\n**Function Signature**:\n```python\nfrom typing import Tuple\n\ndef enhanced_builtin_voltage(\n    donor_conc: float, \n    acceptor_conc: float, \n    intrinsic_conc: float, \n    temperature: float = 300.0\n) -> float:\n    \"\"\"\n    Calculate the Builtin Voltage of a pn junction diode with given donor, acceptor, and intrinsic concentrations.\n    \n    :param donor_conc: Donor concentration (unit = 1/cm\u00b3)\n    :param acceptor_conc: Acceptor concentration (unit = 1/cm\u00b3)\n    :param intrinsic_conc: Intrinsic concentration (unit = 1/cm\u00b3)\n    :param temperature: Temperature in Kelvin (unit = K), default is 300 K\n    :return: Builtin Voltage (unit = V)\n    \n    Constraints:\n    - 1e10 <= donor_conc, acceptor_conc, intrinsic_conc <= 1e18\n    - 100 <= temperature <= 1000\n    \n    Examples:\n    >>> enhanced_builtin_voltage(donor_conc=1e17, acceptor_conc=1e17, intrinsic_conc=1e10, temperature=300)\n    0.833370010652644\n    >>> enhanced_builtin_voltage(donor_conc=1000, acceptor_conc=3000, intrinsic_conc=2000, temperature=400)\n    1.7257443376740775\n    >>> enhanced_builtin_voltage(donor_conc=1000, acceptor_conc=0, intrinsic_conc=1000, temperature=300)\n    Traceback (most recent call last):\n      ...\n    ValueError: Acceptor concentration should be positive\n    \"\"\"\n```\n\n**Requirements**:\n1. Validate that all input parameters are positive and within the specified constraints.\n2. Ensure that the donor and acceptor concentrations are greater than the intrinsic concentration.\n3. Use the provided constants from the `scipy.constants` module for the Boltzmann constant and the electron volt.\n4. Return the correct Builtin Voltage in volts.\n5. Include a comprehensive docstring with examples and constraints."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are given a problem to find the first Fibonacci number that is pandigital (contains all digits 1 to 9) both in the first nine digits and the last nine digits. The sequence is defined as:\n\n\\[\nF_n = F_{n-1} + F_{n-2}\n\\]\n\nwith initial conditions \\(F_1 = 1\\) and \\(F_2 = 1\\).\n\n**Task**:\nImplement a function `find_pandigital_fibonacci` that returns the index of the first Fibonacci number that meets the criteria. If no such number exists within the first 1,000,000 Fibonacci numbers, return -1.\n\n#### Constraints:\n- The function should handle large numbers efficiently.\n- The function should be optimized for performance.\n\n#### Input and Output:\n- **Input**: None (the function should use predefined variables and constants).\n- **Output**: An integer representing the index of the first pandigital Fibonacci number.\n\n#### Example:\n```python\n# Example input (no explicit input needed, use predefined values)\nprint(find_pandigital_fibonacci())  # Output: 329468\n```\n\n#### Helper Functions:\nYou are allowed to use helper functions if needed. The provided `check` and `check1` functions can be used but are not mandatory.\n\n#### Implementation:\n```python\ndef find_pandigital_fibonacci() -> int:\n    # Your implementation here\n    pass\n\ndef check(number: int) -> bool:\n    # Check function for pandigital properties\n    pass\n\ndef check1(number: int) -> bool:\n    # Check function for pandigital properties from end\n    pass\n```\n\n### Requirements:\n- The function `find_pandigital_fibonacci` should be efficient and optimized for large inputs.\n- Use modulo arithmetic to handle large numbers.\n- The solution should be able to handle the large number of Fibonacci numbers specified.\n\n### Scoring:\n- Correct implementation and performance: 100 points.\n- Partial implementation: Partial points based on correctness and efficiency.\n- Incorrect or inefficient implementation: 0 points."}], "metadata": {"prompt_id": "00000017", "row_id": 17, "seed_ids": [609], "mode": "algorithm", "instruction": "You are given a problem to find the first Fibonacci number that is pandigital (contains all digits 1 to 9) both in the first nine digits and the last nine digits. The sequence is defined as:\n\n\\[\nF_n = F_{n-1} + F_{n-2}\n\\]\n\nwith initial conditions \\(F_1 = 1\\) and \\(F_2 = 1\\).\n\n**Task**:\nImplement a function `find_pandigital_fibonacci` that returns the index of the first Fibonacci number that meets the criteria. If no such number exists within the first 1,000,000 Fibonacci numbers, return -1.\n\n#### Constraints:\n- The function should handle large numbers efficiently.\n- The function should be optimized for performance.\n\n#### Input and Output:\n- **Input**: None (the function should use predefined variables and constants).\n- **Output**: An integer representing the index of the first pandigital Fibonacci number.\n\n#### Example:\n```python\n# Example input (no explicit input needed, use predefined values)\nprint(find_pandigital_fibonacci())  # Output: 329468\n```\n\n#### Helper Functions:\nYou are allowed to use helper functions if needed. The provided `check` and `check1` functions can be used but are not mandatory.\n\n#### Implementation:\n```python\ndef find_pandigital_fibonacci() -> int:\n    # Your implementation here\n    pass\n\ndef check(number: int) -> bool:\n    # Check function for pandigital properties\n    pass\n\ndef check1(number: int) -> bool:\n    # Check function for pandigital properties from end\n    pass\n```\n\n### Requirements:\n- The function `find_pandigital_fibonacci` should be efficient and optimized for large inputs.\n- Use modulo arithmetic to handle large numbers.\n- The solution should be able to handle the large number of Fibonacci numbers specified.\n\n### Scoring:\n- Correct implementation and performance: 100 points.\n- Partial implementation: Partial points based on correctness and efficiency.\n- Incorrect or inefficient implementation: 0 points."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Scenario\n\nYou are working on a natural language processing project where you need to find the most similar document to a given query document based on the Euclidean distance between their vector representations. The dataset contains vector representations of several documents, and you need to write a function to find the closest document to a given query document.\n\n### Requirements\n\nYou are to implement the `find_closest_document` function that takes a dataset of documents and a query document, and returns the closest document to the query based on Euclidean distance. The function should follow these guidelines:\n\n- **Input**:\n  - `dataset`: A 2D NumPy array where each row represents a document vector.\n  - `query_document`: A 1D NumPy array representing the query document vector.\n- **Output**:\n  - A tuple containing the index of the closest document and the Euclidean distance between the query document and the closest document.\n\n- **Constraints**:\n  - The `dataset` will have at least 1 document.\n  - The `query_document` will have the same dimension as the vectors in the `dataset`.\n\n- **Performance Requirement**:\n  - The solution should have a time complexity better than \\(O(n \\times m)\\), where \\(n\\) is the number of documents in the dataset and \\(m\\) is the dimension of the vectors.\n\n### Example\n\n```python\nimport numpy as np\n\ndataset = np.array([[1, 2], [3, 4], [5, 6]])\nquery_document = np.array([4, 5])\n# Expected output: (1, 1.0)\n# Explanation: The closest document to [4, 5] is [3, 4] with a Euclidean distance of 1.0.\n```\n\n### Your Task\n\nImplement the `find_closest_document` function and ensure it meets the requirements described above."}], "metadata": {"prompt_id": "00000018", "row_id": 18, "seed_ids": [111], "mode": "algorithm", "instruction": "### Scenario\n\nYou are working on a natural language processing project where you need to find the most similar document to a given query document based on the Euclidean distance between their vector representations. The dataset contains vector representations of several documents, and you need to write a function to find the closest document to a given query document.\n\n### Requirements\n\nYou are to implement the `find_closest_document` function that takes a dataset of documents and a query document, and returns the closest document to the query based on Euclidean distance. The function should follow these guidelines:\n\n- **Input**:\n  - `dataset`: A 2D NumPy array where each row represents a document vector.\n  - `query_document`: A 1D NumPy array representing the query document vector.\n- **Output**:\n  - A tuple containing the index of the closest document and the Euclidean distance between the query document and the closest document.\n\n- **Constraints**:\n  - The `dataset` will have at least 1 document.\n  - The `query_document` will have the same dimension as the vectors in the `dataset`.\n\n- **Performance Requirement**:\n  - The solution should have a time complexity better than \\(O(n \\times m)\\), where \\(n\\) is the number of documents in the dataset and \\(m\\) is the dimension of the vectors.\n\n### Example\n\n```python\nimport numpy as np\n\ndataset = np.array([[1, 2], [3, 4], [5, 6]])\nquery_document = np.array([4, 5])\n# Expected output: (1, 1.0)\n# Explanation: The closest document to [4, 5] is [3, 4] with a Euclidean distance of 1.0.\n```\n\n### Your Task\n\nImplement the `find_closest_document` function and ensure it meets the requirements described above."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are tasked with enhancing the djb2 hash algorithm to handle non-ASCII characters and to ensure that the generated hash values are consistent across different runs. Additionally, the function should support a configurable magic constant to allow for testing with different hash functions.\n\n**Task**: Implement a Python function `enhanced_djb2` that takes a string `s` and an optional `magic_constant` (default is 5381) as input and returns the hash value. The function should handle non-ASCII characters correctly and ensure that the hash value is consistent. The function should also support a configurable magic constant.\n\n**Input**:\n- `s`: A string (input to be hashed).\n- `magic_constant`: An integer (default is 5381) representing the magic constant used in the hash function.\n\n**Output**:\n- An integer representing the hash value.\n\n**Constraints**:\n- The length of the string `s` will not exceed 1000 characters.\n- The `magic_constant` will be a positive integer.\n\n**Performance Requirements**:\n- The function should be able to handle large strings efficiently.\n\n**Example**:\n```python\n>>> enhanced_djb2('Algorithms')\n3782405311\n\n>>> enhanced_djb2('scramble bits', 33)\n1609059040\n\n>>> enhanced_djb2('\u975eASCII', 5381)\n756778245\n```\n\n**Note**: Non-ASCII characters should be properly encoded using their ASCII values or Unicode code points, and the hash function should produce consistent results."}], "metadata": {"prompt_id": "00000019", "row_id": 19, "seed_ids": [417], "mode": "algorithm", "instruction": "You are tasked with enhancing the djb2 hash algorithm to handle non-ASCII characters and to ensure that the generated hash values are consistent across different runs. Additionally, the function should support a configurable magic constant to allow for testing with different hash functions.\n\n**Task**: Implement a Python function `enhanced_djb2` that takes a string `s` and an optional `magic_constant` (default is 5381) as input and returns the hash value. The function should handle non-ASCII characters correctly and ensure that the hash value is consistent. The function should also support a configurable magic constant.\n\n**Input**:\n- `s`: A string (input to be hashed).\n- `magic_constant`: An integer (default is 5381) representing the magic constant used in the hash function.\n\n**Output**:\n- An integer representing the hash value.\n\n**Constraints**:\n- The length of the string `s` will not exceed 1000 characters.\n- The `magic_constant` will be a positive integer.\n\n**Performance Requirements**:\n- The function should be able to handle large strings efficiently.\n\n**Example**:\n```python\n>>> enhanced_djb2('Algorithms')\n3782405311\n\n>>> enhanced_djb2('scramble bits', 33)\n1609059040\n\n>>> enhanced_djb2('\u975eASCII', 5381)\n756778245\n```\n\n**Note**: Non-ASCII characters should be properly encoded using their ASCII values or Unicode code points, and the hash function should produce consistent results."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Problem Description\n\nYou are provided with a piece of code that generates a list of non-trivial digit-cancelling fractions with two-digit numerators and denominators. A digit-cancelling fraction is one where a digit in the numerator and the denominator can be incorrectly cancelled, yet the resulting fraction still equals the original fraction (e.g., 49/98 = 4/8).\n\nYour task is to extend this functionality to generate a list of such non-trivial digit-cancelling fractions for fractions with three-digit numerators and denominators. Additionally, compute the product of the denominators of these fractions in their lowest terms.\n\n### Input and Output Formats\n\n- **Input**: An integer `n` (2 or 3) representing the number of digits in the numerator and denominator.\n- **Output**: A single integer representing the product of the denominators of the valid non-trivial digit-cancelling fractions, in their lowest terms.\n\n### Constraints and Limitations\n\n- The input `n` will be either 2 or 3.\n\n### Performance Requirements\n\n- The solution should be efficient and handle the specified constraints within a reasonable time frame.\n\n### Example\n\n```python\ndef solution(n: int) -> int:\n    # Your implementation here\n    pass\n\n# Example usage\nprint(solution(2))  # Output: 90\nprint(solution(3))  # Output: [Your output]\n```\n\n### Additional Instructions\n\n- Ensure the logic for digit cancellation is correct.\n- Handle edge cases such as fractions where the digit cancellation leads to zero denominators.\n- Simplify the final product of denominators to its lowest terms."}], "metadata": {"prompt_id": "00000020", "row_id": 20, "seed_ids": [554], "mode": "algorithm", "instruction": "### Problem Description\n\nYou are provided with a piece of code that generates a list of non-trivial digit-cancelling fractions with two-digit numerators and denominators. A digit-cancelling fraction is one where a digit in the numerator and the denominator can be incorrectly cancelled, yet the resulting fraction still equals the original fraction (e.g., 49/98 = 4/8).\n\nYour task is to extend this functionality to generate a list of such non-trivial digit-cancelling fractions for fractions with three-digit numerators and denominators. Additionally, compute the product of the denominators of these fractions in their lowest terms.\n\n### Input and Output Formats\n\n- **Input**: An integer `n` (2 or 3) representing the number of digits in the numerator and denominator.\n- **Output**: A single integer representing the product of the denominators of the valid non-trivial digit-cancelling fractions, in their lowest terms.\n\n### Constraints and Limitations\n\n- The input `n` will be either 2 or 3.\n\n### Performance Requirements\n\n- The solution should be efficient and handle the specified constraints within a reasonable time frame.\n\n### Example\n\n```python\ndef solution(n: int) -> int:\n    # Your implementation here\n    pass\n\n# Example usage\nprint(solution(2))  # Output: 90\nprint(solution(3))  # Output: [Your output]\n```\n\n### Additional Instructions\n\n- Ensure the logic for digit cancellation is correct.\n- Handle edge cases such as fractions where the digit cancellation leads to zero denominators.\n- Simplify the final product of denominators to its lowest terms."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are working on a project that involves identifying weird numbers. A weird number is a natural number that is abundant but not semiperfect. An abundant number is a number for which the sum of its proper divisors is greater than the number itself. A semiperfect number is a number that can be expressed as the sum of some of its divisors (excluding the number itself).\n\nGiven a list of natural numbers, write a function `find_weird_numbers` that returns a list of all weird numbers from the input list. Ensure that your function is efficient and handles edge cases properly.\n\n#### Input and Output Formats\n- **Input**:\n  - A list of integers `numbers` (1 \u2264 len(numbers) \u2264 1000), where each number is in the range 1 \u2264 number \u2264 10000.\n\n- **Output**:\n  - A list of integers representing the weird numbers in the input list.\n\n#### Constraints and Limitations\n- The input list can contain up to 1000 numbers.\n- Each number in the list is in the range 1 to 10000.\n\n#### Performance Requirements\n- Your function should be able to handle the input within a reasonable time, ideally under 1 second for the given constraints.\n\n#### Example\n```python\n>>> find_weird_numbers([69, 70, 71])\n[70]\n>>> find_weird_numbers([12, 18, 20, 24, 25])\n[20, 24]\n```\n\n#### Scenario/Context\nYou are working on a number theory project and need to identify weird numbers in a given list of natural numbers. Your function should be efficient and handle the edge cases properly."}], "metadata": {"prompt_id": "00000022", "row_id": 22, "seed_ids": [792], "mode": "algorithm", "instruction": "You are working on a project that involves identifying weird numbers. A weird number is a natural number that is abundant but not semiperfect. An abundant number is a number for which the sum of its proper divisors is greater than the number itself. A semiperfect number is a number that can be expressed as the sum of some of its divisors (excluding the number itself).\n\nGiven a list of natural numbers, write a function `find_weird_numbers` that returns a list of all weird numbers from the input list. Ensure that your function is efficient and handles edge cases properly.\n\n#### Input and Output Formats\n- **Input**:\n  - A list of integers `numbers` (1 \u2264 len(numbers) \u2264 1000), where each number is in the range 1 \u2264 number \u2264 10000.\n\n- **Output**:\n  - A list of integers representing the weird numbers in the input list.\n\n#### Constraints and Limitations\n- The input list can contain up to 1000 numbers.\n- Each number in the list is in the range 1 to 10000.\n\n#### Performance Requirements\n- Your function should be able to handle the input within a reasonable time, ideally under 1 second for the given constraints.\n\n#### Example\n```python\n>>> find_weird_numbers([69, 70, 71])\n[70]\n>>> find_weird_numbers([12, 18, 20, 24, 25])\n[20, 24]\n```\n\n#### Scenario/Context\nYou are working on a number theory project and need to identify weird numbers in a given list of natural numbers. Your function should be efficient and handle the edge cases properly."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:**Problem Statement**:\nWrite a Python function `count_letters` that converts numbers from 1 to 1000 into their English word representations and counts the total number of letters used, excluding spaces and hyphens. The function should be able to handle numbers up to 1000 and return the total count of letters.\n\n**Function Signature**:\n```python\ndef count_letters(n: int) -> int:\n    pass\n```\n\n**Input**:\n- `n` (1 <= n <= 1000): An integer representing the number to be converted and counted.\n\n**Output**:\n- An integer representing the total number of letters used when the number is written in words.\n\n**Constraints**:\n- The function must handle all numbers from 1 to 1000 inclusively.\n- Do not count spaces or hyphens when counting letters.\n\n**Example**:\n```python\nassert count_letters(100) == 11\nassert count_letters(342) == 23\nassert count_letters(115) == 20\nassert count_letters(1000) == 21124\n```\n\n**Note**:\n- Your solution should be efficient and handle all edge cases as described in the provided snippet.\n\n**Performance Requirement**:\n- The function should be able to process the input within a reasonable time, considering the constraints."}], "metadata": {"prompt_id": "00000023", "row_id": 23, "seed_ids": [529], "mode": "algorithm", "instruction": "**Problem Statement**:\nWrite a Python function `count_letters` that converts numbers from 1 to 1000 into their English word representations and counts the total number of letters used, excluding spaces and hyphens. The function should be able to handle numbers up to 1000 and return the total count of letters.\n\n**Function Signature**:\n```python\ndef count_letters(n: int) -> int:\n    pass\n```\n\n**Input**:\n- `n` (1 <= n <= 1000): An integer representing the number to be converted and counted.\n\n**Output**:\n- An integer representing the total number of letters used when the number is written in words.\n\n**Constraints**:\n- The function must handle all numbers from 1 to 1000 inclusively.\n- Do not count spaces or hyphens when counting letters.\n\n**Example**:\n```python\nassert count_letters(100) == 11\nassert count_letters(342) == 23\nassert count_letters(115) == 20\nassert count_letters(1000) == 21124\n```\n\n**Note**:\n- Your solution should be efficient and handle all edge cases as described in the provided snippet.\n\n**Performance Requirement**:\n- The function should be able to process the input within a reasonable time, considering the constraints."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:Design a function `hex_to_bin_optimized` that converts a given hexadecimal string to its binary representation. The function should handle the following:\n\n- **Input**: A string representing a hexadecimal number (potentially with leading/trailing whitespace).\n- **Output**: A string representing the binary equivalent of the hexadecimal number.\n- **Constraints**:\n  - The input string can be in the range `1 <= len(input_string) <= 1000`.\n  - The input string may contain leading and trailing whitespace, and may be prefixed with a `-` for negative numbers.\n- **Performance Requirements**: Optimize the function for better performance, especially for large input strings.\n\nYour task is to implement the function `hex_to_bin_optimized` which should be more efficient than the provided `hex_to_bin` function.\n\n```python\ndef hex_to_bin_optimized(hex_num: str) -> str:\n    \"\"\"\n    Convert a hexadecimal value to its binary equivalent, optimized for performance.\n    >>> hex_to_bin_optimized(\"AC\")\n    \"10101100\"\n    >>> hex_to_bin_optimized(\"9A4\")\n    \"100110100100\"\n    >>> hex_to_bin_optimized(\"   12f   \")\n    \"100101111\"\n    >>> hex_to_bin_optimized(\"FfFf\")\n    \"1111111111111111\"\n    >>> hex_to_bin_optimized(\"-fFfF\")\n    \"-1111111111111111\"\n    >>> hex_to_bin_optimized(\"F-f\")\n    Traceback (most recent call last):\n        ...\n    ValueError: Invalid value was passed to the function\n    >>> hex_to_bin_optimized(\"\")\n    Traceback (most recent call last):\n        ...\n    ValueError: No value was passed to the function\n    \"\"\"\n\n    # Your implementation here\n\nif __name__ == \"__main__\":\n    import doctest\n\n    doctest.testmod()\n```\n\nNote: You should aim to use bitwise operations to enhance performance and handle the conversion more efficiently."}], "metadata": {"prompt_id": "00000024", "row_id": 24, "seed_ids": [650], "mode": "algorithm", "instruction": "Design a function `hex_to_bin_optimized` that converts a given hexadecimal string to its binary representation. The function should handle the following:\n\n- **Input**: A string representing a hexadecimal number (potentially with leading/trailing whitespace).\n- **Output**: A string representing the binary equivalent of the hexadecimal number.\n- **Constraints**:\n  - The input string can be in the range `1 <= len(input_string) <= 1000`.\n  - The input string may contain leading and trailing whitespace, and may be prefixed with a `-` for negative numbers.\n- **Performance Requirements**: Optimize the function for better performance, especially for large input strings.\n\nYour task is to implement the function `hex_to_bin_optimized` which should be more efficient than the provided `hex_to_bin` function.\n\n```python\ndef hex_to_bin_optimized(hex_num: str) -> str:\n    \"\"\"\n    Convert a hexadecimal value to its binary equivalent, optimized for performance.\n    >>> hex_to_bin_optimized(\"AC\")\n    \"10101100\"\n    >>> hex_to_bin_optimized(\"9A4\")\n    \"100110100100\"\n    >>> hex_to_bin_optimized(\"   12f   \")\n    \"100101111\"\n    >>> hex_to_bin_optimized(\"FfFf\")\n    \"1111111111111111\"\n    >>> hex_to_bin_optimized(\"-fFfF\")\n    \"-1111111111111111\"\n    >>> hex_to_bin_optimized(\"F-f\")\n    Traceback (most recent call last):\n        ...\n    ValueError: Invalid value was passed to the function\n    >>> hex_to_bin_optimized(\"\")\n    Traceback (most recent call last):\n        ...\n    ValueError: No value was passed to the function\n    \"\"\"\n\n    # Your implementation here\n\nif __name__ == \"__main__\":\n    import doctest\n\n    doctest.testmod()\n```\n\nNote: You should aim to use bitwise operations to enhance performance and handle the conversion more efficiently."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:<|Analysis Begin|>\n\n### Algorithm/Data Structure\n\n**Name and Type**: The provided code snippets demonstrate the calculation of Fibonacci numbers using several methods: iteration, recursion, memoization, and a simplified form of Binet's formula. Additionally, a matrix exponentiation method is used, which is a more advanced technique.\n\n**Core Operational Steps**:\n- **Iteration**: Uses a loop to iterate and calculate the Fibonacci sequence.\n- **Recursion**: Recursively calculates the Fibonacci sequence by dividing the problem into smaller subproblems.\n- **Memoization**: Stores the results of expensive function calls and reuses them when the same inputs occur again.\n- **Binet's Formula**: Uses mathematical formulas to calculate Fibonacci numbers, which is efficient but limited by floating-point precision.\n- **Matrix Exponentiation**: Utilizes matrix multiplication to compute the Fibonacci sequence, which is highly efficient for larger values of \\( n \\).\n\n**Time Complexity**:\n- **Iteration**: \\( O(n) \\)\n- **Recursion**: \\( O(2^n) \\) (without memoization), \\( O(n) \\) (with memoization)\n- **Binet's Formula**: \\( O(1) \\)\n- **Matrix Exponentiation**: \\( O(\\log n) \\)\n\n**Space Complexity**:\n- **Iteration**: \\( O(1) \\) (excluding the output list)\n- **Recursion**: \\( O(n) \\) (due to the call stack)\n- **Memoization**: \\( O(n) \\) (for storing intermediate results)\n- **Binet's Formula**: \\( O(1) \\)\n- **Matrix Exponentiation**: \\( O(1) \\) (excluding the output)\n\n### Characteristics & Applications\n\n**Properties**:\n- **Iteration**: Simple and easy to understand, but not efficient for large \\( n \\) due to its linear time complexity.\n- **Recursion**: Can lead to stack overflow for large \\( n \\) and is inefficient, but useful for teaching recursion.\n- **Memoization**: Efficient for large \\( n \\) and avoids redundant calculations, making it a good balance between speed and memory usage.\n- **Binet's Formula**: Efficient but limited by floating-point precision, making it less accurate for large values.\n- **Matrix Exponentiation**: Extremely efficient for very large \\( n \\) but requires understanding of matrix operations and logarithmic time complexity.\n\n**Common Use Cases**:\n- **Iteration**: Useful for small values of \\( n \\) where simplicity is preferred.\n- **Recursion**: Often used in teaching recursion, but not suitable for large \\( n \\).\n- **Memoization**: Good for practical applications where performance is critical and \\( n \\) is large.\n- **Binet's Formula**: Used in contexts where a quick, approximate solution is sufficient.\n- **Matrix Exponentiation**: Ideal for large \\( n \\) in performance-critical applications.\n\n**Strengths/Limitations**:\n- **Iteration**: Simple to implement, but inefficient for large \\( n \\).\n- **Recursion**: Elegant and easy to understand, but inefficient and prone to stack overflow.\n- **Memoization**: Efficient and avoids redundant calculations, but requires additional memory.\n- **Binet's Formula**: Fast but limited by floating-point precision, making it less accurate for large \\( n \\).\n- **Matrix Exponentiation**: Highly efficient with \\( O(\\log n) \\) time complexity but requires understanding of matrix operations.\n\n### Implementation Challenges\n\n**Edge Cases**:\n- **Negative Input**: All methods except the iterative yield version raise a `ValueError` for negative inputs.\n- **Large Input**: Binet's formula and matrix exponentiation have limitations for very large inputs due to floating-point precision and time complexity, respectively.\n\n**Performance Bottlenecks**:\n- **Recursion**: High stack usage and inefficiency, leading to stack overflow for large \\( n \\).\n- **Memoization**: Requires additional memory to"}], "metadata": {"prompt_id": "00000025", "row_id": 25, "seed_ids": [699], "mode": "algorithm", "instruction": "<|Analysis Begin|>\n\n### Algorithm/Data Structure\n\n**Name and Type**: The provided code snippets demonstrate the calculation of Fibonacci numbers using several methods: iteration, recursion, memoization, and a simplified form of Binet's formula. Additionally, a matrix exponentiation method is used, which is a more advanced technique.\n\n**Core Operational Steps**:\n- **Iteration**: Uses a loop to iterate and calculate the Fibonacci sequence.\n- **Recursion**: Recursively calculates the Fibonacci sequence by dividing the problem into smaller subproblems.\n- **Memoization**: Stores the results of expensive function calls and reuses them when the same inputs occur again.\n- **Binet's Formula**: Uses mathematical formulas to calculate Fibonacci numbers, which is efficient but limited by floating-point precision.\n- **Matrix Exponentiation**: Utilizes matrix multiplication to compute the Fibonacci sequence, which is highly efficient for larger values of \\( n \\).\n\n**Time Complexity**:\n- **Iteration**: \\( O(n) \\)\n- **Recursion**: \\( O(2^n) \\) (without memoization), \\( O(n) \\) (with memoization)\n- **Binet's Formula**: \\( O(1) \\)\n- **Matrix Exponentiation**: \\( O(\\log n) \\)\n\n**Space Complexity**:\n- **Iteration**: \\( O(1) \\) (excluding the output list)\n- **Recursion**: \\( O(n) \\) (due to the call stack)\n- **Memoization**: \\( O(n) \\) (for storing intermediate results)\n- **Binet's Formula**: \\( O(1) \\)\n- **Matrix Exponentiation**: \\( O(1) \\) (excluding the output)\n\n### Characteristics & Applications\n\n**Properties**:\n- **Iteration**: Simple and easy to understand, but not efficient for large \\( n \\) due to its linear time complexity.\n- **Recursion**: Can lead to stack overflow for large \\( n \\) and is inefficient, but useful for teaching recursion.\n- **Memoization**: Efficient for large \\( n \\) and avoids redundant calculations, making it a good balance between speed and memory usage.\n- **Binet's Formula**: Efficient but limited by floating-point precision, making it less accurate for large values.\n- **Matrix Exponentiation**: Extremely efficient for very large \\( n \\) but requires understanding of matrix operations and logarithmic time complexity.\n\n**Common Use Cases**:\n- **Iteration**: Useful for small values of \\( n \\) where simplicity is preferred.\n- **Recursion**: Often used in teaching recursion, but not suitable for large \\( n \\).\n- **Memoization**: Good for practical applications where performance is critical and \\( n \\) is large.\n- **Binet's Formula**: Used in contexts where a quick, approximate solution is sufficient.\n- **Matrix Exponentiation**: Ideal for large \\( n \\) in performance-critical applications.\n\n**Strengths/Limitations**:\n- **Iteration**: Simple to implement, but inefficient for large \\( n \\).\n- **Recursion**: Elegant and easy to understand, but inefficient and prone to stack overflow.\n- **Memoization**: Efficient and avoids redundant calculations, but requires additional memory.\n- **Binet's Formula**: Fast but limited by floating-point precision, making it less accurate for large \\( n \\).\n- **Matrix Exponentiation**: Highly efficient with \\( O(\\log n) \\) time complexity but requires understanding of matrix operations.\n\n### Implementation Challenges\n\n**Edge Cases**:\n- **Negative Input**: All methods except the iterative yield version raise a `ValueError` for negative inputs.\n- **Large Input**: Binet's formula and matrix exponentiation have limitations for very large inputs due to floating-point precision and time complexity, respectively.\n\n**Performance Bottlenecks**:\n- **Recursion**: High stack usage and inefficiency, leading to stack overflow for large \\( n \\).\n- **Memoization**: Requires additional memory to"}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Context\nYou are developing a simple text processing application that includes basic text encryption and decryption functionalities. The application should support a custom ROT13 variant where the shift value is configurable. Your task is to extend the provided code to include a function that can handle this custom ROT13 variant and a main function to test the functionality.\n\n### Requirements\n\n1. Implement a function `custom_dencrypt(s: str, n: int = 13) -> str` that takes a string `s` and a positive integer `n` as input and returns the string encrypted or decrypted using the ROT13 variant with a shift of `n`.\n2. The function should handle both uppercase and lowercase letters correctly, and non-alphabetic characters should remain unchanged.\n3. Include a `main` function to test the `custom_dencrypt` function with the following requirements:\n   - It should prompt the user to enter a message.\n   - It should display the encrypted message using a specified shift value.\n   - It should display the decrypted message after applying the encryption again with the same shift value.\n4. Ensure that the shift value `n` is positive and does not exceed 26. If the shift value is invalid, your function should handle it gracefully and provide a meaningful error message.\n\n### Example\n\n```python\nif __name__ == \"__main__\":\n    s0 = input(\"Enter message: \")\n\n    try:\n        shift = int(input(\"Enter shift value (1-26): \"))\n        if 1 <= shift <= 26:\n            s1 = custom_dencrypt(s0, shift)\n            print(\"Encryption:\", s1)\n\n            s2 = custom_dencrypt(s1, shift)\n            print(\"Decryption: \", s2)\n        else:\n            print(\"Shift value must be between 1 and 26.\")\n    except ValueError:\n        print(\"Invalid input. Please enter a number between 1 and 26.\")\n```\n\n### Constraints\n\n- The input string can contain up to \\(10^5\\) characters.\n- The shift value \\(n\\) should be a positive integer between 1 and 26, inclusive.\n\n### Performance Requirements\n\n- The solution should be able to handle the encryption and decryption of a string of up to \\(10^5\\) characters within a reasonable amount of time."}], "metadata": {"prompt_id": "00000026", "row_id": 26, "seed_ids": [66], "mode": "algorithm", "instruction": "### Context\nYou are developing a simple text processing application that includes basic text encryption and decryption functionalities. The application should support a custom ROT13 variant where the shift value is configurable. Your task is to extend the provided code to include a function that can handle this custom ROT13 variant and a main function to test the functionality.\n\n### Requirements\n\n1. Implement a function `custom_dencrypt(s: str, n: int = 13) -> str` that takes a string `s` and a positive integer `n` as input and returns the string encrypted or decrypted using the ROT13 variant with a shift of `n`.\n2. The function should handle both uppercase and lowercase letters correctly, and non-alphabetic characters should remain unchanged.\n3. Include a `main` function to test the `custom_dencrypt` function with the following requirements:\n   - It should prompt the user to enter a message.\n   - It should display the encrypted message using a specified shift value.\n   - It should display the decrypted message after applying the encryption again with the same shift value.\n4. Ensure that the shift value `n` is positive and does not exceed 26. If the shift value is invalid, your function should handle it gracefully and provide a meaningful error message.\n\n### Example\n\n```python\nif __name__ == \"__main__\":\n    s0 = input(\"Enter message: \")\n\n    try:\n        shift = int(input(\"Enter shift value (1-26): \"))\n        if 1 <= shift <= 26:\n            s1 = custom_dencrypt(s0, shift)\n            print(\"Encryption:\", s1)\n\n            s2 = custom_dencrypt(s1, shift)\n            print(\"Decryption: \", s2)\n        else:\n            print(\"Shift value must be between 1 and 26.\")\n    except ValueError:\n        print(\"Invalid input. Please enter a number between 1 and 26.\")\n```\n\n### Constraints\n\n- The input string can contain up to \\(10^5\\) characters.\n- The shift value \\(n\\) should be a positive integer between 1 and 26, inclusive.\n\n### Performance Requirements\n\n- The solution should be able to handle the encryption and decryption of a string of up to \\(10^5\\) characters within a reasonable amount of time."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Context:\nYou are tasked with enhancing a Vigen\u00e8re Cipher implementation to support both encryption and decryption. Your goal is to handle a larger set of characters, including spaces and punctuation, and to ensure the function is robust against edge cases.\n\n### Problem Statement:\nImplement the `encrypt_message` and `decrypt_message` functions to correctly handle a message that may contain uppercase and lowercase letters, spaces, and punctuation marks as defined in the `LETTERS` string. Your implementation should maintain the case of the original message and should correctly handle the keyword wrapping for each character.\n\n### Requirements:\n- **Input**:\n  - `key`: A string representing the encryption/decryption key.\n  - `message`: A string representing the message to be encrypted or decrypted.\n  - `mode`: A string that is either `\"encrypt\"` or `\"decrypt\"`.\n\n- **Output**:\n  - Return the translated message as a string.\n\n- **Constraints**:\n  - The key can consist of any alphanumeric characters.\n  - The message can contain uppercase and lowercase letters, spaces, and punctuation marks.\n  - The `LETTERS` string includes all uppercase and lowercase English letters, as well as digits.\n\n### Example:\n```python\n# Example 1: Encryption\nkey = 'HDarji'\nmessage = 'This is Harshil Darji from Dharmaj.'\nmode = 'encrypt'\ntranslate_message(key, message, mode)  # Output: 'Akij ra Odrjqqs Gaisq muod Mphumrs.'\n\n# Example 2: Decryption\nkey = 'HDarji'\nmessage = 'Akij ra Odrjqqs Gaisq muod Mphumrs.'\nmode = 'decrypt'\ntranslate_message(key, message, mode)  # Output: 'This is Harshil Darji from Dharmaj.'\n```\n\n### Implementation:\n```python\nLETTERS = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 .,!?\"\n\ndef encrypt_message(key: str, message: str) -> str:\n    return translate_message(key, message, \"encrypt\")\n\ndef decrypt_message(key: str, message: str) -> str:\n    return translate_message(key, message, \"decrypt\")\n\ndef translate_message(key: str, message: str, mode: str) -> str:\n    # Your implementation here\n```\n\n### Submission:\n- Ensure your implementation is efficient and handles all specified requirements and examples correctly."}], "metadata": {"prompt_id": "00000027", "row_id": 27, "seed_ids": [63], "mode": "algorithm", "instruction": "### Context:\nYou are tasked with enhancing a Vigen\u00e8re Cipher implementation to support both encryption and decryption. Your goal is to handle a larger set of characters, including spaces and punctuation, and to ensure the function is robust against edge cases.\n\n### Problem Statement:\nImplement the `encrypt_message` and `decrypt_message` functions to correctly handle a message that may contain uppercase and lowercase letters, spaces, and punctuation marks as defined in the `LETTERS` string. Your implementation should maintain the case of the original message and should correctly handle the keyword wrapping for each character.\n\n### Requirements:\n- **Input**:\n  - `key`: A string representing the encryption/decryption key.\n  - `message`: A string representing the message to be encrypted or decrypted.\n  - `mode`: A string that is either `\"encrypt\"` or `\"decrypt\"`.\n\n- **Output**:\n  - Return the translated message as a string.\n\n- **Constraints**:\n  - The key can consist of any alphanumeric characters.\n  - The message can contain uppercase and lowercase letters, spaces, and punctuation marks.\n  - The `LETTERS` string includes all uppercase and lowercase English letters, as well as digits.\n\n### Example:\n```python\n# Example 1: Encryption\nkey = 'HDarji'\nmessage = 'This is Harshil Darji from Dharmaj.'\nmode = 'encrypt'\ntranslate_message(key, message, mode)  # Output: 'Akij ra Odrjqqs Gaisq muod Mphumrs.'\n\n# Example 2: Decryption\nkey = 'HDarji'\nmessage = 'Akij ra Odrjqqs Gaisq muod Mphumrs.'\nmode = 'decrypt'\ntranslate_message(key, message, mode)  # Output: 'This is Harshil Darji from Dharmaj.'\n```\n\n### Implementation:\n```python\nLETTERS = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 .,!?\"\n\ndef encrypt_message(key: str, message: str) -> str:\n    return translate_message(key, message, \"encrypt\")\n\ndef decrypt_message(key: str, message: str) -> str:\n    return translate_message(key, message, \"decrypt\")\n\ndef translate_message(key: str, message: str, mode: str) -> str:\n    # Your implementation here\n```\n\n### Submission:\n- Ensure your implementation is efficient and handles all specified requirements and examples correctly."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Question\n\nYou are working on a project to predict the `Rating` of players based on their `ADR` (Average Damage Per Round) in a multiplayer game. You have collected the data and want to use linear regression to model the relationship between `ADR` and `Rating`.\n\n**Task**:\nImplement the `run_linear_regression` function to perform linear regression on the provided dataset. Additionally, enhance the model by implementing `L2 regularization` to prevent overfitting.\n\n**Input**:\n- `data_x`: A matrix of shape `(n_samples, n_features + 1)` where each row represents a sample and the first column is a bias term.\n- `data_y`: A vector of shape `(n_samples,)` containing the corresponding target values.\n\n**Output**:\n- `theta`: A vector of shape `(1, n_features + 1)` representing the feature vector of the line of best fit.\n\n**Constraints**:\n- The learning rate `alpha` should be `0.0001550`.\n- The number of iterations should be `100000`.\n- Regularization parameter `lambda` should be `0.01`.\n\n**Performance Requirement**:\n- The implementation should be efficient and avoid overfitting.\n\n**Helper Functions**:\n- `run_steep_gradient_descent`: Performs a single step of gradient descent.\n- `sum_of_square_error`: Computes the sum of square error.\n- `mean_absolute_error`: Computes the mean absolute error.\n\n**Note**:\n- Ensure that your implementation is self-contained and does not reference the provided code snippet directly.\n- Test your implementation using the provided dataset.\n\n### Example\n\n```python\ndata_x = np.array([[1, 50], [1, 70], [1, 90], [1, 110]])\ndata_y = np.array([4, 5, 6, 7])\ntheta = run_linear_regression(data_x, data_y)\nprint(theta)  # Should print approximately [4.0, 0.01]\n```\n\n### Scoring\n\n- **Correct Implementation**: 70 points.\n- **Efficient Implementation (Regularization)**: 30 points."}], "metadata": {"prompt_id": "00000028", "row_id": 28, "seed_ids": [112], "mode": "algorithm", "instruction": "### Question\n\nYou are working on a project to predict the `Rating` of players based on their `ADR` (Average Damage Per Round) in a multiplayer game. You have collected the data and want to use linear regression to model the relationship between `ADR` and `Rating`.\n\n**Task**:\nImplement the `run_linear_regression` function to perform linear regression on the provided dataset. Additionally, enhance the model by implementing `L2 regularization` to prevent overfitting.\n\n**Input**:\n- `data_x`: A matrix of shape `(n_samples, n_features + 1)` where each row represents a sample and the first column is a bias term.\n- `data_y`: A vector of shape `(n_samples,)` containing the corresponding target values.\n\n**Output**:\n- `theta`: A vector of shape `(1, n_features + 1)` representing the feature vector of the line of best fit.\n\n**Constraints**:\n- The learning rate `alpha` should be `0.0001550`.\n- The number of iterations should be `100000`.\n- Regularization parameter `lambda` should be `0.01`.\n\n**Performance Requirement**:\n- The implementation should be efficient and avoid overfitting.\n\n**Helper Functions**:\n- `run_steep_gradient_descent`: Performs a single step of gradient descent.\n- `sum_of_square_error`: Computes the sum of square error.\n- `mean_absolute_error`: Computes the mean absolute error.\n\n**Note**:\n- Ensure that your implementation is self-contained and does not reference the provided code snippet directly.\n- Test your implementation using the provided dataset.\n\n### Example\n\n```python\ndata_x = np.array([[1, 50], [1, 70], [1, 90], [1, 110]])\ndata_y = np.array([4, 5, 6, 7])\ntheta = run_linear_regression(data_x, data_y)\nprint(theta)  # Should print approximately [4.0, 0.01]\n```\n\n### Scoring\n\n- **Correct Implementation**: 70 points.\n- **Efficient Implementation (Regularization)**: 30 points."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:Given a prime number \\( p \\), determine if there exists a positive integer \\( n \\) such that \\( n^3 + n^2p \\) is a perfect cube. Your task is to write a function that counts the number of prime numbers below a given limit that satisfy this property.\n\n### Examples\n\n```python\ndef check_primes_with_property(limit: int) -> int:\n    \"\"\"\n    >>> check_primes_with_property(100)\n    4\n    >>> check_primes_with_property(1000)\n    10\n    >>> check_primes_with_property(10000)\n    12\n    >>> check_primes_with_property(100000)\n    13\n    >>> check_primes_with_property(1000000)\n    15\n    \"\"\"\n```\n\n### Constraints\n- \\( 1 \\leq \\text{limit} \\leq 10^6 \\)\n- The solution should be efficient and run within a reasonable time for the given constraints.\n\n### Implementation\n\n1. **Prime Checking Function**: Write a helper function to check if a number is prime.\n2. **Prime Generation and Property Checking**: Write the main function to generate primes below the given limit and check if they satisfy the property.\n3. **Efficiency Considerations**: Ensure the solution is efficient by optimizing the prime-checking process and the loop termination condition.\n\n### Follow-up\n\n- Explain why the provided solution in the code snippet is not the most efficient approach for very large limits.\n- Suggest potential optimizations to improve the performance of your solution."}], "metadata": {"prompt_id": "00000029", "row_id": 29, "seed_ids": [492], "mode": "algorithm", "instruction": "Given a prime number \\( p \\), determine if there exists a positive integer \\( n \\) such that \\( n^3 + n^2p \\) is a perfect cube. Your task is to write a function that counts the number of prime numbers below a given limit that satisfy this property.\n\n### Examples\n\n```python\ndef check_primes_with_property(limit: int) -> int:\n    \"\"\"\n    >>> check_primes_with_property(100)\n    4\n    >>> check_primes_with_property(1000)\n    10\n    >>> check_primes_with_property(10000)\n    12\n    >>> check_primes_with_property(100000)\n    13\n    >>> check_primes_with_property(1000000)\n    15\n    \"\"\"\n```\n\n### Constraints\n- \\( 1 \\leq \\text{limit} \\leq 10^6 \\)\n- The solution should be efficient and run within a reasonable time for the given constraints.\n\n### Implementation\n\n1. **Prime Checking Function**: Write a helper function to check if a number is prime.\n2. **Prime Generation and Property Checking**: Write the main function to generate primes below the given limit and check if they satisfy the property.\n3. **Efficiency Considerations**: Ensure the solution is efficient by optimizing the prime-checking process and the loop termination condition.\n\n### Follow-up\n\n- Explain why the provided solution in the code snippet is not the most efficient approach for very large limits.\n- Suggest potential optimizations to improve the performance of your solution."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are given a dataset from the Iris flower classification problem. Implement a logistic regression model to classify the Iris setosa from the Iris versicolor. Use the provided `sigmoid_function` and `cost_function` implementations as a starting point, and implement the logistic regression algorithm without using any external libraries for optimization (e.g., gradient descent).\n\nThe goal is to predict the probability of an Iris flower being in the setosa class based on the sepal length and sepal width.\n\n**Input Format**:\n- A CSV file named `iris.csv` with the following columns: `sepal_length`, `sepal_width`, `class`.\n\n**Output Format**:\n- Print the weights (theta) after training the model.\n- Plot a contour plot showing the decision boundary between setosa and non-setosa flowers.\n\n**Constraints**:\n- The dataset should be normalized before training.\n- Use a learning rate of 0.1 and a maximum of 10,000 iterations.\n\n**Performance Requirements**:\n- The model should converge within the maximum number of iterations.\n\n**Scenario or Context**:\nYou are working on a project to classify Iris flowers based on their sepal length and sepal width. You need to implement a logistic regression model from scratch to predict whether an Iris flower is of the setosa variety.\n\n```python\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\ndef sigmoid_function(z: float) -> float:\n    return 1 / (1 + np.exp(-z))\n\ndef cost_function(h: np.ndarray, y: np.ndarray) -> float:\n    return float((-y * np.log(h) - (1 - y) * np.log(1 - h)).mean())\n\ndef load_data(filepath: str) -> np.ndarray:\n    data = pd.read_csv(filepath)\n    y = data['class'].apply(lambda x: 1 if x == 'setosa' else 0).values\n    X = data[['sepal_length', 'sepal_width']].values\n    return X, y\n\ndef logistic_reg(alpha, x, y, max_iterations=10000):\n    # Implement the logistic regression algorithm here\n    # ...\n\nif __name__ == \"__main__\":\n    filepath = 'iris.csv'\n    X, y = load_data(filepath)\n    X = (X - X.mean()) / X.std()  # Normalize the data\n    alpha = 0.1\n    theta = logistic_reg(alpha, X, y, max_iterations=10000)\n    print(\"theta: \", theta)\n    # Plot the decision boundary\n    # ...\n```"}], "metadata": {"prompt_id": "00000030", "row_id": 30, "seed_ids": [97], "mode": "algorithm", "instruction": "You are given a dataset from the Iris flower classification problem. Implement a logistic regression model to classify the Iris setosa from the Iris versicolor. Use the provided `sigmoid_function` and `cost_function` implementations as a starting point, and implement the logistic regression algorithm without using any external libraries for optimization (e.g., gradient descent).\n\nThe goal is to predict the probability of an Iris flower being in the setosa class based on the sepal length and sepal width.\n\n**Input Format**:\n- A CSV file named `iris.csv` with the following columns: `sepal_length`, `sepal_width`, `class`.\n\n**Output Format**:\n- Print the weights (theta) after training the model.\n- Plot a contour plot showing the decision boundary between setosa and non-setosa flowers.\n\n**Constraints**:\n- The dataset should be normalized before training.\n- Use a learning rate of 0.1 and a maximum of 10,000 iterations.\n\n**Performance Requirements**:\n- The model should converge within the maximum number of iterations.\n\n**Scenario or Context**:\nYou are working on a project to classify Iris flowers based on their sepal length and sepal width. You need to implement a logistic regression model from scratch to predict whether an Iris flower is of the setosa variety.\n\n```python\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\ndef sigmoid_function(z: float) -> float:\n    return 1 / (1 + np.exp(-z))\n\ndef cost_function(h: np.ndarray, y: np.ndarray) -> float:\n    return float((-y * np.log(h) - (1 - y) * np.log(1 - h)).mean())\n\ndef load_data(filepath: str) -> np.ndarray:\n    data = pd.read_csv(filepath)\n    y = data['class'].apply(lambda x: 1 if x == 'setosa' else 0).values\n    X = data[['sepal_length', 'sepal_width']].values\n    return X, y\n\ndef logistic_reg(alpha, x, y, max_iterations=10000):\n    # Implement the logistic regression algorithm here\n    # ...\n\nif __name__ == \"__main__\":\n    filepath = 'iris.csv'\n    X, y = load_data(filepath)\n    X = (X - X.mean()) / X.std()  # Normalize the data\n    alpha = 0.1\n    theta = logistic_reg(alpha, X, y, max_iterations=10000)\n    print(\"theta: \", theta)\n    # Plot the decision boundary\n    # ...\n```"}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:Given a generating function defined by the polynomial:\n\n\\[ u(n) = 1 - n + n^2 - n^3 + n^4 - n^5 + n^6 - n^7 + n^8 - n^9 + n^{10} \\]\n\nWe want to find the sum of the first incorrect terms (FITs) for each interpolating polynomial of orders 1 through 10. For each interpolating polynomial of order \\( k \\), we find the first term \\( n \\) such that the predicted value does not match the actual value given by \\( u(n) \\). We then sum these FITs.\n\n#### Input\n- A positive integer \\( n \\) representing the order of the interpolating polynomial to consider.\n\n#### Output\n- An integer representing the sum of the FITs for the interpolating polynomials of orders 1 through 10.\n\n#### Constraints\n- \\( 1 \\leq n \\leq 10 \\)\n\n#### Performance Requirements\n- The solution should be efficient and handle the constraints within a reasonable time.\n\n### Example\n\n```python\ndef question_function(n: int) -> int:\n    return (\n        1\n        - n\n        + n**2\n        - n**3\n        + n**4\n        - n**5\n        + n**6\n        - n**7\n        + n**8\n        - n**9\n        + n**10\n    )\n\nprint(solution(question_function))  # Output: 98410\n```\n\n### Solution\n\nWrite a function `solution` that takes a generating function `func` and the order `order` as input and returns the sum of FITs for the interpolating polynomials of orders 1 through `order`."}], "metadata": {"prompt_id": "00000031", "row_id": 31, "seed_ids": [617], "mode": "algorithm", "instruction": "Given a generating function defined by the polynomial:\n\n\\[ u(n) = 1 - n + n^2 - n^3 + n^4 - n^5 + n^6 - n^7 + n^8 - n^9 + n^{10} \\]\n\nWe want to find the sum of the first incorrect terms (FITs) for each interpolating polynomial of orders 1 through 10. For each interpolating polynomial of order \\( k \\), we find the first term \\( n \\) such that the predicted value does not match the actual value given by \\( u(n) \\). We then sum these FITs.\n\n#### Input\n- A positive integer \\( n \\) representing the order of the interpolating polynomial to consider.\n\n#### Output\n- An integer representing the sum of the FITs for the interpolating polynomials of orders 1 through 10.\n\n#### Constraints\n- \\( 1 \\leq n \\leq 10 \\)\n\n#### Performance Requirements\n- The solution should be efficient and handle the constraints within a reasonable time.\n\n### Example\n\n```python\ndef question_function(n: int) -> int:\n    return (\n        1\n        - n\n        + n**2\n        - n**3\n        + n**4\n        - n**5\n        + n**6\n        - n**7\n        + n**8\n        - n**9\n        + n**10\n    )\n\nprint(solution(question_function))  # Output: 98410\n```\n\n### Solution\n\nWrite a function `solution` that takes a generating function `func` and the order `order` as input and returns the sum of FITs for the interpolating polynomials of orders 1 through `order`."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are tasked with solving the Collatz Conjecture problem to find the starting number, under a given limit, that produces the longest sequence. Given a positive integer \\( n \\), find the number under \\( n \\) that generates the longest sequence.\n\n**Input Format**:\n- The input will be a single positive integer \\( n \\) (\\( 2 \\leq n \\leq 1,000,000 \\)).\n\n**Output Format**:\n- Output the starting number under \\( n \\) that produces the longest sequence.\n\n**Performance Requirements**:\n- Your solution should efficiently handle the input within the given constraints.\n\n**Example**:\n```\nInput:\n1000000\n\nOutput:\n837799\n```\n\n**Explanation**:\nThe number 837799 under 1,000,000 produces the longest sequence as per the Collatz conjecture.\n\n**Note**:\n- Your solution should be optimized to handle the given constraints efficiently."}], "metadata": {"prompt_id": "00000032", "row_id": 32, "seed_ids": [537], "mode": "algorithm", "instruction": "You are tasked with solving the Collatz Conjecture problem to find the starting number, under a given limit, that produces the longest sequence. Given a positive integer \\( n \\), find the number under \\( n \\) that generates the longest sequence.\n\n**Input Format**:\n- The input will be a single positive integer \\( n \\) (\\( 2 \\leq n \\leq 1,000,000 \\)).\n\n**Output Format**:\n- Output the starting number under \\( n \\) that produces the longest sequence.\n\n**Performance Requirements**:\n- Your solution should efficiently handle the input within the given constraints.\n\n**Example**:\n```\nInput:\n1000000\n\nOutput:\n837799\n```\n\n**Explanation**:\nThe number 837799 under 1,000,000 produces the longest sequence as per the Collatz conjecture.\n\n**Note**:\n- Your solution should be optimized to handle the given constraints efficiently."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Scenario\n\nYou are working on a project to process audio signals and need to implement a 4th-order IIR filter. The filter will be used to remove noise from the signal. Your task is to complete the implementation of the `IIRFilter` class by adding the ability to process a sequence of audio samples and return the filtered output.\n\n### Requirements\n\n1. **Initialization**: The `IIRFilter` class should be initialized with the order of the filter.\n2. **Setting Coefficients**: The `set_coefficients` method should allow setting the coefficients for the filter.\n3. **Processing**: The `process` method should accept a list of audio samples and return a list of filtered samples.\n\n### Constraints\n\n- The order of the filter should be between 1 and 10.\n- The length of the input sample list should be between 1 and 1000.\n\n### Example\n\n```python\nfilt = IIRFilter(4)\nfilt.set_coefficients([1.0, -2.0, 1.0, -0.5, 0.25], [1.0, 0.5, 0.25, 0.125, 0.0625])\nfiltered_samples = filt.process([0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0])\nprint(filtered_samples)  # Expected output: a list of filtered samples\n```\n\n### Expected Output\n\nThe output should be a list of filtered samples, where each sample is the result of processing the corresponding input sample through the IIR filter.\n\n### Implementation\n\nComplete the `IIRFilter` class to meet the above requirements.\n\n```python\nfrom __future__ import annotations\n\nclass IIRFilter:\n    def __init__(self, order: int) -> None:\n        # Initialize the order and history\n        pass\n\n    def set_coefficients(self, a_coeffs: list[float], b_coeffs: list[float]) -> None:\n        # Set the filter coefficients\n        pass\n\n    def process(self, samples: list[float]) -> list[float]:\n        # Process the input samples and return the filtered output\n        pass\n```\n\n### Solution\n\n```python\nfrom typing import List\n\nclass IIRFilter:\n    def __init__(self, order: int) -> None:\n        self.order = order\n        self.a_coeffs = [1.0] + [0.0] * order\n        self.b_coeffs = [1.0] + [0.0] * order\n        self.input_history = [0.0] * self.order\n        self.output_history = [0.0] * self.order\n\n    def set_coefficients(self, a_coeffs: List[float], b_coeffs: List[float]) -> None:\n        if len(a_coeffs) < self.order:\n            a_coeffs = [1.0, *a_coeffs]\n\n        if len(a_coeffs) != self.order + 1:\n            raise ValueError(f\"Expected a_coeffs to have {self.order + 1} elements\")\n\n        if len(b_coeffs) != self.order + 1:\n            raise ValueError(f\"Expected b_coeffs to have {self.order + 1} elements\")\n\n        self.a_coeffs = a_coeffs\n        self.b_coeffs = b_coeffs\n\n    def process(self, samples: List[float]) -> List[float]:\n        filtered_output = []\n        for sample in samples:\n            result = 0.0\n            for i in range(1, self.order + 1):\n                result += (self.b_coeffs[i] * self.input_history[i - 1] - self.a_coeffs[i] * self.output_history[i - 1])\n\n            result = (result + self.b_coeffs[0] * sample) / self.a_coeffs[0]\n\n            self.input_history[1:] = self.input_history[:-1]\n            self.input_history[0] = sample\n            self.output_history[1:] = self.output_history[:-1]\n            self.output_history[0] = result\n\n            filtered_output.append(result)\n\n        return filtered_output\n```\n\n### Explanation\n\n- **Initialization**: The `__init__` method initializes the filter order and sets up the coefficient and history arrays.\n- **Setting Coefficients**: The `set_coefficients` method sets the filter coefficients and handles cases where the input coefficients are not of the correct length.\n- **Processing**: The `process` method processes a list of audio samples and returns the filtered output. It iterates over each sample, computes the filter output using the provided coefficients, and updates the history arrays."}], "metadata": {"prompt_id": "00000033", "row_id": 33, "seed_ids": [948], "mode": "algorithm", "instruction": "### Scenario\n\nYou are working on a project to process audio signals and need to implement a 4th-order IIR filter. The filter will be used to remove noise from the signal. Your task is to complete the implementation of the `IIRFilter` class by adding the ability to process a sequence of audio samples and return the filtered output.\n\n### Requirements\n\n1. **Initialization**: The `IIRFilter` class should be initialized with the order of the filter.\n2. **Setting Coefficients**: The `set_coefficients` method should allow setting the coefficients for the filter.\n3. **Processing**: The `process` method should accept a list of audio samples and return a list of filtered samples.\n\n### Constraints\n\n- The order of the filter should be between 1 and 10.\n- The length of the input sample list should be between 1 and 1000.\n\n### Example\n\n```python\nfilt = IIRFilter(4)\nfilt.set_coefficients([1.0, -2.0, 1.0, -0.5, 0.25], [1.0, 0.5, 0.25, 0.125, 0.0625])\nfiltered_samples = filt.process([0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0])\nprint(filtered_samples)  # Expected output: a list of filtered samples\n```\n\n### Expected Output\n\nThe output should be a list of filtered samples, where each sample is the result of processing the corresponding input sample through the IIR filter.\n\n### Implementation\n\nComplete the `IIRFilter` class to meet the above requirements.\n\n```python\nfrom __future__ import annotations\n\nclass IIRFilter:\n    def __init__(self, order: int) -> None:\n        # Initialize the order and history\n        pass\n\n    def set_coefficients(self, a_coeffs: list[float], b_coeffs: list[float]) -> None:\n        # Set the filter coefficients\n        pass\n\n    def process(self, samples: list[float]) -> list[float]:\n        # Process the input samples and return the filtered output\n        pass\n```\n\n### Solution\n\n```python\nfrom typing import List\n\nclass IIRFilter:\n    def __init__(self, order: int) -> None:\n        self.order = order\n        self.a_coeffs = [1.0] + [0.0] * order\n        self.b_coeffs = [1.0] + [0.0] * order\n        self.input_history = [0.0] * self.order\n        self.output_history = [0.0] * self.order\n\n    def set_coefficients(self, a_coeffs: List[float], b_coeffs: List[float]) -> None:\n        if len(a_coeffs) < self.order:\n            a_coeffs = [1.0, *a_coeffs]\n\n        if len(a_coeffs) != self.order + 1:\n            raise ValueError(f\"Expected a_coeffs to have {self.order + 1} elements\")\n\n        if len(b_coeffs) != self.order + 1:\n            raise ValueError(f\"Expected b_coeffs to have {self.order + 1} elements\")\n\n        self.a_coeffs = a_coeffs\n        self.b_coeffs = b_coeffs\n\n    def process(self, samples: List[float]) -> List[float]:\n        filtered_output = []\n        for sample in samples:\n            result = 0.0\n            for i in range(1, self.order + 1):\n                result += (self.b_coeffs[i] * self.input_history[i - 1] - self.a_coeffs[i] * self.output_history[i - 1])\n\n            result = (result + self.b_coeffs[0] * sample) / self.a_coeffs[0]\n\n            self.input_history[1:] = self.input_history[:-1]\n            self.input_history[0] = sample\n            self.output_history[1:] = self.output_history[:-1]\n            self.output_history[0] = result\n\n            filtered_output.append(result)\n\n        return filtered_output\n```\n\n### Explanation\n\n- **Initialization**: The `__init__` method initializes the filter order and sets up the coefficient and history arrays.\n- **Setting Coefficients**: The `set_coefficients` method sets the filter coefficients and handles cases where the input coefficients are not of the correct length.\n- **Processing**: The `process` method processes a list of audio samples and returns the filtered output. It iterates over each sample, computes the filter output using the provided coefficients, and updates the history arrays."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:Design a function `check_opposite_signs` that determines if two given integers have opposite signs using bitwise operations. The function should meet the following requirements:\n\n- **Input**: Two integers `num1` and `num2`.\n- **Output**: A boolean value `True` if the integers have opposite signs, and `False` otherwise.\n- **Constraints**:\n  - The function should use bitwise operations and not rely on arithmetic operations or conditional statements.\n  - The function should handle edge cases where the input integers are zero.\n- **Performance Requirement**: Ensure that the function runs in constant time \\(O(1)\\).\n\n**Example Usage**:\n```python\n>>> check_opposite_signs(1, -1)\nTrue\n>>> check_opposite_signs(100, 200)\nFalse\n>>> check_opposite_signs(-100, -200)\nFalse\n>>> check_opposite_signs(0, 1)\nTrue\n>>> check_opposite_signs(-1, 0)\nFalse\n```\n\n**Additional Note**: Your function should be self-contained and clear. Ensure that the function handles all edge cases as described."}], "metadata": {"prompt_id": "00000034", "row_id": 34, "seed_ids": [1073], "mode": "algorithm", "instruction": "Design a function `check_opposite_signs` that determines if two given integers have opposite signs using bitwise operations. The function should meet the following requirements:\n\n- **Input**: Two integers `num1` and `num2`.\n- **Output**: A boolean value `True` if the integers have opposite signs, and `False` otherwise.\n- **Constraints**:\n  - The function should use bitwise operations and not rely on arithmetic operations or conditional statements.\n  - The function should handle edge cases where the input integers are zero.\n- **Performance Requirement**: Ensure that the function runs in constant time \\(O(1)\\).\n\n**Example Usage**:\n```python\n>>> check_opposite_signs(1, -1)\nTrue\n>>> check_opposite_signs(100, 200)\nFalse\n>>> check_opposite_signs(-100, -200)\nFalse\n>>> check_opposite_signs(0, 1)\nTrue\n>>> check_opposite_signs(-1, 0)\nFalse\n```\n\n**Additional Note**: Your function should be self-contained and clear. Ensure that the function handles all edge cases as described."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:<|Analysis Begin|>\n\n### Core Identification\n**Algorithm/Data Structure**: Base32 Encoding and Decoding\n**Type**: Encoding/Decoding Algorithm\n**Main Purpose**: Encoding and Decoding binary data into a Base32 string representation and vice versa.\n\n### Characteristics & Applications\n**Properties**: \n- Base32 is a binary-to-text encoding scheme.\n- Each Base32 character represents 5 bits of data.\n- The encoding and decoding functions use a fixed character set: `ABCDEFGHIJKLMNOPQRSTUVWXYZ234567`.\n\n**Common Use Cases**: \n- Used in generating base32 URLs, email addresses, and other scenarios where binary data needs to be represented in a human-readable format.\n- Common in environment variables, security tokens, and other contexts where data integrity and readability are crucial.\n\n**Strengths/Limitations**: \n- **Strengths**: Base32 is easily readable and robust as it uses only uppercase letters and digits, reducing the chance of misinterpretation by humans.\n- **Limitations**: \n  - Padding is required for the final block, using '=' characters, which can be a minor overhead in certain applications.\n  - It is not as compact as base64 encoding, which means it may use more characters to represent the same amount of data.\n\n### Implementation Challenges\n**Edge Cases**: \n- Handling of non-printable characters in the input data.\n- Proper padding and unpadding in the decoders.\n- Ensuring the character set is correctly used for both encoding and decoding.\n\n**Performance Bottlenecks**: \n- String manipulations like zfill, join, and strip can be costly operations.\n- The decoding process involves converting characters back to binary, which can be slow if not optimized.\n\n**Error Scenarios**: \n- Incorrect padding can lead to decoding errors.\n- Invalid characters in the Base32 string can cause decoding to fail.\n\n**Optimization Points**: \n- Precomputing the binary to character and character to binary mappings can speed up the process.\n- Minimizing the use of string operations by preprocessing and postprocessing the data.\n\n<|Analysis End|>\n\n<|Question Begin|>\n\nYou are tasked with implementing a more efficient version of the Base32 encoding and decoding functions. The goal is to reduce the number of string manipulations and improve performance.\n\n**Requirements**:\n- Implement a more efficient `base32_encode` function that encodes a given binary string into a Base32 string without using the existing `base32_encode` function.\n- Implement a more efficient `base32_decode` function that decodes a Base32 string back into a binary string without using the existing `base32_decode` function.\n- The functions should handle padding correctly and ensure that the input and output formats are as specified.\n- The implementation should aim to reduce the number of string operations and improve overall performance.\n\n**Input and Output Formats**:\n- **base32_encode**: Takes a binary string (a sequence of 0s and 1s) and returns a Base32 encoded string.\n- **base32_decode**: Takes a Base32 encoded string and returns the original binary string.\n\n**Constraints**:\n- The input binary string length can be up to 1024 bits.\n- The input Base32 string can be up to 1024 characters long.\n\n**Performance Requirements**:\n- The encoding and decoding functions should be as efficient as possible.\n\n**Example**:\n```python\n# Example usage\nbinary_data = \"0100000101000101010001110100011101000001010001110100000101000001010100010101010101001101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010"}], "metadata": {"prompt_id": "00000035", "row_id": 35, "seed_ids": [76], "mode": "algorithm", "instruction": "<|Analysis Begin|>\n\n### Core Identification\n**Algorithm/Data Structure**: Base32 Encoding and Decoding\n**Type**: Encoding/Decoding Algorithm\n**Main Purpose**: Encoding and Decoding binary data into a Base32 string representation and vice versa.\n\n### Characteristics & Applications\n**Properties**: \n- Base32 is a binary-to-text encoding scheme.\n- Each Base32 character represents 5 bits of data.\n- The encoding and decoding functions use a fixed character set: `ABCDEFGHIJKLMNOPQRSTUVWXYZ234567`.\n\n**Common Use Cases**: \n- Used in generating base32 URLs, email addresses, and other scenarios where binary data needs to be represented in a human-readable format.\n- Common in environment variables, security tokens, and other contexts where data integrity and readability are crucial.\n\n**Strengths/Limitations**: \n- **Strengths**: Base32 is easily readable and robust as it uses only uppercase letters and digits, reducing the chance of misinterpretation by humans.\n- **Limitations**: \n  - Padding is required for the final block, using '=' characters, which can be a minor overhead in certain applications.\n  - It is not as compact as base64 encoding, which means it may use more characters to represent the same amount of data.\n\n### Implementation Challenges\n**Edge Cases**: \n- Handling of non-printable characters in the input data.\n- Proper padding and unpadding in the decoders.\n- Ensuring the character set is correctly used for both encoding and decoding.\n\n**Performance Bottlenecks**: \n- String manipulations like zfill, join, and strip can be costly operations.\n- The decoding process involves converting characters back to binary, which can be slow if not optimized.\n\n**Error Scenarios**: \n- Incorrect padding can lead to decoding errors.\n- Invalid characters in the Base32 string can cause decoding to fail.\n\n**Optimization Points**: \n- Precomputing the binary to character and character to binary mappings can speed up the process.\n- Minimizing the use of string operations by preprocessing and postprocessing the data.\n\n<|Analysis End|>\n\n<|Question Begin|>\n\nYou are tasked with implementing a more efficient version of the Base32 encoding and decoding functions. The goal is to reduce the number of string manipulations and improve performance.\n\n**Requirements**:\n- Implement a more efficient `base32_encode` function that encodes a given binary string into a Base32 string without using the existing `base32_encode` function.\n- Implement a more efficient `base32_decode` function that decodes a Base32 string back into a binary string without using the existing `base32_decode` function.\n- The functions should handle padding correctly and ensure that the input and output formats are as specified.\n- The implementation should aim to reduce the number of string operations and improve overall performance.\n\n**Input and Output Formats**:\n- **base32_encode**: Takes a binary string (a sequence of 0s and 1s) and returns a Base32 encoded string.\n- **base32_decode**: Takes a Base32 encoded string and returns the original binary string.\n\n**Constraints**:\n- The input binary string length can be up to 1024 bits.\n- The input Base32 string can be up to 1024 characters long.\n\n**Performance Requirements**:\n- The encoding and decoding functions should be as efficient as possible.\n\n**Example**:\n```python\n# Example usage\nbinary_data = \"0100000101000101010001110100011101000001010001110100000101000001010100010101010101001101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010"}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:<|Analysis Begin|>\n\n### Core Identification\n\n**Algorithm/Data Structure**: Ant Colony Optimization (ACO) Algorithm for the Traveling Salesman Problem (TSP).\n\n**Complexity**:\n- **Time Complexity**: The main complexity comes from the loops over the number of ants and iterations. The overall complexity is approximately \\(O(\\text{ants\\_num} \\times \\text{iterations\\_num} \\times \\text{cities\\_num}^2)\\).\n- **Space Complexity**: \\(O(\\text{cities\\_num}^2)\\) for the pheromone matrix and \\(O(\\text{ants\\_num} \\times \\text{cities\\_num})\\) for storing the routes of ants.\n\n**Principles**:\n- The algorithm simulates the behavior of ants finding the shortest path between cities. It uses pheromones to guide the search, where pheromone levels increase for shorter paths and decrease over time.\n\n### Characteristics & Applications\n\n**Properties**:\n- **Stochastic**: The solution is probabilistic as it relies on random selections.\n- **Self-organizing**: Pheromone trails guide the search, allowing dynamic adjustment of the solution.\n- **Heuristic-based**: It uses heuristic information (distance) to guide the search process.\n\n**Common Use Cases**:\n- **Optimization**: Particularly useful in solving optimization problems like TSP where the goal is to find the shortest possible route.\n- **Real-world applications**: In logistics, planning, and resource allocation.\n\n**Strengths/Limitations**:\n- **Strengths**: Robust to local optima, can handle large problem sizes, and provides a good initial solution.\n- **Limitations**: Computationally intensive, may not always converge to the exact optimal solution, and sensitive to parameters like alpha and beta.\n\n### Implementation Challenges\n\n**Edge Cases**:\n- **Empty City List**: The algorithm should handle cases where the city list is empty.\n- **Single City**: The algorithm should handle the case where there is only one city.\n\n**Performance Bottlenecks**:\n- **Large Cities**: The algorithm's performance can degrade for a very large number of cities due to the \\(O(\\text{cities\\_num}^2)\\) space complexity.\n- **Parameter Tuning**: Proper tuning of parameters like alpha, beta, and q is critical for the algorithm's performance.\n\n**Error Scenarios**:\n- **Index Out of Range**: Ensure that indices are within the bounds of the city and pheromone matrices.\n- **Division by Zero**: Ensure that division by zero does not occur in the probability calculations.\n\n**Optimization Points**:\n- **Parallelization**: The algorithm can be parallelized to speed up the computation for large numbers of cities.\n- **Evaporation Rate**: Adjust the pheromone evaporation rate to balance exploration and exploitation.\n- **Pheromone Initialization**: Better initialization of pheromone values can improve the initial solution quality.\n\n<|Analysis End|>\n\n<|Question Begin|>\n\n### Problem Description\n\nYou are tasked with implementing an Ant Colony Optimization (ACO) algorithm to solve the Traveling Salesman Problem (TSP). Given a list of cities along with the distances between each pair of cities, your goal is to find the shortest possible route that visits each city exactly once and returns to the origin city.\n\n### Requirements\n\n- Implement the `main` function that takes the city coordinates, the number of ants, the number of iterations, pheromone evaporation rate, alpha, beta, and q, and returns the best path and the total distance.\n- Ensure that the function handles edge cases such as empty city lists and single cities.\n- The input and output formats are as described in the provided code snippet.\n- The function should be efficient and handle large numbers of cities.\n\n### Constraints\n\n- \\(1 \\leq \\text{cities\\_num} \\leq 100\\)\n- \\(1 \\leq \\text{ants\\_num} \\leq 100\\)\n- \\(1 \\leq \\text{iterations\\_num} \\leq 100\\)\n- \\(0 \\leq \\text{pheromone\\_evaporation} < 1\\)\n- \\(1 \\leq \\alpha, \\beta, q \\leq 100\\)\n\n### Example\n\n```python\ncities = {\n    0: [0, 0],\n    1: [0, 5],\n    2: [3, 8],\n    3: [8, 10],\n    4: [12,"}], "metadata": {"prompt_id": "00000036", "row_id": 36, "seed_ids": [1034], "mode": "algorithm", "instruction": "<|Analysis Begin|>\n\n### Core Identification\n\n**Algorithm/Data Structure**: Ant Colony Optimization (ACO) Algorithm for the Traveling Salesman Problem (TSP).\n\n**Complexity**:\n- **Time Complexity**: The main complexity comes from the loops over the number of ants and iterations. The overall complexity is approximately \\(O(\\text{ants\\_num} \\times \\text{iterations\\_num} \\times \\text{cities\\_num}^2)\\).\n- **Space Complexity**: \\(O(\\text{cities\\_num}^2)\\) for the pheromone matrix and \\(O(\\text{ants\\_num} \\times \\text{cities\\_num})\\) for storing the routes of ants.\n\n**Principles**:\n- The algorithm simulates the behavior of ants finding the shortest path between cities. It uses pheromones to guide the search, where pheromone levels increase for shorter paths and decrease over time.\n\n### Characteristics & Applications\n\n**Properties**:\n- **Stochastic**: The solution is probabilistic as it relies on random selections.\n- **Self-organizing**: Pheromone trails guide the search, allowing dynamic adjustment of the solution.\n- **Heuristic-based**: It uses heuristic information (distance) to guide the search process.\n\n**Common Use Cases**:\n- **Optimization**: Particularly useful in solving optimization problems like TSP where the goal is to find the shortest possible route.\n- **Real-world applications**: In logistics, planning, and resource allocation.\n\n**Strengths/Limitations**:\n- **Strengths**: Robust to local optima, can handle large problem sizes, and provides a good initial solution.\n- **Limitations**: Computationally intensive, may not always converge to the exact optimal solution, and sensitive to parameters like alpha and beta.\n\n### Implementation Challenges\n\n**Edge Cases**:\n- **Empty City List**: The algorithm should handle cases where the city list is empty.\n- **Single City**: The algorithm should handle the case where there is only one city.\n\n**Performance Bottlenecks**:\n- **Large Cities**: The algorithm's performance can degrade for a very large number of cities due to the \\(O(\\text{cities\\_num}^2)\\) space complexity.\n- **Parameter Tuning**: Proper tuning of parameters like alpha, beta, and q is critical for the algorithm's performance.\n\n**Error Scenarios**:\n- **Index Out of Range**: Ensure that indices are within the bounds of the city and pheromone matrices.\n- **Division by Zero**: Ensure that division by zero does not occur in the probability calculations.\n\n**Optimization Points**:\n- **Parallelization**: The algorithm can be parallelized to speed up the computation for large numbers of cities.\n- **Evaporation Rate**: Adjust the pheromone evaporation rate to balance exploration and exploitation.\n- **Pheromone Initialization**: Better initialization of pheromone values can improve the initial solution quality.\n\n<|Analysis End|>\n\n<|Question Begin|>\n\n### Problem Description\n\nYou are tasked with implementing an Ant Colony Optimization (ACO) algorithm to solve the Traveling Salesman Problem (TSP). Given a list of cities along with the distances between each pair of cities, your goal is to find the shortest possible route that visits each city exactly once and returns to the origin city.\n\n### Requirements\n\n- Implement the `main` function that takes the city coordinates, the number of ants, the number of iterations, pheromone evaporation rate, alpha, beta, and q, and returns the best path and the total distance.\n- Ensure that the function handles edge cases such as empty city lists and single cities.\n- The input and output formats are as described in the provided code snippet.\n- The function should be efficient and handle large numbers of cities.\n\n### Constraints\n\n- \\(1 \\leq \\text{cities\\_num} \\leq 100\\)\n- \\(1 \\leq \\text{ants\\_num} \\leq 100\\)\n- \\(1 \\leq \\text{iterations\\_num} \\leq 100\\)\n- \\(0 \\leq \\text{pheromone\\_evaporation} < 1\\)\n- \\(1 \\leq \\alpha, \\beta, q \\leq 100\\)\n\n### Example\n\n```python\ncities = {\n    0: [0, 0],\n    1: [0, 5],\n    2: [3, 8],\n    3: [8, 10],\n    4: [12,"}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:Given the integer partition problem, where \\( p(n) \\) represents the number of different ways \\( n \\) coins can be separated into piles, implement a more optimized solution to find the least value of \\( n \\) for which \\( p(n) \\) is divisible by one million.\n\n**Scenario**:\nYou are required to implement an optimized version of the integer partition algorithm to handle larger values of \\( n \\) more efficiently.\n\n**Input**:\n- A single integer \\( n \\) (1 \u2264 \\( n \\) \u2264 10^6).\n\n**Output**:\n- Return the smallest integer \\( n \\) such that \\( p(n) \\) is divisible by one million.\n\n**Constraints**:\n- \\( 1 \\leq n \\leq 10^6 \\)\n\n**Performance Requirement**:\n- The solution should be efficient and able to handle values up to \\( n = 10^6 \\) within a reasonable time.\n\n**Implementation Challenges**:\n- Consider how to handle large values of \\( n \\) efficiently.\n- Ensure that intermediate results are cached to avoid redundant calculations.\n\n```python\ndef optimized_partition(n: int) -> int:\n    \"\"\"\n    >>> optimized_partition(1)\n    1\n\n    >>> optimized_partition(9)\n    14\n\n    >>> optimized_partition(1000000)\n    55374\n    \"\"\"\n    # Your optimized solution goes here\n```"}], "metadata": {"prompt_id": "00000037", "row_id": 37, "seed_ids": [526], "mode": "algorithm", "instruction": "Given the integer partition problem, where \\( p(n) \\) represents the number of different ways \\( n \\) coins can be separated into piles, implement a more optimized solution to find the least value of \\( n \\) for which \\( p(n) \\) is divisible by one million.\n\n**Scenario**:\nYou are required to implement an optimized version of the integer partition algorithm to handle larger values of \\( n \\) more efficiently.\n\n**Input**:\n- A single integer \\( n \\) (1 \u2264 \\( n \\) \u2264 10^6).\n\n**Output**:\n- Return the smallest integer \\( n \\) such that \\( p(n) \\) is divisible by one million.\n\n**Constraints**:\n- \\( 1 \\leq n \\leq 10^6 \\)\n\n**Performance Requirement**:\n- The solution should be efficient and able to handle values up to \\( n = 10^6 \\) within a reasonable time.\n\n**Implementation Challenges**:\n- Consider how to handle large values of \\( n \\) efficiently.\n- Ensure that intermediate results are cached to avoid redundant calculations.\n\n```python\ndef optimized_partition(n: int) -> int:\n    \"\"\"\n    >>> optimized_partition(1)\n    1\n\n    >>> optimized_partition(9)\n    14\n\n    >>> optimized_partition(1000000)\n    55374\n    \"\"\"\n    # Your optimized solution goes here\n```"}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:**Problem Statement**:\nYou are given a sequence of integers. Your task is to implement a function to generate all possible subsequences of the given sequence using a backtracking algorithm. The function should print each subsequence in a separate line.\n\n**Input**:\n- A non-empty list of integers, `sequence`, where the length of the list is between 1 and 10 (inclusive).\n\n**Output**:\n- Print all possible subsequences of the given sequence, each on a new line. Ensure that the subsequences are printed in lexicographical order.\n\n**Example**:\n```python\nsequence = [1, 2, 3]\nOutput:\n[]\n[1]\n[1, 2]\n[1, 2, 3]\n[1, 3]\n[2]\n[2, 3]\n[3]\n```\n\n**Constraints**:\n- The length of `sequence` is between 1 and 10.\n- The elements in `sequence` are integers between 1 and 100.\n\n**Performance Requirement**:\n- Your solution should run efficiently for sequences of length up to 10.\n\n**Implementation**:\nImplement the function to generate and print all possible subsequences of the given sequence.\n\n```python\ndef generate_all_subsequences(sequence: List[int]) -> None:\n    \"\"\"\n    Generates and prints all possible subsequences of the given sequence using a backtracking algorithm.\n    \n    :param sequence: A list of integers.\n    \"\"\"\n    # Your implementation here\n```"}], "metadata": {"prompt_id": "00000038", "row_id": 38, "seed_ids": [167], "mode": "algorithm", "instruction": "**Problem Statement**:\nYou are given a sequence of integers. Your task is to implement a function to generate all possible subsequences of the given sequence using a backtracking algorithm. The function should print each subsequence in a separate line.\n\n**Input**:\n- A non-empty list of integers, `sequence`, where the length of the list is between 1 and 10 (inclusive).\n\n**Output**:\n- Print all possible subsequences of the given sequence, each on a new line. Ensure that the subsequences are printed in lexicographical order.\n\n**Example**:\n```python\nsequence = [1, 2, 3]\nOutput:\n[]\n[1]\n[1, 2]\n[1, 2, 3]\n[1, 3]\n[2]\n[2, 3]\n[3]\n```\n\n**Constraints**:\n- The length of `sequence` is between 1 and 10.\n- The elements in `sequence` are integers between 1 and 100.\n\n**Performance Requirement**:\n- Your solution should run efficiently for sequences of length up to 10.\n\n**Implementation**:\nImplement the function to generate and print all possible subsequences of the given sequence.\n\n```python\ndef generate_all_subsequences(sequence: List[int]) -> None:\n    \"\"\"\n    Generates and prints all possible subsequences of the given sequence using a backtracking algorithm.\n    \n    :param sequence: A list of integers.\n    \"\"\"\n    # Your implementation here\n```"}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are given a Python function to check if a number is a perfect cube using binary search. Your task is to enhance the functionality to find the cube root of a given number if it is a perfect cube. If the number is not a perfect cube, return `None`.\n\n### Requirements\n- The function should accept an integer and return an integer if the input is a perfect cube, otherwise return `None`.\n- Handle edge cases such as negative numbers and non-integer inputs.\n- Ensure that the function is efficient and works well for large numbers.\n\n### Example\n```python\ndef cube_root(n: int) -> int:\n    if not isinstance(n, int):\n        raise TypeError(\"cube_root() only accepts integers\")\n    if n < 0:\n        n = -n\n    left = 0\n    right = n\n    while left <= right:\n        mid = left + (right - left) // 2\n        if mid * mid * mid == n:\n            return mid\n        elif mid * mid * mid < n:\n            left = mid + 1\n        else:\n            right = mid - 1\n    return None\n\n# Test cases\nassert cube_root(27) == 3\nassert cube_root(64) == 4\nassert cube_root(125) == 5\nassert cube_root(28) is None\nassert cube_root(\"a\")  # Expected to raise TypeError\n```\n\n### Constraints\n- The input number `n` is an integer.\n- The solution should be efficient and have a time complexity of O(log n).\n\n### Performance Requirements\n- The function should handle numbers up to \\(10^9\\) efficiently.\n\n### Context\nYou are designing a function to process large datasets where checking for perfect cubes and finding their cube roots is necessary. The function should be robust and handle edge cases gracefully."}], "metadata": {"prompt_id": "00000039", "row_id": 39, "seed_ids": [729], "mode": "algorithm", "instruction": "You are given a Python function to check if a number is a perfect cube using binary search. Your task is to enhance the functionality to find the cube root of a given number if it is a perfect cube. If the number is not a perfect cube, return `None`.\n\n### Requirements\n- The function should accept an integer and return an integer if the input is a perfect cube, otherwise return `None`.\n- Handle edge cases such as negative numbers and non-integer inputs.\n- Ensure that the function is efficient and works well for large numbers.\n\n### Example\n```python\ndef cube_root(n: int) -> int:\n    if not isinstance(n, int):\n        raise TypeError(\"cube_root() only accepts integers\")\n    if n < 0:\n        n = -n\n    left = 0\n    right = n\n    while left <= right:\n        mid = left + (right - left) // 2\n        if mid * mid * mid == n:\n            return mid\n        elif mid * mid * mid < n:\n            left = mid + 1\n        else:\n            right = mid - 1\n    return None\n\n# Test cases\nassert cube_root(27) == 3\nassert cube_root(64) == 4\nassert cube_root(125) == 5\nassert cube_root(28) is None\nassert cube_root(\"a\")  # Expected to raise TypeError\n```\n\n### Constraints\n- The input number `n` is an integer.\n- The solution should be efficient and have a time complexity of O(log n).\n\n### Performance Requirements\n- The function should handle numbers up to \\(10^9\\) efficiently.\n\n### Context\nYou are designing a function to process large datasets where checking for perfect cubes and finding their cube roots is necessary. The function should be robust and handle edge cases gracefully."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:**Scenario**: You are working on a network analysis project where you need to manage a group of network nodes and their connections. The network nodes can form various clusters, and you need to efficiently manage these clusters using a disjoint set data structure.\n\n**Task**: Implement a function `analyze_network_connections` that takes a list of network nodes and their connections and returns the number of unique clusters in the network. Each node is represented by an integer, and each connection is a tuple of two integers representing nodes that are connected.\n\n**Function Signature**: \n```python\ndef analyze_network_connections(connections: List[Tuple[int, int]]) -> int:\n    pass\n```\n\n**Input**:\n- `connections` (1 <= len(connections) <= 10^5): A list of tuples, where each tuple (u, v) represents a connection between nodes u and v.\n\n**Output**:\n- An integer representing the number of unique clusters in the network.\n\n**Constraints**:\n- Each node can appear in multiple connections.\n- The nodes are 0-indexed and range from 0 to 10^4.\n\n**Performance Requirement**:\n- The function should be efficient and able to handle the maximum input size in a reasonable amount of time.\n\n**Example**:\n```python\nconnections = [(0, 1), (1, 2), (3, 4), (4, 5), (2, 6)]\nassert analyze_network_connections(connections) == 3\n```\n\n**Explanation**:\n- Initially, there are 7 nodes.\n- After processing the connections, the network will have 3 unique clusters: {0, 1, 2, 6}, {3, 4, 5}, and {7}.\n\n**Additional Information**:\n- You can assume the disjoint set data structure will be provided as a module or class with the necessary methods (`merge` and `get_parent`)."}], "metadata": {"prompt_id": "00000040", "row_id": 40, "seed_ids": [318], "mode": "algorithm", "instruction": "**Scenario**: You are working on a network analysis project where you need to manage a group of network nodes and their connections. The network nodes can form various clusters, and you need to efficiently manage these clusters using a disjoint set data structure.\n\n**Task**: Implement a function `analyze_network_connections` that takes a list of network nodes and their connections and returns the number of unique clusters in the network. Each node is represented by an integer, and each connection is a tuple of two integers representing nodes that are connected.\n\n**Function Signature**: \n```python\ndef analyze_network_connections(connections: List[Tuple[int, int]]) -> int:\n    pass\n```\n\n**Input**:\n- `connections` (1 <= len(connections) <= 10^5): A list of tuples, where each tuple (u, v) represents a connection between nodes u and v.\n\n**Output**:\n- An integer representing the number of unique clusters in the network.\n\n**Constraints**:\n- Each node can appear in multiple connections.\n- The nodes are 0-indexed and range from 0 to 10^4.\n\n**Performance Requirement**:\n- The function should be efficient and able to handle the maximum input size in a reasonable amount of time.\n\n**Example**:\n```python\nconnections = [(0, 1), (1, 2), (3, 4), (4, 5), (2, 6)]\nassert analyze_network_connections(connections) == 3\n```\n\n**Explanation**:\n- Initially, there are 7 nodes.\n- After processing the connections, the network will have 3 unique clusters: {0, 1, 2, 6}, {3, 4, 5}, and {7}.\n\n**Additional Information**:\n- You can assume the disjoint set data structure will be provided as a module or class with the necessary methods (`merge` and `get_parent`)."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are given a list of integers and are required to implement a quick sort algorithm. The provided code uses a simple random pivot selection and does not handle in-place sorting. Your task is to enhance the given implementation to achieve the following:\n\n1. Implement quick sort as an in-place sorting algorithm.\n2. Handle edge cases such as empty lists, single-element lists, and nearly sorted lists.\n3. Improve the pivot selection strategy to avoid worst-case performance.\n\n#### Function Signature\n\n```python\ndef quick_sort_in_place(arr: list) -> None:\n    \"\"\"\n    Sorts the given list arr in-place using the quick sort algorithm.\n\n    :param arr: A list of integers to be sorted.\n    \"\"\"\n```\n\n#### Constraints\n\n- \\(1 \\leq len(arr) \\leq 10^5\\)\n- Elements of `arr` are integers in the range \\([-10^3, 10^3]\\)\n\n#### Example\n\n```python\narr = [10, 5, 2, 3, 7, 6, 8, 4, 9, 1]\nquick_sort_in_place(arr)\nprint(arr)  # Output: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n```\n\n### Notes\n\n- You should modify the provided `quick_sort` function to work in-place.\n- Ensure that the function can handle edge cases such as already sorted or nearly sorted arrays.\n- Use a more sophisticated pivot selection strategy, such as the \"median-of-three\" pivot to improve performance.\n\n#### Performance Requirements\n\n- The algorithm should achieve an average-case time complexity of \\(O(n \\log n)\\)."}], "metadata": {"prompt_id": "00000041", "row_id": 41, "seed_ids": [233], "mode": "algorithm", "instruction": "You are given a list of integers and are required to implement a quick sort algorithm. The provided code uses a simple random pivot selection and does not handle in-place sorting. Your task is to enhance the given implementation to achieve the following:\n\n1. Implement quick sort as an in-place sorting algorithm.\n2. Handle edge cases such as empty lists, single-element lists, and nearly sorted lists.\n3. Improve the pivot selection strategy to avoid worst-case performance.\n\n#### Function Signature\n\n```python\ndef quick_sort_in_place(arr: list) -> None:\n    \"\"\"\n    Sorts the given list arr in-place using the quick sort algorithm.\n\n    :param arr: A list of integers to be sorted.\n    \"\"\"\n```\n\n#### Constraints\n\n- \\(1 \\leq len(arr) \\leq 10^5\\)\n- Elements of `arr` are integers in the range \\([-10^3, 10^3]\\)\n\n#### Example\n\n```python\narr = [10, 5, 2, 3, 7, 6, 8, 4, 9, 1]\nquick_sort_in_place(arr)\nprint(arr)  # Output: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n```\n\n### Notes\n\n- You should modify the provided `quick_sort` function to work in-place.\n- Ensure that the function can handle edge cases such as already sorted or nearly sorted arrays.\n- Use a more sophisticated pivot selection strategy, such as the \"median-of-three\" pivot to improve performance.\n\n#### Performance Requirements\n\n- The algorithm should achieve an average-case time complexity of \\(O(n \\log n)\\)."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:#### Problem Description\nGiven a positive integer `limit`, determine the number of Lychrel numbers below `limit`. A Lychrel number is defined as a number that does not form a palindrome through the reverse and add process within a given number of iterations. For this problem, consider a number to be a Lychrel number if it fails to form a palindrome within 50 iterations.\n\n#### Requirements\n- **Input**: A positive integer `limit` (1 \u2264 limit \u2264 100000).\n- **Output**: The count of Lychrel numbers below `limit`.\n- **Performance**: Your solution should handle the largest possible input efficiently.\n\n#### Example\n```python\nInput: limit = 10000\nOutput: 249\n```\n\n#### Constraints\n- The solution should be able to process inputs up to `limit = 100000`.\n- The solution should not rely on external libraries for palindrome checking.\n\n#### Implementation Steps\n1. Define a function `is_palindrome(n: int) -> bool` to check if a number is a palindrome.\n2. Define a function `sum_reverse(n: int) -> int` to return the sum of a number and its reverse.\n3. Implement a function `count_lychrel(limit: int) -> int` to count the number of Lychrel numbers below `limit`.\n\n#### Additional Notes\n- You can assume that no number below `limit` will exceed the maximum number of iterations (50).\n- Optimize your palindrome checking mechanism to handle large numbers efficiently.\n\n#### Submission\nProvide the complete implementation of the `count_lychrel` function."}], "metadata": {"prompt_id": "00000042", "row_id": 42, "seed_ids": [589], "mode": "algorithm", "instruction": "#### Problem Description\nGiven a positive integer `limit`, determine the number of Lychrel numbers below `limit`. A Lychrel number is defined as a number that does not form a palindrome through the reverse and add process within a given number of iterations. For this problem, consider a number to be a Lychrel number if it fails to form a palindrome within 50 iterations.\n\n#### Requirements\n- **Input**: A positive integer `limit` (1 \u2264 limit \u2264 100000).\n- **Output**: The count of Lychrel numbers below `limit`.\n- **Performance**: Your solution should handle the largest possible input efficiently.\n\n#### Example\n```python\nInput: limit = 10000\nOutput: 249\n```\n\n#### Constraints\n- The solution should be able to process inputs up to `limit = 100000`.\n- The solution should not rely on external libraries for palindrome checking.\n\n#### Implementation Steps\n1. Define a function `is_palindrome(n: int) -> bool` to check if a number is a palindrome.\n2. Define a function `sum_reverse(n: int) -> int` to return the sum of a number and its reverse.\n3. Implement a function `count_lychrel(limit: int) -> int` to count the number of Lychrel numbers below `limit`.\n\n#### Additional Notes\n- You can assume that no number below `limit` will exceed the maximum number of iterations (50).\n- Optimize your palindrome checking mechanism to handle large numbers efficiently.\n\n#### Submission\nProvide the complete implementation of the `count_lychrel` function."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:**Scenario/Context**: \nYou are working on a project that requires a fast and efficient way to approximate \u03c0. The Leibniz formula is a simple and educational method to understand series representation of \u03c0, but it is not suitable for high-precision applications due to its slow convergence. Your task is to design a more efficient algorithm that can approximate \u03c0 with a given precision.\n\n**Task**:\nImplement a function `calculate_pi_efficient` that approximates \u03c0 to a given precision. The function should use a different series or algorithm that converges faster than the Leibniz formula. Additionally, ensure that the function can handle large values of precision efficiently and accurately.\n\n**Expected Input and Output**:\n- **Input**:\n  - `precision` (int): The number of decimal places to which \u03c0 should be approximated.\n- **Output**:\n  - A string representing \u03c0 to the specified precision.\n\n**Constraints**:\n- The function must be efficient and handle large values of precision without running into performance issues.\n\n**Performance Requirements**:\n- The function should be able to compute \u03c0 to at least 100 decimal places within a reasonable time.\n\n**Example**:\n```python\n>>> calculate_pi_efficient(50)\n'3.14159265358979323846264338327950288419716939937510582097494459230781640628620899'\n```"}], "metadata": {"prompt_id": "00000043", "row_id": 43, "seed_ids": [781], "mode": "algorithm", "instruction": "**Scenario/Context**: \nYou are working on a project that requires a fast and efficient way to approximate \u03c0. The Leibniz formula is a simple and educational method to understand series representation of \u03c0, but it is not suitable for high-precision applications due to its slow convergence. Your task is to design a more efficient algorithm that can approximate \u03c0 with a given precision.\n\n**Task**:\nImplement a function `calculate_pi_efficient` that approximates \u03c0 to a given precision. The function should use a different series or algorithm that converges faster than the Leibniz formula. Additionally, ensure that the function can handle large values of precision efficiently and accurately.\n\n**Expected Input and Output**:\n- **Input**:\n  - `precision` (int): The number of decimal places to which \u03c0 should be approximated.\n- **Output**:\n  - A string representing \u03c0 to the specified precision.\n\n**Constraints**:\n- The function must be efficient and handle large values of precision without running into performance issues.\n\n**Performance Requirements**:\n- The function should be able to compute \u03c0 to at least 100 decimal places within a reasonable time.\n\n**Example**:\n```python\n>>> calculate_pi_efficient(50)\n'3.14159265358979323846264338327950288419716939937510582097494459230781640628620899'\n```"}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Scenario\n\nYou have been given a piece of Python code implementing the comb sort algorithm. The comb sort algorithm is a simple yet effective improvement over bubble sort, which sorts a list of elements in ascending order by comparing elements with a certain gap. The gap in comb sort starts with the length of the list and is reduced by a shrink factor until it becomes 1.\n\nHowever, the provided code has a few limitations and edge cases that need to be handled more robustly. Your task is to modify the given comb sort function to handle these issues and improve its performance.\n\n### Requirements\n\n1. **Input**: A list of integers.\n2. **Output**: The same list sorted in ascending order.\n3. **Constraints**:\n   - The list can contain up to 100,000 elements.\n   - Elements can range from -1,000,000 to 1,000,000.\n4. **Performance**: The function should be efficient, aiming for a time complexity of \\(O(n \\log n)\\) in the worst case.\n\n### Implementation\n\n1. Modify the `comb_sort` function to handle edge cases such as empty lists and single-element lists.\n2. Optimize the gap reduction strategy to improve the sorting efficiency.\n3. Ensure the function correctly handles sorting large lists with a high number of duplicates.\n\n### Example\n\n```python\n# Example usage\nunsorted = [5, 3, 8, 4, 2]\nsorted_list = comb_sort(unsorted)\nprint(sorted_list)  # Output: [2, 3, 4, 5, 8]\n```\n\n### Additional Constraints\n\n- You should not use any external libraries or built-in sorting functions.\n- The code should be clear, well-documented, and easy to understand.\n\n### Provided Code\n\n```python\ndef comb_sort(data: list) -> list:\n    # Your implementation here\n    return data\n```\n\n### Task\n\nImplement the `comb_sort` function according to the requirements and constraints provided. Make sure to handle all edge cases and optimize the sorting algorithm to perform efficiently."}], "metadata": {"prompt_id": "00000044", "row_id": 44, "seed_ids": [224], "mode": "algorithm", "instruction": "### Scenario\n\nYou have been given a piece of Python code implementing the comb sort algorithm. The comb sort algorithm is a simple yet effective improvement over bubble sort, which sorts a list of elements in ascending order by comparing elements with a certain gap. The gap in comb sort starts with the length of the list and is reduced by a shrink factor until it becomes 1.\n\nHowever, the provided code has a few limitations and edge cases that need to be handled more robustly. Your task is to modify the given comb sort function to handle these issues and improve its performance.\n\n### Requirements\n\n1. **Input**: A list of integers.\n2. **Output**: The same list sorted in ascending order.\n3. **Constraints**:\n   - The list can contain up to 100,000 elements.\n   - Elements can range from -1,000,000 to 1,000,000.\n4. **Performance**: The function should be efficient, aiming for a time complexity of \\(O(n \\log n)\\) in the worst case.\n\n### Implementation\n\n1. Modify the `comb_sort` function to handle edge cases such as empty lists and single-element lists.\n2. Optimize the gap reduction strategy to improve the sorting efficiency.\n3. Ensure the function correctly handles sorting large lists with a high number of duplicates.\n\n### Example\n\n```python\n# Example usage\nunsorted = [5, 3, 8, 4, 2]\nsorted_list = comb_sort(unsorted)\nprint(sorted_list)  # Output: [2, 3, 4, 5, 8]\n```\n\n### Additional Constraints\n\n- You should not use any external libraries or built-in sorting functions.\n- The code should be clear, well-documented, and easy to understand.\n\n### Provided Code\n\n```python\ndef comb_sort(data: list) -> list:\n    # Your implementation here\n    return data\n```\n\n### Task\n\nImplement the `comb_sort` function according to the requirements and constraints provided. Make sure to handle all edge cases and optimize the sorting algorithm to perform efficiently."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:**Scenario:** You are working on a cryptographic application that involves finding the modular inverse of a number. The application needs to handle large numbers efficiently without causing performance issues.\n\n**Task:** Implement a function `find_mod_inverse` that computes the modular inverse of a given integer \\(a\\) modulo \\(m\\). The function should use the Extended Euclidean Algorithm to find the modular inverse and raise a `ValueError` if the modular inverse does not exist.\n\n**Input:**\n- Two integers \\(a\\) and \\(m\\) where \\(1 \\leq a, m \\leq 10^9\\).\n\n**Output:**\n- The modular inverse of \\(a\\) modulo \\(m\\) if it exists. If it does not exist, raise a `ValueError` with an appropriate error message.\n\n**Constraints:**\n- \\(1 \\leq a, m \\leq 10^9\\)\n- \\(m > 0\\)\n\n**Example:**\n```python\n# Example 1\na = 3\nm = 11\nfind_mod_inverse(a, m)  # Output: 4\n\n# Example 2\na = 10\nm = 20\nfind_mod_inverse(a, m)  # Raises ValueError: mod inverse of 10 and 20 does not exist\n\n# Example 3\na = 17\nm = 3120\nfind_mod_inverse(a, m)  # Output: 2753\n```\n\n**Note:**\n- Use the provided `gcd_by_iterative` function to find the greatest common divisor.\n- Ensure that the function is efficient and handles large values of \\(a\\) and \\(m\\)."}], "metadata": {"prompt_id": "00000045", "row_id": 45, "seed_ids": [75], "mode": "algorithm", "instruction": "**Scenario:** You are working on a cryptographic application that involves finding the modular inverse of a number. The application needs to handle large numbers efficiently without causing performance issues.\n\n**Task:** Implement a function `find_mod_inverse` that computes the modular inverse of a given integer \\(a\\) modulo \\(m\\). The function should use the Extended Euclidean Algorithm to find the modular inverse and raise a `ValueError` if the modular inverse does not exist.\n\n**Input:**\n- Two integers \\(a\\) and \\(m\\) where \\(1 \\leq a, m \\leq 10^9\\).\n\n**Output:**\n- The modular inverse of \\(a\\) modulo \\(m\\) if it exists. If it does not exist, raise a `ValueError` with an appropriate error message.\n\n**Constraints:**\n- \\(1 \\leq a, m \\leq 10^9\\)\n- \\(m > 0\\)\n\n**Example:**\n```python\n# Example 1\na = 3\nm = 11\nfind_mod_inverse(a, m)  # Output: 4\n\n# Example 2\na = 10\nm = 20\nfind_mod_inverse(a, m)  # Raises ValueError: mod inverse of 10 and 20 does not exist\n\n# Example 3\na = 17\nm = 3120\nfind_mod_inverse(a, m)  # Output: 2753\n```\n\n**Note:**\n- Use the provided `gcd_by_iterative` function to find the greatest common divisor.\n- Ensure that the function is efficient and handles large values of \\(a\\) and \\(m\\)."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are given a function `liouville_lambda` that calculates the Liouville Lambda function value for a given integer \\( n \\). Your task is to enhance this function to include a more efficient prime factorization method and to handle larger input values gracefully.\n\n**Requirements:**\n1. Implement a function `efficient_prime_factors` that takes an integer \\( n \\) and returns a list of its prime factors in ascending order.\n2. Modify the `liouville_lambda` function to use your `efficient_prime_factors` function.\n3. Ensure the function handles all edge cases correctly:\n   - Raises a `ValueError` if the input is not a positive integer.\n   - Returns 1 if \\( n \\) has an even number of prime factors.\n   - Returns -1 if \\( n \\) has an odd number of prime factors.\n\n**Input:**\n- A single integer \\( n \\) where \\( 1 \\leq n \\leq 10^6 \\).\n\n**Output:**\n- An integer, 1 if the number of prime factors is even, and -1 if it is odd.\n\n**Constraints:**\n- The input \\( n \\) will be a positive integer.\n- The input \\( n \\) will not exceed \\( 10^6 \\).\n\n**Example:**\n```python\nassert liouville_lambda(10) == 1\nassert liouville_lambda(11) == -1\nassert liouville_lambda(100) == 1\nassert liouville_lambda(30030) == -1  # 30030 = 2 * 3 * 5 * 7 * 11 * 13\n```\n\n**Note:**\nYou should focus on optimizing the prime factorization process to handle larger values efficiently."}], "metadata": {"prompt_id": "00000046", "row_id": 46, "seed_ids": [752], "mode": "algorithm", "instruction": "You are given a function `liouville_lambda` that calculates the Liouville Lambda function value for a given integer \\( n \\). Your task is to enhance this function to include a more efficient prime factorization method and to handle larger input values gracefully.\n\n**Requirements:**\n1. Implement a function `efficient_prime_factors` that takes an integer \\( n \\) and returns a list of its prime factors in ascending order.\n2. Modify the `liouville_lambda` function to use your `efficient_prime_factors` function.\n3. Ensure the function handles all edge cases correctly:\n   - Raises a `ValueError` if the input is not a positive integer.\n   - Returns 1 if \\( n \\) has an even number of prime factors.\n   - Returns -1 if \\( n \\) has an odd number of prime factors.\n\n**Input:**\n- A single integer \\( n \\) where \\( 1 \\leq n \\leq 10^6 \\).\n\n**Output:**\n- An integer, 1 if the number of prime factors is even, and -1 if it is odd.\n\n**Constraints:**\n- The input \\( n \\) will be a positive integer.\n- The input \\( n \\) will not exceed \\( 10^6 \\).\n\n**Example:**\n```python\nassert liouville_lambda(10) == 1\nassert liouville_lambda(11) == -1\nassert liouville_lambda(100) == 1\nassert liouville_lambda(30030) == -1  # 30030 = 2 * 3 * 5 * 7 * 11 * 13\n```\n\n**Note:**\nYou should focus on optimizing the prime factorization process to handle larger values efficiently."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are tasked with implementing and utilizing the Extended Euclidean Algorithm to solve a specific problem. Given two integers \\(m\\) and \\(n\\), your task is to find integers \\(a\\) and \\(b\\) such that \\(a \\cdot m + b \\cdot n = \\gcd(m, n)\\). Additionally, you need to use these coefficients to construct a new integer \\(k\\) such that \\(k = a^2 + b^2\\). \n\nHere are the requirements for your implementation:\n- **Input**: Two integers \\(m\\) and \\(n\\) (\\(-10^9 \\leq m, n \\leq 10^9\\)).\n- **Output**: A single integer \\(k\\) as described above.\n- **Performance Requirement**: Your solution should be efficient and handle the given constraints within a reasonable time.\n\n### Example\n\n```python\n# Example 1\nm = 10\nn = 6\n# Extended Euclidean Algorithm: 10 = 1*6 + 4, 6 = 1*4 + 2, 4 = 2*2 + 0\n# Bezout's identity: 10*(-1) + 6*2 = 2 (gcd of 10 and 6 is 2)\n# k = (-1)^2 + 2^2 = 1 + 4 = 5\n# Output: 5\n\n# Example 2\nm = 35\nn = 15\n# Extended Euclidean Algorithm: 35 = 2*15 + 5, 15 = 3*5 + 0\n# Bezout's identity: 35*(-3) + 15*7 = 5 (gcd of 35 and 15 is 5)\n# k = (-3)^2 + 7^2 = 9 + 49 = 58\n# Output: 58\n```\n\n### Implementation\n\nWrite a function `calculate_k(m: int, n: int) -> int` that takes two integers \\(m\\) and \\(n\\) as input and returns the integer \\(k\\) as described above.\n\n### Constraints\n- \\( -10^9 \\leq m, n \\leq 10^9 \\)\n\n### Note\n\nEnsure your implementation is correct by handling all edge cases and optimizing the solution to handle large inputs efficiently."}], "metadata": {"prompt_id": "00000047", "row_id": 47, "seed_ids": [702], "mode": "algorithm", "instruction": "You are tasked with implementing and utilizing the Extended Euclidean Algorithm to solve a specific problem. Given two integers \\(m\\) and \\(n\\), your task is to find integers \\(a\\) and \\(b\\) such that \\(a \\cdot m + b \\cdot n = \\gcd(m, n)\\). Additionally, you need to use these coefficients to construct a new integer \\(k\\) such that \\(k = a^2 + b^2\\). \n\nHere are the requirements for your implementation:\n- **Input**: Two integers \\(m\\) and \\(n\\) (\\(-10^9 \\leq m, n \\leq 10^9\\)).\n- **Output**: A single integer \\(k\\) as described above.\n- **Performance Requirement**: Your solution should be efficient and handle the given constraints within a reasonable time.\n\n### Example\n\n```python\n# Example 1\nm = 10\nn = 6\n# Extended Euclidean Algorithm: 10 = 1*6 + 4, 6 = 1*4 + 2, 4 = 2*2 + 0\n# Bezout's identity: 10*(-1) + 6*2 = 2 (gcd of 10 and 6 is 2)\n# k = (-1)^2 + 2^2 = 1 + 4 = 5\n# Output: 5\n\n# Example 2\nm = 35\nn = 15\n# Extended Euclidean Algorithm: 35 = 2*15 + 5, 15 = 3*5 + 0\n# Bezout's identity: 35*(-3) + 15*7 = 5 (gcd of 35 and 15 is 5)\n# k = (-3)^2 + 7^2 = 9 + 49 = 58\n# Output: 58\n```\n\n### Implementation\n\nWrite a function `calculate_k(m: int, n: int) -> int` that takes two integers \\(m\\) and \\(n\\) as input and returns the integer \\(k\\) as described above.\n\n### Constraints\n- \\( -10^9 \\leq m, n \\leq 10^9 \\)\n\n### Note\n\nEnsure your implementation is correct by handling all edge cases and optimizing the solution to handle large inputs efficiently."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are given a list of tasks, where each task is represented by a tuple `(deadline, reward)`. The goal is to select a subset of tasks that maximizes the total reward, given that the total time to complete any task is one unit and no task can be started after its deadline. Implement the function `max_tasks` to return the list of task indices that should be selected to achieve the maximum reward.\n\n### Constraints:\n- `1 <= len(tasks) <= 10^5`\n- `1 <= deadline, reward <= 10^9`\n- No task has a negative deadline or reward.\n\n### Example:\n```python\ntasks = [(4, 20), (1, 10), (1, 40), (1, 30)]\nmax_tasks(tasks)  # Returns [2, 0] because tasks 2 and 0 can be completed before their deadlines and yield a reward of 40 + 20 = 60\n```\n\n### Function Signature:\n```python\nfrom typing import List\n\ndef max_tasks(tasks: List[tuple[int, int]]) -> List[int]:\n    pass\n```\n\n### Additional Requirements:\n- The function should return a list of task indices (0-based) in the order they should be selected.\n- Ensure the solution handles edge cases where all tasks are invalid or all tasks have the same deadline.\n\n### Performance Requirements:\n- The solution should aim for a time complexity of \\(O(n \\log n)\\) or better.\n\n### Scenario:\nImagine you are a project manager tasked with selecting critical tasks from a list of tasks to complete in a time-efficient manner. Each task has a deadline by which it must be completed and a reward for completion. Your goal is to maximize the total reward while respecting the deadlines."}], "metadata": {"prompt_id": "00000048", "row_id": 48, "seed_ids": [894], "mode": "algorithm", "instruction": "You are given a list of tasks, where each task is represented by a tuple `(deadline, reward)`. The goal is to select a subset of tasks that maximizes the total reward, given that the total time to complete any task is one unit and no task can be started after its deadline. Implement the function `max_tasks` to return the list of task indices that should be selected to achieve the maximum reward.\n\n### Constraints:\n- `1 <= len(tasks) <= 10^5`\n- `1 <= deadline, reward <= 10^9`\n- No task has a negative deadline or reward.\n\n### Example:\n```python\ntasks = [(4, 20), (1, 10), (1, 40), (1, 30)]\nmax_tasks(tasks)  # Returns [2, 0] because tasks 2 and 0 can be completed before their deadlines and yield a reward of 40 + 20 = 60\n```\n\n### Function Signature:\n```python\nfrom typing import List\n\ndef max_tasks(tasks: List[tuple[int, int]]) -> List[int]:\n    pass\n```\n\n### Additional Requirements:\n- The function should return a list of task indices (0-based) in the order they should be selected.\n- Ensure the solution handles edge cases where all tasks are invalid or all tasks have the same deadline.\n\n### Performance Requirements:\n- The solution should aim for a time complexity of \\(O(n \\log n)\\) or better.\n\n### Scenario:\nImagine you are a project manager tasked with selecting critical tasks from a list of tasks to complete in a time-efficient manner. Each task has a deadline by which it must be completed and a reward for completion. Your goal is to maximize the total reward while respecting the deadlines."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:The sigmoid function is a fundamental building block in machine learning and neural networks. Your task is to implement a modified version of the sigmoid function that can handle a batch of input vectors efficiently. Additionally, you need to optimize the function to avoid numerical instability and ensure it works correctly with different data types.\n\n#### Requirements\n- Implement a function `batch_sigmoid` that takes a 2D numpy array as input and returns a 2D numpy array with the sigmoid function applied element-wise.\n- Ensure the function works correctly with large and small input values to avoid numerical instability.\n- Optimize the function for performance and ensure it can handle large input arrays efficiently.\n- The function should return a numpy array of the same shape as the input array.\n- Add appropriate error handling to ensure the input is a 2D numpy array of the correct type.\n\n#### Constraints\n- The input array can have a maximum shape of (1000, 1000).\n- The elements of the input array can range from -1000 to 1000.\n\n#### Performance Requirements\n- The function should be efficient and not take more than 1 second to process an array of shape (1000, 1000).\n\n#### Example\n```python\nimport numpy as np\n\ninput_array = np.array([[0, -1, 1], [100, -100, 0]])\noutput_array = batch_sigmoid(input_array)\nprint(output_array)\n```\nExpected output:\n```python\n[[0.5       0.26894142 0.73105858]\n [1.         2.06115362e-45  0.5      ]]\n```\n\n#### Additional Information\n- You can use the `numpy` library to perform the computations.\n\n#### Scoring\n- Correct implementation: 70%\n- Performance and optimization: 20%\n- Error handling: 10%"}], "metadata": {"prompt_id": "00000049", "row_id": 49, "seed_ids": [784], "mode": "algorithm", "instruction": "The sigmoid function is a fundamental building block in machine learning and neural networks. Your task is to implement a modified version of the sigmoid function that can handle a batch of input vectors efficiently. Additionally, you need to optimize the function to avoid numerical instability and ensure it works correctly with different data types.\n\n#### Requirements\n- Implement a function `batch_sigmoid` that takes a 2D numpy array as input and returns a 2D numpy array with the sigmoid function applied element-wise.\n- Ensure the function works correctly with large and small input values to avoid numerical instability.\n- Optimize the function for performance and ensure it can handle large input arrays efficiently.\n- The function should return a numpy array of the same shape as the input array.\n- Add appropriate error handling to ensure the input is a 2D numpy array of the correct type.\n\n#### Constraints\n- The input array can have a maximum shape of (1000, 1000).\n- The elements of the input array can range from -1000 to 1000.\n\n#### Performance Requirements\n- The function should be efficient and not take more than 1 second to process an array of shape (1000, 1000).\n\n#### Example\n```python\nimport numpy as np\n\ninput_array = np.array([[0, -1, 1], [100, -100, 0]])\noutput_array = batch_sigmoid(input_array)\nprint(output_array)\n```\nExpected output:\n```python\n[[0.5       0.26894142 0.73105858]\n [1.         2.06115362e-45  0.5      ]]\n```\n\n#### Additional Information\n- You can use the `numpy` library to perform the computations.\n\n#### Scoring\n- Correct implementation: 70%\n- Performance and optimization: 20%\n- Error handling: 10%"}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Question\n\nYou are given a `Matrix` class that supports basic operations on matrices, including addition, negation, scalar multiplication, and matrix multiplication. Additionally, it supports the inversion of the matrix using the Sherman-Morrison formula. However, there are some issues with the implementation that need to be addressed.\n\nYour task is to:\n\n1. Implement a method to check if a matrix is invertible before using the `sherman_morrison` method.\n2. Optimize the matrix multiplication operation to improve performance.\n3. Ensure that the `__mul__` method raises a `ValueError` if the dimensions do not match for matrix multiplication.\n\n#### Inputs\n\n- The `Matrix` class is provided in the code snippet.\n- You need to add the following methods to the `Matrix` class:\n  - `is_invertible(self) -> bool`: Returns `True` if the matrix is invertible, otherwise `False`.\n  - `multiply_optimized(self, another: Matrix) -> Matrix`: Returns the result of multiplying the current matrix with another matrix using a more efficient algorithm.\n\n#### Constraints\n\n- The `Matrix` class and the provided methods should be self-contained.\n- The `multiply_optimized` method should be more efficient than the existing `__mul__` method.\n\n#### Example\n\n```python\na = Matrix(2, 2)\na[0, 0], a[0, 1], a[1, 0], a[1, 1] = 1, 2, 3, 4\nprint(a.is_invertible())  # False\nprint(a.sherman_morrison(Matrix(2, 1, 1), Matrix(2, 1, 1)))  # None\n\nb = Matrix(2, 2)\nb[0, 0], b[0, 1], b[1, 0], b[1, 1] = 2, -1, -1, 2\nprint(b.is_invertible())  # True\nprint(b.sherman_morrison(Matrix(2, 1, 1), Matrix(2, 1, 1)))  # Matrix\n\nc = Matrix(2, 2)\nc[0, 0], c[0, 1], c[1, 0], c[1, 1] = 1, 1, 1, 1\nprint(c.is_invertible())  # False\n```\n\n#### Performance Requirements\n\n- The `multiply_optimized` method should achieve a time complexity of \\(O(n^2)\\) for multiplying two \\(n \\times n\\) matrices.\n\n#### Implementation\n\nImplement the required methods in the `Matrix` class."}], "metadata": {"prompt_id": "00000050", "row_id": 50, "seed_ids": [1096], "mode": "algorithm", "instruction": "### Question\n\nYou are given a `Matrix` class that supports basic operations on matrices, including addition, negation, scalar multiplication, and matrix multiplication. Additionally, it supports the inversion of the matrix using the Sherman-Morrison formula. However, there are some issues with the implementation that need to be addressed.\n\nYour task is to:\n\n1. Implement a method to check if a matrix is invertible before using the `sherman_morrison` method.\n2. Optimize the matrix multiplication operation to improve performance.\n3. Ensure that the `__mul__` method raises a `ValueError` if the dimensions do not match for matrix multiplication.\n\n#### Inputs\n\n- The `Matrix` class is provided in the code snippet.\n- You need to add the following methods to the `Matrix` class:\n  - `is_invertible(self) -> bool`: Returns `True` if the matrix is invertible, otherwise `False`.\n  - `multiply_optimized(self, another: Matrix) -> Matrix`: Returns the result of multiplying the current matrix with another matrix using a more efficient algorithm.\n\n#### Constraints\n\n- The `Matrix` class and the provided methods should be self-contained.\n- The `multiply_optimized` method should be more efficient than the existing `__mul__` method.\n\n#### Example\n\n```python\na = Matrix(2, 2)\na[0, 0], a[0, 1], a[1, 0], a[1, 1] = 1, 2, 3, 4\nprint(a.is_invertible())  # False\nprint(a.sherman_morrison(Matrix(2, 1, 1), Matrix(2, 1, 1)))  # None\n\nb = Matrix(2, 2)\nb[0, 0], b[0, 1], b[1, 0], b[1, 1] = 2, -1, -1, 2\nprint(b.is_invertible())  # True\nprint(b.sherman_morrison(Matrix(2, 1, 1), Matrix(2, 1, 1)))  # Matrix\n\nc = Matrix(2, 2)\nc[0, 0], c[0, 1], c[1, 0], c[1, 1] = 1, 1, 1, 1\nprint(c.is_invertible())  # False\n```\n\n#### Performance Requirements\n\n- The `multiply_optimized` method should achieve a time complexity of \\(O(n^2)\\) for multiplying two \\(n \\times n\\) matrices.\n\n#### Implementation\n\nImplement the required methods in the `Matrix` class."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Scenario\nYou are working on a project where you need to efficiently traverse a large Binary Search Tree (BST) and output the values in sorted order. Given the provided code snippet, you have been tasked with implementing an enhanced version of the inorder traversal.\n\n### Requirements\n1. **Function Specification**:\n    - Implement a function `enhanced_inorder_traversal(root: BinaryTreeNode | None) -> list[int]` that performs an inorder traversal on a given BST.\n    - The function should return a list of integers representing the values of the nodes in sorted order.\n2. **Input**:\n    - `root: BinaryTreeNode | None`: The root node of a BST. If `None`, the function should return an empty list.\n3. **Output**:\n    - A list of integers representing the values of the nodes in sorted order.\n4. **Constraints**:\n    - The maximum number of nodes in the tree is \\(10^5\\).\n    - The value of each node is an integer within the range \\([-10^9, 10^9]\\).\n5. **Optimization**:\n    - Use an iterative approach to avoid potential stack overflow issues with deep trees.\n    - Ensure the solution is efficient and handles edge cases properly.\n\n### Example\n\n```python\nclass BinaryTreeNode:\n    def __init__(self, data: int) -> None:\n        self.data = data\n        self.left_child: BinaryTreeNode | None = None\n        self.right_child: BinaryTreeNode | None = None\n\ndef make_tree() -> BinaryTreeNode | None:\n    root = BinaryTreeNode(15)\n    root.left_child = BinaryTreeNode(10)\n    root.right_child = BinaryTreeNode(25)\n    root.left_child.left_child = BinaryTreeNode(6)\n    root.left_child.right_child = BinaryTreeNode(14)\n    root.right_child.left_child = BinaryTreeNode(20)\n    root.right_child.right_child = BinaryTreeNode(60)\n    return root\n\n# Function to test the solution\ndef check_solution(func):\n    tree = make_tree()\n    result = func(tree)\n    expected = [6, 10, 14, 15, 20, 25, 60]\n    assert result == expected, \"The result does not match the expected output.\"\n    print(\"Solution is correct.\")\n\n# Test the function\ncheck_solution(enhanced_inorder_traversal)\n```\n\n### Note\nEnsure your implementation is efficient and handles edge cases such as an empty tree or very deep trees. Use an iterative approach to avoid stack overflow issues."}], "metadata": {"prompt_id": "00000051", "row_id": 51, "seed_ids": [358], "mode": "algorithm", "instruction": "### Scenario\nYou are working on a project where you need to efficiently traverse a large Binary Search Tree (BST) and output the values in sorted order. Given the provided code snippet, you have been tasked with implementing an enhanced version of the inorder traversal.\n\n### Requirements\n1. **Function Specification**:\n    - Implement a function `enhanced_inorder_traversal(root: BinaryTreeNode | None) -> list[int]` that performs an inorder traversal on a given BST.\n    - The function should return a list of integers representing the values of the nodes in sorted order.\n2. **Input**:\n    - `root: BinaryTreeNode | None`: The root node of a BST. If `None`, the function should return an empty list.\n3. **Output**:\n    - A list of integers representing the values of the nodes in sorted order.\n4. **Constraints**:\n    - The maximum number of nodes in the tree is \\(10^5\\).\n    - The value of each node is an integer within the range \\([-10^9, 10^9]\\).\n5. **Optimization**:\n    - Use an iterative approach to avoid potential stack overflow issues with deep trees.\n    - Ensure the solution is efficient and handles edge cases properly.\n\n### Example\n\n```python\nclass BinaryTreeNode:\n    def __init__(self, data: int) -> None:\n        self.data = data\n        self.left_child: BinaryTreeNode | None = None\n        self.right_child: BinaryTreeNode | None = None\n\ndef make_tree() -> BinaryTreeNode | None:\n    root = BinaryTreeNode(15)\n    root.left_child = BinaryTreeNode(10)\n    root.right_child = BinaryTreeNode(25)\n    root.left_child.left_child = BinaryTreeNode(6)\n    root.left_child.right_child = BinaryTreeNode(14)\n    root.right_child.left_child = BinaryTreeNode(20)\n    root.right_child.right_child = BinaryTreeNode(60)\n    return root\n\n# Function to test the solution\ndef check_solution(func):\n    tree = make_tree()\n    result = func(tree)\n    expected = [6, 10, 14, 15, 20, 25, 60]\n    assert result == expected, \"The result does not match the expected output.\"\n    print(\"Solution is correct.\")\n\n# Test the function\ncheck_solution(enhanced_inorder_traversal)\n```\n\n### Note\nEnsure your implementation is efficient and handles edge cases such as an empty tree or very deep trees. Use an iterative approach to avoid stack overflow issues."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are tasked with extending the functionality of a given function to not only find the largest power of two less than or equal to a given non-negative integer but also to handle an additional constraint: finding the smallest power of two greater than a given non-negative integer. This new function will be used in scenarios where binary allocations or specific power levels are required.\n\n**Function Signature**: `def find_next_power_of_two(number: int) -> int:`\n\n**Input and Output**:\n- **Input**: A single non-negative integer `number`.\n- **Output**: The smallest power of two greater than the given integer. If the input is 0, return 1.\n\n**Constraints**:\n- The input number will be in the range \\(0 \\leq \\text{number} \\leq 10^9\\).\n\n**Performance Requirements**:\n- The function should be efficient and handle the constraints within a reasonable time.\n\n**Scenario**:\nImagine you are working on a system where you need to allocate memory in the form of powers of two. You have a function to allocate memory based on the smallest power of two greater than a given request size. For example, if a request is for 5 units of memory, the system should allocate 8 units (2^3).\n\n**Example**:\n```python\nassert find_next_power_of_two(0) == 1\nassert find_next_power_of_two(1) == 2\nassert find_next_power_of_two(15) == 16\nassert find_next_power_of_two(16) == 32\n```\n\n**Note**:\n- You are not allowed to use any built-in functions or libraries for calculating powers of two.\n- The function should handle edge cases as described in the constraints."}], "metadata": {"prompt_id": "00000052", "row_id": 52, "seed_ids": [1050], "mode": "algorithm", "instruction": "You are tasked with extending the functionality of a given function to not only find the largest power of two less than or equal to a given non-negative integer but also to handle an additional constraint: finding the smallest power of two greater than a given non-negative integer. This new function will be used in scenarios where binary allocations or specific power levels are required.\n\n**Function Signature**: `def find_next_power_of_two(number: int) -> int:`\n\n**Input and Output**:\n- **Input**: A single non-negative integer `number`.\n- **Output**: The smallest power of two greater than the given integer. If the input is 0, return 1.\n\n**Constraints**:\n- The input number will be in the range \\(0 \\leq \\text{number} \\leq 10^9\\).\n\n**Performance Requirements**:\n- The function should be efficient and handle the constraints within a reasonable time.\n\n**Scenario**:\nImagine you are working on a system where you need to allocate memory in the form of powers of two. You have a function to allocate memory based on the smallest power of two greater than a given request size. For example, if a request is for 5 units of memory, the system should allocate 8 units (2^3).\n\n**Example**:\n```python\nassert find_next_power_of_two(0) == 1\nassert find_next_power_of_two(1) == 2\nassert find_next_power_of_two(15) == 16\nassert find_next_power_of_two(16) == 32\n```\n\n**Note**:\n- You are not allowed to use any built-in functions or libraries for calculating powers of two.\n- The function should handle edge cases as described in the constraints."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are working on a game where a player draws discs from a bag containing one red and one blue disc. After each draw, one additional red disc is added to the bag, and the player draws again. The player wins if they draw more blue discs than red discs after a specified number of turns. The banker wants to set a prize fund such that the expected loss is minimized.\n\nGiven the number of turns `num_turns`, write a Python function `max_prize_fund` to determine the maximum prize fund that should be allocated for a single game. The function should calculate the probability of the player winning and then determine the prize fund that makes the expected loss zero, considering the original \u00a31 paid to play the game.\n\n**Function Signature**: `def max_prize_fund(num_turns: int) -> int:`\n\n**Input**:\n- `num_turns` (1 \u2264 num_turns \u2264 20): An integer representing the number of turns in the game.\n\n**Output**:\n- An integer representing the maximum prize fund that should be allocated for a single game.\n\n**Example**:\n```python\n>>> max_prize_fund(4)\n10\n>>> max_prize_fund(10)\n225\n```\n\n**Note**:\n- The function should return the maximum prize fund as an integer.\n- The probability of the player winning is calculated using combinatorial methods similar to the provided solution."}], "metadata": {"prompt_id": "00000053", "row_id": 53, "seed_ids": [595], "mode": "algorithm", "instruction": "You are working on a game where a player draws discs from a bag containing one red and one blue disc. After each draw, one additional red disc is added to the bag, and the player draws again. The player wins if they draw more blue discs than red discs after a specified number of turns. The banker wants to set a prize fund such that the expected loss is minimized.\n\nGiven the number of turns `num_turns`, write a Python function `max_prize_fund` to determine the maximum prize fund that should be allocated for a single game. The function should calculate the probability of the player winning and then determine the prize fund that makes the expected loss zero, considering the original \u00a31 paid to play the game.\n\n**Function Signature**: `def max_prize_fund(num_turns: int) -> int:`\n\n**Input**:\n- `num_turns` (1 \u2264 num_turns \u2264 20): An integer representing the number of turns in the game.\n\n**Output**:\n- An integer representing the maximum prize fund that should be allocated for a single game.\n\n**Example**:\n```python\n>>> max_prize_fund(4)\n10\n>>> max_prize_fund(10)\n225\n```\n\n**Note**:\n- The function should return the maximum prize fund as an integer.\n- The probability of the player winning is calculated using combinatorial methods similar to the provided solution."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:**Scenario**: You are given a list of integers, and you need to find the peak element in the list, which is the maximum value in a unimodal list. A unimodal list is defined as a list that increases to a point and then decreases. If the input list does not strictly follow this pattern, the function should return `None`.\n\n**Function Signature**:\n```python\ndef find_peak(lst: List[int]) -> Optional[int]:\n    pass\n```\n\n**Input**:\n- The function takes a list of integers `lst`.\n\n**Output**:\n- The function returns the peak element of the list as an integer. If the list does not follow the unimodal pattern, the function should return `None`.\n\n**Constraints**:\n- \\(1 \\leq \\text{len}(lst) \\leq 10^6\\)\n- The list can contain duplicate values.\n\n**Performance Requirement**:\n- The function should be efficient, aiming for a time complexity of \\(O(\\log n)\\) where \\(n\\) is the length of the list.\n\n**Example**:\n```python\n>>> find_peak([1, 2, 3, 4, 5, 4, 3, 2, 1])\n5\n>>> find_peak([1, 10, 9, 8, 7, 6, 5, 4])\n10\n>>> find_peak([1, 9, 8, 7])\n9\n>>> find_peak([1, 2, 3, 4, 5, 6, 7, 0])\n7\n>>> find_peak([1, 2, 3, 4, 3, 2, 1, 0, -1, -2])\n4\n>>> find_peak([1, 2, 2, 1, 0, -1, -2])\n2\n>>> find_peak([1, 1])\n1\n>>> find_peak([1])\n1\n>>> find_peak([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 11, 10])\n12\n>>> find_peak([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 11, 10, 9])\n12\n```\n\n**Note**: Ensure that your implementation handles edge cases correctly and efficiently."}], "metadata": {"prompt_id": "00000054", "row_id": 54, "seed_ids": [942], "mode": "algorithm", "instruction": "**Scenario**: You are given a list of integers, and you need to find the peak element in the list, which is the maximum value in a unimodal list. A unimodal list is defined as a list that increases to a point and then decreases. If the input list does not strictly follow this pattern, the function should return `None`.\n\n**Function Signature**:\n```python\ndef find_peak(lst: List[int]) -> Optional[int]:\n    pass\n```\n\n**Input**:\n- The function takes a list of integers `lst`.\n\n**Output**:\n- The function returns the peak element of the list as an integer. If the list does not follow the unimodal pattern, the function should return `None`.\n\n**Constraints**:\n- \\(1 \\leq \\text{len}(lst) \\leq 10^6\\)\n- The list can contain duplicate values.\n\n**Performance Requirement**:\n- The function should be efficient, aiming for a time complexity of \\(O(\\log n)\\) where \\(n\\) is the length of the list.\n\n**Example**:\n```python\n>>> find_peak([1, 2, 3, 4, 5, 4, 3, 2, 1])\n5\n>>> find_peak([1, 10, 9, 8, 7, 6, 5, 4])\n10\n>>> find_peak([1, 9, 8, 7])\n9\n>>> find_peak([1, 2, 3, 4, 5, 6, 7, 0])\n7\n>>> find_peak([1, 2, 3, 4, 3, 2, 1, 0, -1, -2])\n4\n>>> find_peak([1, 2, 2, 1, 0, -1, -2])\n2\n>>> find_peak([1, 1])\n1\n>>> find_peak([1])\n1\n>>> find_peak([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 11, 10])\n12\n>>> find_peak([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 11, 10, 9])\n12\n```\n\n**Note**: Ensure that your implementation handles edge cases correctly and efficiently."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are given a 2x2 grid, and you are required to calculate the number of unique paths from the top-left corner to the bottom-right corner, where you can only move right or down. The general solution extends to an \\(n \\times n\\) grid.\n\nWrite a Python function `calculate_paths(n: int) -> int` that returns the number of unique paths in an \\(n \\times n\\) grid.\n\n**Function Signature**: `def calculate_paths(n: int) -> int:`\n\n**Input**\n- `n` (1 <= n <= 100): An integer representing the size of the grid.\n\n**Output**\n- An integer representing the number of unique paths in the \\(n \\times n\\) grid.\n\n**Constraints**\n- The input `n` will be a positive integer.\n\n**Example**\n```python\nprint(calculate_paths(2))  # Output: 6\nprint(calculate_paths(20))  # Output: 137846528820\n```\n\n**Note**\n- Use combinatorial mathematics to solve the problem efficiently.\n- Ensure your function handles edge cases correctly."}], "metadata": {"prompt_id": "00000055", "row_id": 55, "seed_ids": [474], "mode": "algorithm", "instruction": "You are given a 2x2 grid, and you are required to calculate the number of unique paths from the top-left corner to the bottom-right corner, where you can only move right or down. The general solution extends to an \\(n \\times n\\) grid.\n\nWrite a Python function `calculate_paths(n: int) -> int` that returns the number of unique paths in an \\(n \\times n\\) grid.\n\n**Function Signature**: `def calculate_paths(n: int) -> int:`\n\n**Input**\n- `n` (1 <= n <= 100): An integer representing the size of the grid.\n\n**Output**\n- An integer representing the number of unique paths in the \\(n \\times n\\) grid.\n\n**Constraints**\n- The input `n` will be a positive integer.\n\n**Example**\n```python\nprint(calculate_paths(2))  # Output: 6\nprint(calculate_paths(20))  # Output: 137846528820\n```\n\n**Note**\n- Use combinatorial mathematics to solve the problem efficiently.\n- Ensure your function handles edge cases correctly."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:**Scenario**: You are working on a project that requires generating Gray code sequences for various bit counts. The sequences are used in a digital communication system to ensure that only one bit changes between consecutive states.\n\n**Task**: Implement a function `generate_gray_code` that takes an integer \\( n \\) as input and returns a list of integers representing the \\( n \\)-bit Gray code sequence. The function should handle edge cases such as non-positive inputs and non-integer inputs.\n\n**Function Signature**: `def generate_gray_code(bit_count: int) -> List[int]:`\n\n**Input**:\n- \\( n \\) (1 \u2264 \\( n \\) \u2264 32): An integer representing the number of bits in the Gray code sequence.\n\n**Output**:\n- A list of integers representing the \\( n \\)-bit Gray code sequence.\n\n**Constraints**:\n- The function should handle inputs within the specified range.\n- The function should raise appropriate exceptions for invalid inputs.\n\n**Performance Requirements**:\n- The function should be efficient for \\( n \\leq 32 \\).\n\n**Example**:\n```python\n>>> generate_gray_code(2)\n[0, 1, 3, 2]\n>>> generate_gray_code(1)\n[0, 1]\n>>> generate_gray_code(3)\n[0, 1, 3, 2, 6, 7, 5, 4]\n```\n\n**Note**: You should not directly use the provided `gray_code` and `gray_code_sequence_string` functions. Implement your solution from scratch.\n\n**Hints**:\n- Consider the recursive nature of the problem and how you can build the sequence iteratively."}], "metadata": {"prompt_id": "00000056", "row_id": 56, "seed_ids": [1055], "mode": "algorithm", "instruction": "**Scenario**: You are working on a project that requires generating Gray code sequences for various bit counts. The sequences are used in a digital communication system to ensure that only one bit changes between consecutive states.\n\n**Task**: Implement a function `generate_gray_code` that takes an integer \\( n \\) as input and returns a list of integers representing the \\( n \\)-bit Gray code sequence. The function should handle edge cases such as non-positive inputs and non-integer inputs.\n\n**Function Signature**: `def generate_gray_code(bit_count: int) -> List[int]:`\n\n**Input**:\n- \\( n \\) (1 \u2264 \\( n \\) \u2264 32): An integer representing the number of bits in the Gray code sequence.\n\n**Output**:\n- A list of integers representing the \\( n \\)-bit Gray code sequence.\n\n**Constraints**:\n- The function should handle inputs within the specified range.\n- The function should raise appropriate exceptions for invalid inputs.\n\n**Performance Requirements**:\n- The function should be efficient for \\( n \\leq 32 \\).\n\n**Example**:\n```python\n>>> generate_gray_code(2)\n[0, 1, 3, 2]\n>>> generate_gray_code(1)\n[0, 1]\n>>> generate_gray_code(3)\n[0, 1, 3, 2, 6, 7, 5, 4]\n```\n\n**Note**: You should not directly use the provided `gray_code` and `gray_code_sequence_string` functions. Implement your solution from scratch.\n\n**Hints**:\n- Consider the recursive nature of the problem and how you can build the sequence iteratively."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are tasked with optimizing an existing Gaussian filter implementation to handle large images and large kernel sizes more efficiently. The provided code uses a straightforward approach to apply the Gaussian filter, which can be slow for large images. Your goal is to refactor the code to improve its performance without changing its functionality.\n\n**Requirements**:\n1. Modify the `gaussian_filter` function to handle images and kernels of arbitrary size.\n2. Ensure that the function correctly handles the edges of the image, producing valid results even when the kernel extends beyond the image boundaries.\n3. Optimize the code to reduce the number of operations and improve performance.\n4. Write a function `test_gaussian_filter` that reads an image, applies the Gaussian filter, and displays the original and filtered images side by side for verification.\n\n**Constraints**:\n* The input image is a grayscale image represented as a 2D NumPy array.\n* The kernel size is an odd integer, and the standard deviation is a positive float.\n* The function should handle images of any size and kernel sizes up to 21x21.\n\n**Performance**:\n* Aim to achieve a significant performance improvement over the provided code, especially for large images and larger kernel sizes.\n\n**Example**:\nGiven an input image and a kernel size of 5x5, the function should return a filtered image.\n\n```python\nimport numpy as np\nimport cv2\nimport matplotlib.pyplot as plt\n\ndef test_gaussian_filter(image_path, k_size, sigma):\n    # Read the image as grayscale\n    img = cv2.imread(image_path, cv2.IMREAD_GRAYSCALE)\n    \n    # Apply the Gaussian filter\n    filtered_image = gaussian_filter(img, k_size, sigma)\n    \n    # Display the original and filtered images\n    plt.subplot(1, 2, 1)\n    plt.imshow(img, cmap='gray')\n    plt.title('Original Image')\n    plt.axis('off')\n    \n    plt.subplot(1, 2, 2)\n    plt.imshow(filtered_image, cmap='gray')\n    plt.title('Filtered Image')\n    plt.axis('off')\n    \n    plt.show()\n\n# Example usage\ntest_gaussian_filter('path_to_image.jpg', 5, 1.0)\n```\n\n**Note**: The `gaussian_filter` function should be refactored to meet the above requirements and should not rely on the provided code snippet."}], "metadata": {"prompt_id": "00000057", "row_id": 57, "seed_ids": [844], "mode": "algorithm", "instruction": "You are tasked with optimizing an existing Gaussian filter implementation to handle large images and large kernel sizes more efficiently. The provided code uses a straightforward approach to apply the Gaussian filter, which can be slow for large images. Your goal is to refactor the code to improve its performance without changing its functionality.\n\n**Requirements**:\n1. Modify the `gaussian_filter` function to handle images and kernels of arbitrary size.\n2. Ensure that the function correctly handles the edges of the image, producing valid results even when the kernel extends beyond the image boundaries.\n3. Optimize the code to reduce the number of operations and improve performance.\n4. Write a function `test_gaussian_filter` that reads an image, applies the Gaussian filter, and displays the original and filtered images side by side for verification.\n\n**Constraints**:\n* The input image is a grayscale image represented as a 2D NumPy array.\n* The kernel size is an odd integer, and the standard deviation is a positive float.\n* The function should handle images of any size and kernel sizes up to 21x21.\n\n**Performance**:\n* Aim to achieve a significant performance improvement over the provided code, especially for large images and larger kernel sizes.\n\n**Example**:\nGiven an input image and a kernel size of 5x5, the function should return a filtered image.\n\n```python\nimport numpy as np\nimport cv2\nimport matplotlib.pyplot as plt\n\ndef test_gaussian_filter(image_path, k_size, sigma):\n    # Read the image as grayscale\n    img = cv2.imread(image_path, cv2.IMREAD_GRAYSCALE)\n    \n    # Apply the Gaussian filter\n    filtered_image = gaussian_filter(img, k_size, sigma)\n    \n    # Display the original and filtered images\n    plt.subplot(1, 2, 1)\n    plt.imshow(img, cmap='gray')\n    plt.title('Original Image')\n    plt.axis('off')\n    \n    plt.subplot(1, 2, 2)\n    plt.imshow(filtered_image, cmap='gray')\n    plt.title('Filtered Image')\n    plt.axis('off')\n    \n    plt.show()\n\n# Example usage\ntest_gaussian_filter('path_to_image.jpg', 5, 1.0)\n```\n\n**Note**: The `gaussian_filter` function should be refactored to meet the above requirements and should not rely on the provided code snippet."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Problem Description\n\nA number is considered **semidivisible** if it is divisible by the largest prime less than or equal to its square root (lps) or the smallest prime greater than or equal to its square root (ups), but not both.\n\nFor a given integer \\( n \\geq 4 \\), the **lower prime square root** (lps) is the largest prime \\( p \\) such that \\( p \\leq \\sqrt{n} \\), and the **upper prime square root** (ups) is the smallest prime \\( p \\) such that \\( p \\geq \\sqrt{n} \\).\n\nWrite a function `semidivisible_sum` that computes the sum of all semidivisible numbers not exceeding a given limit \\( N \\).\n\n#### Function Signature\n```python\ndef semidivisible_sum(limit: int) -> int:\n    ...\n```\n\n#### Constraints\n- \\( 4 \\leq limit \\leq 999,966,663,333 \\)\n- The function should return the sum of all semidivisible numbers up to the given limit.\n\n#### Example\n```python\nassert semidivisible_sum(15) == 30  # 8, 10, and 12 are semidivisible\nassert semidivisible_sum(1000) == 34825  # Sum of semidivisible numbers up to 1000\nassert semidivisible_sum(999_966_663_333) == 2480389586872  # Compute the sum for the given limit\n```\n\n#### Performance Requirement\nThe function should be efficient and should not take more than 1 minute to compute the result for the maximum input size.\n\n### Implementation Tips\n- Use the Sieve of Eratosthenes to generate prime numbers efficiently.\n- Ensure the function handles edge cases correctly, such as when the input is a perfect square."}], "metadata": {"prompt_id": "00000058", "row_id": 58, "seed_ids": [586], "mode": "algorithm", "instruction": "### Problem Description\n\nA number is considered **semidivisible** if it is divisible by the largest prime less than or equal to its square root (lps) or the smallest prime greater than or equal to its square root (ups), but not both.\n\nFor a given integer \\( n \\geq 4 \\), the **lower prime square root** (lps) is the largest prime \\( p \\) such that \\( p \\leq \\sqrt{n} \\), and the **upper prime square root** (ups) is the smallest prime \\( p \\) such that \\( p \\geq \\sqrt{n} \\).\n\nWrite a function `semidivisible_sum` that computes the sum of all semidivisible numbers not exceeding a given limit \\( N \\).\n\n#### Function Signature\n```python\ndef semidivisible_sum(limit: int) -> int:\n    ...\n```\n\n#### Constraints\n- \\( 4 \\leq limit \\leq 999,966,663,333 \\)\n- The function should return the sum of all semidivisible numbers up to the given limit.\n\n#### Example\n```python\nassert semidivisible_sum(15) == 30  # 8, 10, and 12 are semidivisible\nassert semidivisible_sum(1000) == 34825  # Sum of semidivisible numbers up to 1000\nassert semidivisible_sum(999_966_663_333) == 2480389586872  # Compute the sum for the given limit\n```\n\n#### Performance Requirement\nThe function should be efficient and should not take more than 1 minute to compute the result for the maximum input size.\n\n### Implementation Tips\n- Use the Sieve of Eratosthenes to generate prime numbers efficiently.\n- Ensure the function handles edge cases correctly, such as when the input is a perfect square."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are tasked with implementing a modified version of the Selection Sort algorithm. Your goal is to sort a list of integers in ascending order but with a twist: instead of sorting the entire list, you will sort only the even numbers in the list and leave the odd numbers in their original positions.\n\nWrite a function `custom_selection_sort` that takes a list of integers as input and returns a new list where all even numbers are sorted in ascending order, while all odd numbers remain in their original positions.\n\n**Requirements**:\n- The function should handle an empty list and return an empty list.\n- The function should handle a list with only odd numbers and return the same list.\n- The function should handle a list with only even numbers and return the sorted list.\n\n**Constraints**:\n- The input list will contain integers.\n- The input list can have a maximum length of 1000.\n\n**Example**:\n```python\n>>> custom_selection_sort([9, 4, 2, 1, 5, 3])\n[3, 4, 2, 1, 5, 9]\n```\n\n**Explanation**:\n- The odd numbers (9, 1, 5, 3) remain in their original positions.\n- The even numbers (4, 2) are sorted in ascending order (4, 2)."}], "metadata": {"prompt_id": "00000059", "row_id": 59, "seed_ids": [223], "mode": "algorithm", "instruction": "You are tasked with implementing a modified version of the Selection Sort algorithm. Your goal is to sort a list of integers in ascending order but with a twist: instead of sorting the entire list, you will sort only the even numbers in the list and leave the odd numbers in their original positions.\n\nWrite a function `custom_selection_sort` that takes a list of integers as input and returns a new list where all even numbers are sorted in ascending order, while all odd numbers remain in their original positions.\n\n**Requirements**:\n- The function should handle an empty list and return an empty list.\n- The function should handle a list with only odd numbers and return the same list.\n- The function should handle a list with only even numbers and return the sorted list.\n\n**Constraints**:\n- The input list will contain integers.\n- The input list can have a maximum length of 1000.\n\n**Example**:\n```python\n>>> custom_selection_sort([9, 4, 2, 1, 5, 3])\n[3, 4, 2, 1, 5, 9]\n```\n\n**Explanation**:\n- The odd numbers (9, 1, 5, 3) remain in their original positions.\n- The even numbers (4, 2) are sorted in ascending order (4, 2)."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are given the implementation of the extended Euclidean algorithm and a function to solve the Diophantine equation \\(a \\cdot x + b \\cdot y = c\\) for integer solutions. Your task is to implement a more generalized version of the `diophantine_all_soln` function, which finds all solutions to the equation within a specified range.\n\n**Problem Statement**:\nWrite a function `diophantine_all_values` that takes four integers \\(a\\), \\(b\\), \\(c\\), and an upper limit `upper_limit` (inclusive). The function should find all pairs \\((x, y)\\) of integers that satisfy the equation \\(a \\cdot x + b \\cdot y = c\\) within the range \\(-\\text{upper_limit} \\leq x, y \\leq \\text{upper_limit}\\).\n\n**Example**:\n```python\n# Example 1\na, b, c, upper_limit = 2, 3, 5, 5\ndiophantine_all_values(a, b, c, upper_limit)\n# Output:\n# [(-5, 5), (-4, 3), (-3, 1), (1, -4), (3, -2), (5, -1)]\n\n# Example 2\na, b, c, upper_limit = 6, 9, 3, 10\ndiophantine_all_values(a, b, c, upper_limit)\n# Output:\n# []\n```\n\n**Function Signature**:\n```python\ndef diophantine_all_values(a: int, b: int, c: int, upper_limit: int) -> List[Tuple[int, int]]:\n```\n\n**Constraints**:\n- \\(1 \\leq a, b, c \\leq 10^5\\)\n- \\(1 \\leq \\text{upper_limit} \\leq 10^3\\)\n\n**Note**:\nEnsure that your implementation is efficient and handles edge cases appropriately."}], "metadata": {"prompt_id": "00000060", "row_id": 60, "seed_ids": [924], "mode": "algorithm", "instruction": "You are given the implementation of the extended Euclidean algorithm and a function to solve the Diophantine equation \\(a \\cdot x + b \\cdot y = c\\) for integer solutions. Your task is to implement a more generalized version of the `diophantine_all_soln` function, which finds all solutions to the equation within a specified range.\n\n**Problem Statement**:\nWrite a function `diophantine_all_values` that takes four integers \\(a\\), \\(b\\), \\(c\\), and an upper limit `upper_limit` (inclusive). The function should find all pairs \\((x, y)\\) of integers that satisfy the equation \\(a \\cdot x + b \\cdot y = c\\) within the range \\(-\\text{upper_limit} \\leq x, y \\leq \\text{upper_limit}\\).\n\n**Example**:\n```python\n# Example 1\na, b, c, upper_limit = 2, 3, 5, 5\ndiophantine_all_values(a, b, c, upper_limit)\n# Output:\n# [(-5, 5), (-4, 3), (-3, 1), (1, -4), (3, -2), (5, -1)]\n\n# Example 2\na, b, c, upper_limit = 6, 9, 3, 10\ndiophantine_all_values(a, b, c, upper_limit)\n# Output:\n# []\n```\n\n**Function Signature**:\n```python\ndef diophantine_all_values(a: int, b: int, c: int, upper_limit: int) -> List[Tuple[int, int]]:\n```\n\n**Constraints**:\n- \\(1 \\leq a, b, c \\leq 10^5\\)\n- \\(1 \\leq \\text{upper_limit} \\leq 10^3\\)\n\n**Note**:\nEnsure that your implementation is efficient and handles edge cases appropriately."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are given a problem from Project Euler, where you need to find a special Pythagorean triplet. A Pythagorean triplet is a set of three natural numbers, \\(a < b < c\\), such that:\n\n- \\(a^2 + b^2 = c^2\\)\n- \\(a + b + c = N\\)\n\nYou need to write a Python function to find such a triplet and return the product \\(a \\times b \\times c\\).\n\n### Constraints\n\n- \\(3 \\leq N \\leq 1000\\)\n- \\(N\\) is a natural number.\n\n### Example\n\n- For \\(N = 1000\\), the function should return \\(31875000\\).\n\n### Task\n\nWrite a Python function `find_pythagorean_triplet_product(N: int) -> int` that returns the product of the Pythagorean triplet for a given \\(N\\).\n\n### Guidelines\n\n- You are not allowed to use the provided code snippet directly.\n- Ensure your solution is efficient and handles the constraints effectively.\n\n### Implementation\n\n```python\ndef find_pythagorean_triplet_product(N: int) -> int:\n    # Your implementation here\n    pass\n```\n\n### Example Usage\n\n```python\nassert find_pythagorean_triplet_product(12) == 60\nassert find_pythagorean_triplet_product(1000) == 31875000\n```\n\n### Explanation\n\nThis problem requires understanding the properties of Pythagorean triplets and implementing an efficient algorithm to find the triplet. The brute-force approach can be improved using mathematical properties or constraints."}], "metadata": {"prompt_id": "00000061", "row_id": 61, "seed_ids": [465], "mode": "algorithm", "instruction": "You are given a problem from Project Euler, where you need to find a special Pythagorean triplet. A Pythagorean triplet is a set of three natural numbers, \\(a < b < c\\), such that:\n\n- \\(a^2 + b^2 = c^2\\)\n- \\(a + b + c = N\\)\n\nYou need to write a Python function to find such a triplet and return the product \\(a \\times b \\times c\\).\n\n### Constraints\n\n- \\(3 \\leq N \\leq 1000\\)\n- \\(N\\) is a natural number.\n\n### Example\n\n- For \\(N = 1000\\), the function should return \\(31875000\\).\n\n### Task\n\nWrite a Python function `find_pythagorean_triplet_product(N: int) -> int` that returns the product of the Pythagorean triplet for a given \\(N\\).\n\n### Guidelines\n\n- You are not allowed to use the provided code snippet directly.\n- Ensure your solution is efficient and handles the constraints effectively.\n\n### Implementation\n\n```python\ndef find_pythagorean_triplet_product(N: int) -> int:\n    # Your implementation here\n    pass\n```\n\n### Example Usage\n\n```python\nassert find_pythagorean_triplet_product(12) == 60\nassert find_pythagorean_triplet_product(1000) == 31875000\n```\n\n### Explanation\n\nThis problem requires understanding the properties of Pythagorean triplets and implementing an efficient algorithm to find the triplet. The brute-force approach can be improved using mathematical properties or constraints."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are given a Base85 (Ascii85) encoder and decoder implemented in Python. Your task is to optimize the existing code by reducing the time complexity and space complexity of the encoding and decoding functions. Specifically, you need to:\n- Implement optimizations to reduce the time complexity and space complexity of the encoding and decoding functions.\n- Ensure that the functions handle edge cases correctly and provide the same output as the original functions.\n\n**Input**:\n- `data`: A `bytes` object representing the binary data to be encoded or decoded.\n\n**Output**:\n- For `ascii85_encode`, return the Base85 encoded `bytes` object.\n- For `ascii85_decode`, return the original binary data as a `bytes` object.\n\n**Constraints**:\n- The input binary data length will be between 0 and 1MB.\n- The functions should handle all edge cases correctly, including null values and padding.\n\n**Example**:\n```python\n# Example usage\nencoded_data = ascii85_encode(b\"12345\")\ndecoded_data = ascii85_decode(encoded_data)\nprint(encoded_data)  # b'0etOA2#'\nprint(decoded_data)  # b'12345'\n```\n\n**Performance Requirement**:\n- The optimized functions should run within 1 second for inputs up to 1MB in size."}], "metadata": {"prompt_id": "00000062", "row_id": 62, "seed_ids": [47], "mode": "algorithm", "instruction": "You are given a Base85 (Ascii85) encoder and decoder implemented in Python. Your task is to optimize the existing code by reducing the time complexity and space complexity of the encoding and decoding functions. Specifically, you need to:\n- Implement optimizations to reduce the time complexity and space complexity of the encoding and decoding functions.\n- Ensure that the functions handle edge cases correctly and provide the same output as the original functions.\n\n**Input**:\n- `data`: A `bytes` object representing the binary data to be encoded or decoded.\n\n**Output**:\n- For `ascii85_encode`, return the Base85 encoded `bytes` object.\n- For `ascii85_decode`, return the original binary data as a `bytes` object.\n\n**Constraints**:\n- The input binary data length will be between 0 and 1MB.\n- The functions should handle all edge cases correctly, including null values and padding.\n\n**Example**:\n```python\n# Example usage\nencoded_data = ascii85_encode(b\"12345\")\ndecoded_data = ascii85_decode(encoded_data)\nprint(encoded_data)  # b'0etOA2#'\nprint(decoded_data)  # b'12345'\n```\n\n**Performance Requirement**:\n- The optimized functions should run within 1 second for inputs up to 1MB in size."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are tasked with extending the functionality of a 3D rendering system. Your goal is to implement a function that combines the functionalities of the `convert_to_2d` and `rotate` functions to convert a 3D point to a 2D drawable point after applying a specified rotation. Additionally, you need to handle invalid input cases and provide clear error messages.\n\n### Function Signature\n```python\ndef rotate_and_project(x: float, y: float, z: float, axis: str, angle: float, scale: float, distance: float) -> tuple[float, float]:\n    \"\"\"\n    Rotate a 3D point around a specified axis and then convert it to a 2D point for rendering.\n\n    :param x: x-coordinate of the 3D point.\n    :param y: y-coordinate of the 3D point.\n    :param z: z-coordinate of the 3D point.\n    :param axis: Axis around which to rotate ('x', 'y', 'z').\n    :param angle: Angle of rotation in degrees.\n    :param scale: Scale factor for the 2D projection.\n    :param distance: Viewing distance for the perspective projection.\n    :return: A tuple (projected_x, projected_y) representing the 2D point.\n\n    Example:\n    >>> rotate_and_project(1.0, 2.0, 3.0, 'y', 90.0, 10.0, 10.0)\n    (7.6923076923076925, 15.384615384615385)\n    \"\"\"\n```\n\n### Constraints\n* The input values must be within the following ranges:\n  - \\(-1000 \\leq x, y, z \\leq 1000\\)\n  - \\(0 \\leq angle \\leq 360\\)\n  - \\(1 \\leq scale, distance \\leq 1000\\)\n\n### Edge Cases\n- Handle invalid input types (must be float or int) and values (e.g., out-of-range angles).\n- Handle the case when the rotation axis is not one of 'x', 'y', or 'z'.\n- Ensure that the function returns correct results even for large or small input values.\n\n### Performance Requirements\n- The function should be efficient and handle the input values within the specified constraints without performance issues.\n\n### Example\n```python\n# Example usage\nprint(rotate_and_project(1.0, 2.0, 3.0, 'y', 90.0, 10.0, 10.0))\n# Output: (7.6923076923076925, 15.384615384615385)\n```"}], "metadata": {"prompt_id": "00000063", "row_id": 63, "seed_ids": [429], "mode": "algorithm", "instruction": "You are tasked with extending the functionality of a 3D rendering system. Your goal is to implement a function that combines the functionalities of the `convert_to_2d` and `rotate` functions to convert a 3D point to a 2D drawable point after applying a specified rotation. Additionally, you need to handle invalid input cases and provide clear error messages.\n\n### Function Signature\n```python\ndef rotate_and_project(x: float, y: float, z: float, axis: str, angle: float, scale: float, distance: float) -> tuple[float, float]:\n    \"\"\"\n    Rotate a 3D point around a specified axis and then convert it to a 2D point for rendering.\n\n    :param x: x-coordinate of the 3D point.\n    :param y: y-coordinate of the 3D point.\n    :param z: z-coordinate of the 3D point.\n    :param axis: Axis around which to rotate ('x', 'y', 'z').\n    :param angle: Angle of rotation in degrees.\n    :param scale: Scale factor for the 2D projection.\n    :param distance: Viewing distance for the perspective projection.\n    :return: A tuple (projected_x, projected_y) representing the 2D point.\n\n    Example:\n    >>> rotate_and_project(1.0, 2.0, 3.0, 'y', 90.0, 10.0, 10.0)\n    (7.6923076923076925, 15.384615384615385)\n    \"\"\"\n```\n\n### Constraints\n* The input values must be within the following ranges:\n  - \\(-1000 \\leq x, y, z \\leq 1000\\)\n  - \\(0 \\leq angle \\leq 360\\)\n  - \\(1 \\leq scale, distance \\leq 1000\\)\n\n### Edge Cases\n- Handle invalid input types (must be float or int) and values (e.g., out-of-range angles).\n- Handle the case when the rotation axis is not one of 'x', 'y', or 'z'.\n- Ensure that the function returns correct results even for large or small input values.\n\n### Performance Requirements\n- The function should be efficient and handle the input values within the specified constraints without performance issues.\n\n### Example\n```python\n# Example usage\nprint(rotate_and_project(1.0, 2.0, 3.0, 'y', 90.0, 10.0, 10.0))\n# Output: (7.6923076923076925, 15.384615384615385)\n```"}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Question: Enhanced Factorial Function\n\nYou are tasked with enhancing the `factorial` function to handle a broader range of inputs and provide additional utility.\n\n**Scenario**: You are developing a library that needs to compute factorials, but you want to make the function more robust and versatile. Specifically, you need to implement the following features:\n\n1. **Handle Large Inputs**: The function should be able to handle large inputs within the range of a 64-bit integer without causing overflow.\n2. **Handle Floating-Point Precision**: Implement a method to approximate the factorial of floating-point numbers using Stirling's approximation.\n3. **Return Results as a String**: The function should return the result as a string to handle very large numbers that cannot be represented as an integer.\n\nImplement the function `enhanced_factorial` that meets the above requirements.\n\n#### Function Signature\n```python\ndef enhanced_factorial(number: float) -> str:\n    pass\n```\n\n#### Constraints\n- \\(0 \\leq \\text{number} \\leq 1000\\)\n- The function should handle both integer and floating-point inputs.\n- For floating-point inputs, the result should be rounded to 3 decimal places.\n\n#### Performance Requirements\n- The function should handle large inputs efficiently and within a reasonable time limit.\n\n#### Examples\n```python\nprint(enhanced_factorial(5))  # \"120\"\nprint(enhanced_factorial(20))  # \"2432902008176640000\"\nprint(enhanced_factorial(0.5))  # \"1.128\"\nprint(enhanced_factorial(3.5))  # \"11.632\"\n```\n\n#### Notes\n- For integer inputs, the function should perform exact computation and return the result as a string.\n- For floating-point inputs, use Stirling's approximation to compute the factorial and round the result to 3 decimal places."}], "metadata": {"prompt_id": "00000064", "row_id": 64, "seed_ids": [694], "mode": "algorithm", "instruction": "### Question: Enhanced Factorial Function\n\nYou are tasked with enhancing the `factorial` function to handle a broader range of inputs and provide additional utility.\n\n**Scenario**: You are developing a library that needs to compute factorials, but you want to make the function more robust and versatile. Specifically, you need to implement the following features:\n\n1. **Handle Large Inputs**: The function should be able to handle large inputs within the range of a 64-bit integer without causing overflow.\n2. **Handle Floating-Point Precision**: Implement a method to approximate the factorial of floating-point numbers using Stirling's approximation.\n3. **Return Results as a String**: The function should return the result as a string to handle very large numbers that cannot be represented as an integer.\n\nImplement the function `enhanced_factorial` that meets the above requirements.\n\n#### Function Signature\n```python\ndef enhanced_factorial(number: float) -> str:\n    pass\n```\n\n#### Constraints\n- \\(0 \\leq \\text{number} \\leq 1000\\)\n- The function should handle both integer and floating-point inputs.\n- For floating-point inputs, the result should be rounded to 3 decimal places.\n\n#### Performance Requirements\n- The function should handle large inputs efficiently and within a reasonable time limit.\n\n#### Examples\n```python\nprint(enhanced_factorial(5))  # \"120\"\nprint(enhanced_factorial(20))  # \"2432902008176640000\"\nprint(enhanced_factorial(0.5))  # \"1.128\"\nprint(enhanced_factorial(3.5))  # \"11.632\"\n```\n\n#### Notes\n- For integer inputs, the function should perform exact computation and return the result as a string.\n- For floating-point inputs, use Stirling's approximation to compute the factorial and round the result to 3 decimal places."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Question: Optimizing Odd-Even Transposition Sort\n\nYou are given a list of integers that may contain duplicates. Your task is to implement an optimized version of the Odd-Even Transposition Sort (OETS) algorithm that sorts the list in ascending order. The algorithm should be fully parallel and handle the list in a way that minimizes the number of synchronization points and communication overhead.\n\n#### Requirements:\n\n1. **Input**: A list of integers `arr` (1 \u2264 len(arr) \u2264 10^5).\n2. **Output**: Return the sorted list of integers.\n3. **Constraints**:\n   - The list can contain up to 100,000 integers.\n   - The integers can range from -10^9 to 10^9.\n4. **Performance Requirement**: The algorithm should be as efficient as possible in terms of both time and space complexity.\n\n#### Implementation Notes:\n\n- Use Python's `multiprocessing` module to implement the algorithm.\n- Ensure that the algorithm is fully parallel and minimizes synchronization points.\n- Handle edge cases such as an empty list or a list with a single element.\n\n#### Scenario:\n\nYou are part of a high-performance computing team that needs to sort large datasets efficiently. Your task is to optimize the OETS algorithm to handle these large datasets effectively.\n\n#### Example:\n\n```python\ndef optimized_odd_even_transposition(arr):\n    # Your implementation here\n    pass\n\n# Test the function\nprint(optimized_odd_even_transposition([4, 1, 3, 2]))  # Output: [1, 2, 3, 4]\nprint(optimized_odd_even_transposition([-5, 9, -2, 10, -1]))  # Output: [-5, -2, -1, 9, 10]\n```\n\n#### Additional Challenge:\n\n- Optimize the algorithm further by reducing the number of synchronization points and communication overhead.\n\n---\n\nImplement the `optimized_odd_even_transposition` function to meet the requirements."}], "metadata": {"prompt_id": "00000065", "row_id": 65, "seed_ids": [203], "mode": "algorithm", "instruction": "### Question: Optimizing Odd-Even Transposition Sort\n\nYou are given a list of integers that may contain duplicates. Your task is to implement an optimized version of the Odd-Even Transposition Sort (OETS) algorithm that sorts the list in ascending order. The algorithm should be fully parallel and handle the list in a way that minimizes the number of synchronization points and communication overhead.\n\n#### Requirements:\n\n1. **Input**: A list of integers `arr` (1 \u2264 len(arr) \u2264 10^5).\n2. **Output**: Return the sorted list of integers.\n3. **Constraints**:\n   - The list can contain up to 100,000 integers.\n   - The integers can range from -10^9 to 10^9.\n4. **Performance Requirement**: The algorithm should be as efficient as possible in terms of both time and space complexity.\n\n#### Implementation Notes:\n\n- Use Python's `multiprocessing` module to implement the algorithm.\n- Ensure that the algorithm is fully parallel and minimizes synchronization points.\n- Handle edge cases such as an empty list or a list with a single element.\n\n#### Scenario:\n\nYou are part of a high-performance computing team that needs to sort large datasets efficiently. Your task is to optimize the OETS algorithm to handle these large datasets effectively.\n\n#### Example:\n\n```python\ndef optimized_odd_even_transposition(arr):\n    # Your implementation here\n    pass\n\n# Test the function\nprint(optimized_odd_even_transposition([4, 1, 3, 2]))  # Output: [1, 2, 3, 4]\nprint(optimized_odd_even_transposition([-5, 9, -2, 10, -1]))  # Output: [-5, -2, -1, 9, 10]\n```\n\n#### Additional Challenge:\n\n- Optimize the algorithm further by reducing the number of synchronization points and communication overhead.\n\n---\n\nImplement the `optimized_odd_even_transposition` function to meet the requirements."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Context\nYou are working on a project to simulate the behavior of an astable 555 timer circuit. The objective is to implement a function that not only calculates the frequency and duty cycle of the timer but also logs the calculation details.\n\n### Requirements\nWrite a Python function `simulate_555_timer` that takes the values of R1, R2, and C1 as inputs and returns a dictionary containing the calculated frequency, duty cycle, and a formatted string detailing the calculation steps. Additionally, the function should handle edge cases where the input values are not positive.\n\n#### Function Signature\n```python\ndef simulate_555_timer(resistance_1: float, resistance_2: float, capacitance: float) -> dict:\n    \"\"\"\n    Calculate the frequency and duty cycle of an astable 555 timer and log the calculation steps.\n\n    :param resistance_1: First resistance value (in ohms)\n    :param resistance_2: Second resistance value (in ohms)\n    :param capacitance: Capacitance value (in Microfarads)\n    :return: A dictionary containing 'frequency', 'duty_cycle', and 'details' keys.\n             'frequency' and 'duty_cycle' will be the calculated values.\n             'details' will be a string detailing the calculation steps.\n\n    Usage examples:\n    >>> simulate_555_timer(resistance_1=45, resistance_2=45, capacitance=7)\n    {\n        'frequency': 1523809.5238095239,\n        'duty_cycle': 66.66666666666666,\n        'details': 'Frequency: 1.44 / [(45 + 2 * 45) * 7] * 10^6 = 1523809.5238095239 Hz, Duty Cycle: (45 + 45) / (45 + 2 * 45) * 100 = 66.66666666666666 %'\n    }\n    >>> simulate_555_timer(resistance_1=356, resistance_2=234, capacitance=976)\n    {\n        'frequency': 1790.5459175553078,\n        'duty_cycle': 71.60194174757282,\n        'details': 'Frequency: 1.44 / [(356 + 2 * 234) * 976] * 10^6 = 1790.5459175553078 Hz, Duty Cycle: (356 + 234) / (356 + 2 * 234) * 100 = 71.60194174757282 %'\n    }\n    >>> simulate_555_timer(resistance_1=-1, resistance_2=45, capacitance=7)\n    {\n        'error': 'All values must be positive'\n    }\n    >>> simulate_555_timer(resistance_1=0, resistance_2=0, capacitance=0)\n    {\n        'error': 'All values must be positive'\n    }\n    \"\"\"\n```\n\n#### Input and Output Formats\n- **Input**:\n  - `resistance_1`: A float representing the first resistance value.\n  - `resistance_2`: A float representing the second resistance value.\n  - `capacitance`: A float representing the capacitance value.\n- **Output**:\n  - If all values are positive, the function returns a dictionary with the calculated frequency and duty cycle, and a formatted details string.\n  - If any value is not positive, the function returns a dictionary with an error message.\n\n#### Constraints\n- All input values are positive floating-point numbers.\n\n#### Performance Requirements\n- The function should perform the calculation in constant time, O(1).\n\n### Implementation\n```python\nfrom typing import Dict\n\ndef simulate_555_timer(resistance_1: float, resistance_2: float, capacitance: float) -> Dict[str, float or str]:\n    if resistance_1 <= 0 or resistance_2 <= 0 or capacitance <= 0:\n        return {'error': 'All values must be positive'}\n\n    frequency = (1.44 / ((resistance_1 + 2 * resistance_2) * capacitance)) * 10**6\n    duty_cycle = (resistance_1 + resistance_2) / (resistance_1 + 2 * resistance_2) * 100\n\n    details = f'Frequency: 1.44 / [( {resistance_1} + 2 * {resistance_2} ) * {capacitance}] * 10^6 = {frequency:.6f} Hz, Duty Cycle: ( {resistance_1} + {resistance_2} ) / ( {resistance_1} + 2 * {resistance_2} ) * 100 = {duty_cycle:.6f} %'\n\n    return {'frequency': frequency, 'duty_cycle': duty_cycle, 'details': details}\n\n```"}], "metadata": {"prompt_id": "00000066", "row_id": 66, "seed_ids": [193], "mode": "algorithm", "instruction": "### Context\nYou are working on a project to simulate the behavior of an astable 555 timer circuit. The objective is to implement a function that not only calculates the frequency and duty cycle of the timer but also logs the calculation details.\n\n### Requirements\nWrite a Python function `simulate_555_timer` that takes the values of R1, R2, and C1 as inputs and returns a dictionary containing the calculated frequency, duty cycle, and a formatted string detailing the calculation steps. Additionally, the function should handle edge cases where the input values are not positive.\n\n#### Function Signature\n```python\ndef simulate_555_timer(resistance_1: float, resistance_2: float, capacitance: float) -> dict:\n    \"\"\"\n    Calculate the frequency and duty cycle of an astable 555 timer and log the calculation steps.\n\n    :param resistance_1: First resistance value (in ohms)\n    :param resistance_2: Second resistance value (in ohms)\n    :param capacitance: Capacitance value (in Microfarads)\n    :return: A dictionary containing 'frequency', 'duty_cycle', and 'details' keys.\n             'frequency' and 'duty_cycle' will be the calculated values.\n             'details' will be a string detailing the calculation steps.\n\n    Usage examples:\n    >>> simulate_555_timer(resistance_1=45, resistance_2=45, capacitance=7)\n    {\n        'frequency': 1523809.5238095239,\n        'duty_cycle': 66.66666666666666,\n        'details': 'Frequency: 1.44 / [(45 + 2 * 45) * 7] * 10^6 = 1523809.5238095239 Hz, Duty Cycle: (45 + 45) / (45 + 2 * 45) * 100 = 66.66666666666666 %'\n    }\n    >>> simulate_555_timer(resistance_1=356, resistance_2=234, capacitance=976)\n    {\n        'frequency': 1790.5459175553078,\n        'duty_cycle': 71.60194174757282,\n        'details': 'Frequency: 1.44 / [(356 + 2 * 234) * 976] * 10^6 = 1790.5459175553078 Hz, Duty Cycle: (356 + 234) / (356 + 2 * 234) * 100 = 71.60194174757282 %'\n    }\n    >>> simulate_555_timer(resistance_1=-1, resistance_2=45, capacitance=7)\n    {\n        'error': 'All values must be positive'\n    }\n    >>> simulate_555_timer(resistance_1=0, resistance_2=0, capacitance=0)\n    {\n        'error': 'All values must be positive'\n    }\n    \"\"\"\n```\n\n#### Input and Output Formats\n- **Input**:\n  - `resistance_1`: A float representing the first resistance value.\n  - `resistance_2`: A float representing the second resistance value.\n  - `capacitance`: A float representing the capacitance value.\n- **Output**:\n  - If all values are positive, the function returns a dictionary with the calculated frequency and duty cycle, and a formatted details string.\n  - If any value is not positive, the function returns a dictionary with an error message.\n\n#### Constraints\n- All input values are positive floating-point numbers.\n\n#### Performance Requirements\n- The function should perform the calculation in constant time, O(1).\n\n### Implementation\n```python\nfrom typing import Dict\n\ndef simulate_555_timer(resistance_1: float, resistance_2: float, capacitance: float) -> Dict[str, float or str]:\n    if resistance_1 <= 0 or resistance_2 <= 0 or capacitance <= 0:\n        return {'error': 'All values must be positive'}\n\n    frequency = (1.44 / ((resistance_1 + 2 * resistance_2) * capacitance)) * 10**6\n    duty_cycle = (resistance_1 + resistance_2) / (resistance_1 + 2 * resistance_2) * 100\n\n    details = f'Frequency: 1.44 / [( {resistance_1} + 2 * {resistance_2} ) * {capacitance}] * 10^6 = {frequency:.6f} Hz, Duty Cycle: ( {resistance_1} + {resistance_2} ) / ( {resistance_1} + 2 * {resistance_2} ) * 100 = {duty_cycle:.6f} %'\n\n    return {'frequency': frequency, 'duty_cycle': duty_cycle, 'details': details}\n\n```"}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:<|Analysis Begin|>\n\n### Core Identification\n- **Algorithm/Data Structure**: This problem involves finding the maximum product of 13 adjacent digits in a given string of digits. It does not rely on a specific algorithm or data structure but rather uses a straightforward approach to iterate through the string and compute products.\n- **Complexity**:\n  - **Time Complexity**: \\(O(n)\\), where \\(n\\) is the length of the string. The algorithm iterates through the string once and computes the product for each possible 13-digit segment.\n  - **Space Complexity**: \\(O(1)\\), as the solution uses a constant amount of additional space.\n- **Principles**: The core mechanism involves iterating through the string, computing the product of each 13-digit segment, and keeping track of the maximum product encountered.\n\n### Characteristics & Applications\n- **Properties**: The problem is straightforward but requires careful handling of digit multiplication and tracking.\n- **Common Use Cases**: This type of problem is common in programming challenges that involve string manipulation and arithmetic operations.\n- **Strengths/Limitations**:\n  - **Strengths**: The solution is simple and efficient, leveraging the `reduce` function to compute the product of a segment.\n  - **Limitations**: The solution is highly dependent on the string input format and could be more robust with additional validation.\n\n### Implementation Challenges\n- **Edge Cases**:\n  - The input string may not contain enough digits to form a 13-digit segment, although the provided input guarantees at least 13 digits.\n  - The input string may contain non-numeric characters, although the provided input does not.\n- **Performance Bottlenecks**: The bottleneck is the repeated multiplication of 13 digits, which is performed in a loop.\n- **Error Scenarios**:\n  - Incorrect handling of digit conversion (e.g., trying to multiply non-numeric characters).\n  - Off-by-one errors in the loop bounds.\n- **Optimization Points**: Optimizing the product calculation by leveraging properties of multiplication, but in this case, the provided implementation is already quite efficient.\n\n<|Analysis End|>\n\n<|Question Begin|>\n\n### Problem Statement\n\nYou are given a very large number represented as a string. Your task is to find the 13 adjacent digits within this string that have the greatest product and return this product.\n\n#### Example\n\n```python\nn = \"13978431290823798458352374\"\nresult = find_max_product(n)  # 609638400\n```\n\n#### Guidelines\n\n- The input string will contain only digits.\n- The length of the input string will be at least 14 to ensure there are enough digits to form a 13-digit segment.\n- The solution should be efficient and handle large input strings without performance issues.\n\n#### Constraints\n\n- \\(1 \\leq \\text{length of the input string} \\leq 10^6\\)\n\n#### Task\n\nImplement the function `find_max_product` that takes a string `n` as input and returns the maximum product of any 13 adjacent digits in the string.\n\n```python\ndef find_max_product(n: str) -> int:\n    \"\"\"\n    Find the 13 adjacent digits in the string n that have the greatest product and return it.\n\n    :param n: A string representing a large number.\n    :return: The maximum product of any 13 adjacent digits in the string n.\n    \"\"\"\n\n    # Your implementation goes here\n\n```\n\n#### Example\n\n```python\nn = \"7316717653133062491922511967442657474235534919493496983520312774506326239578318016984801869478851843858615607891129494954595017379583319528532088055111254069874715852386305071569329096329522744304355766896648950445244523161731856403098711121722383113622298934233803081353362766142828064444866452387493035890729629049156044077239071381051585930796086670172427121883998797908792274921901"}], "metadata": {"prompt_id": "00000067", "row_id": 67, "seed_ids": [613], "mode": "algorithm", "instruction": "<|Analysis Begin|>\n\n### Core Identification\n- **Algorithm/Data Structure**: This problem involves finding the maximum product of 13 adjacent digits in a given string of digits. It does not rely on a specific algorithm or data structure but rather uses a straightforward approach to iterate through the string and compute products.\n- **Complexity**:\n  - **Time Complexity**: \\(O(n)\\), where \\(n\\) is the length of the string. The algorithm iterates through the string once and computes the product for each possible 13-digit segment.\n  - **Space Complexity**: \\(O(1)\\), as the solution uses a constant amount of additional space.\n- **Principles**: The core mechanism involves iterating through the string, computing the product of each 13-digit segment, and keeping track of the maximum product encountered.\n\n### Characteristics & Applications\n- **Properties**: The problem is straightforward but requires careful handling of digit multiplication and tracking.\n- **Common Use Cases**: This type of problem is common in programming challenges that involve string manipulation and arithmetic operations.\n- **Strengths/Limitations**:\n  - **Strengths**: The solution is simple and efficient, leveraging the `reduce` function to compute the product of a segment.\n  - **Limitations**: The solution is highly dependent on the string input format and could be more robust with additional validation.\n\n### Implementation Challenges\n- **Edge Cases**:\n  - The input string may not contain enough digits to form a 13-digit segment, although the provided input guarantees at least 13 digits.\n  - The input string may contain non-numeric characters, although the provided input does not.\n- **Performance Bottlenecks**: The bottleneck is the repeated multiplication of 13 digits, which is performed in a loop.\n- **Error Scenarios**:\n  - Incorrect handling of digit conversion (e.g., trying to multiply non-numeric characters).\n  - Off-by-one errors in the loop bounds.\n- **Optimization Points**: Optimizing the product calculation by leveraging properties of multiplication, but in this case, the provided implementation is already quite efficient.\n\n<|Analysis End|>\n\n<|Question Begin|>\n\n### Problem Statement\n\nYou are given a very large number represented as a string. Your task is to find the 13 adjacent digits within this string that have the greatest product and return this product.\n\n#### Example\n\n```python\nn = \"13978431290823798458352374\"\nresult = find_max_product(n)  # 609638400\n```\n\n#### Guidelines\n\n- The input string will contain only digits.\n- The length of the input string will be at least 14 to ensure there are enough digits to form a 13-digit segment.\n- The solution should be efficient and handle large input strings without performance issues.\n\n#### Constraints\n\n- \\(1 \\leq \\text{length of the input string} \\leq 10^6\\)\n\n#### Task\n\nImplement the function `find_max_product` that takes a string `n` as input and returns the maximum product of any 13 adjacent digits in the string.\n\n```python\ndef find_max_product(n: str) -> int:\n    \"\"\"\n    Find the 13 adjacent digits in the string n that have the greatest product and return it.\n\n    :param n: A string representing a large number.\n    :return: The maximum product of any 13 adjacent digits in the string n.\n    \"\"\"\n\n    # Your implementation goes here\n\n```\n\n#### Example\n\n```python\nn = \"7316717653133062491922511967442657474235534919493496983520312774506326239578318016984801869478851843858615607891129494954595017379583319528532088055111254069874715852386305071569329096329522744304355766896648950445244523161731856403098711121722383113622298934233803081353362766142828064444866452387493035890729629049156044077239071381051585930796086670172427121883998797908792274921901"}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:**Scenario**: You are working on a machine learning project that requires an activation function for a neural network layer. The Binary Step function is a simple yet effective choice for your needs. However, you want to extend its functionality to handle multiple activation functions for different layers.\n\n**Task**: Implement a more generalized version of the activation function that can switch between different activation functions based on a given input vector. Specifically, your task is to implement a function `activation_function` that takes an input vector and a mode as input and applies the corresponding activation function.\n\n**Function Signature**: `def activation_function(vector: np.ndarray, mode: str) -> np.ndarray`\n\n- **Input**:\n  - `vector` (ndarray): A numpy array of numeric values.\n  - `mode` (str): A string indicating the activation mode to be used. The possible values are:\n    - `'binary_step'`: Applies the binary step function.\n    - `'relu'`: Applies the Rectified Linear Unit (ReLU) activation function, which returns 0 for negative values and the input value for non-negative values.\n    - `'sigmoid'`: Applies the sigmoid activation function, which maps the input to a range between 0 and 1.\n\n- **Output**:\n  - A numpy array `vector` after applying the specified activation function.\n\n- **Constraints**:\n  - The input vector will always be a 1D numpy array.\n  - The mode will always be one of the specified strings.\n\n- **Performance Requirement**:\n  - The function should be optimized for performance, especially for large input vectors.\n\n**Examples**:\n```python\nimport numpy as np\n\n# Binary Step Function\nvector = np.array([-1.2, 0, 2, 1.45, -3.7, 0.3])\nprint(activation_function(vector, 'binary_step'))\n# Output: array([0, 1, 1, 1, 0, 1])\n\n# ReLU Function\nprint(activation_function(np.array([-1, 0, 1, -2, 2]), 'relu'))\n# Output: array([0, 0, 1, 0, 2])\n\n# Sigmoid Function\nprint(activation_function(np.array([-1, 0, 1]), 'sigmoid'))\n# Output: array([0.26894142, 0.5         , 0.73105858])\n```"}], "metadata": {"prompt_id": "00000068", "row_id": 68, "seed_ids": [910], "mode": "algorithm", "instruction": "**Scenario**: You are working on a machine learning project that requires an activation function for a neural network layer. The Binary Step function is a simple yet effective choice for your needs. However, you want to extend its functionality to handle multiple activation functions for different layers.\n\n**Task**: Implement a more generalized version of the activation function that can switch between different activation functions based on a given input vector. Specifically, your task is to implement a function `activation_function` that takes an input vector and a mode as input and applies the corresponding activation function.\n\n**Function Signature**: `def activation_function(vector: np.ndarray, mode: str) -> np.ndarray`\n\n- **Input**:\n  - `vector` (ndarray): A numpy array of numeric values.\n  - `mode` (str): A string indicating the activation mode to be used. The possible values are:\n    - `'binary_step'`: Applies the binary step function.\n    - `'relu'`: Applies the Rectified Linear Unit (ReLU) activation function, which returns 0 for negative values and the input value for non-negative values.\n    - `'sigmoid'`: Applies the sigmoid activation function, which maps the input to a range between 0 and 1.\n\n- **Output**:\n  - A numpy array `vector` after applying the specified activation function.\n\n- **Constraints**:\n  - The input vector will always be a 1D numpy array.\n  - The mode will always be one of the specified strings.\n\n- **Performance Requirement**:\n  - The function should be optimized for performance, especially for large input vectors.\n\n**Examples**:\n```python\nimport numpy as np\n\n# Binary Step Function\nvector = np.array([-1.2, 0, 2, 1.45, -3.7, 0.3])\nprint(activation_function(vector, 'binary_step'))\n# Output: array([0, 1, 1, 1, 0, 1])\n\n# ReLU Function\nprint(activation_function(np.array([-1, 0, 1, -2, 2]), 'relu'))\n# Output: array([0, 0, 1, 0, 2])\n\n# Sigmoid Function\nprint(activation_function(np.array([-1, 0, 1]), 'sigmoid'))\n# Output: array([0.26894142, 0.5         , 0.73105858])\n```"}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Task: Implement a Simplified K-Means Clustering Algorithm Using TensorFlow\n\nYou are tasked with implementing a simplified version of the K-Means clustering algorithm using TensorFlow for a given dataset. The goal is to partition a set of data points into a specified number of clusters based on their proximity to the cluster centroids.\n\n#### Scenario\nYou are working on a dataset of customer transaction records and need to segment the customers into a specified number of clusters for targeted marketing campaigns. Your task is to implement the K-Means clustering algorithm to achieve this.\n\n#### Input\n- `vectors`: A 2D NumPy array of shape `(n, d)`, where `n` is the number of data points and `d` is the dimensionality of each data point.\n- `noofclusters`: An integer indicating the number of clusters to form.\n\n#### Output\n- `centroids`: A 2D NumPy array of shape `(k, d)`, where `k` is the number of clusters and `d` is the dimensionality of each centroid.\n- `assignments`: A list of integers of length `n`, where each integer represents the cluster assignment of the corresponding data point from `vectors`.\n\n#### Constraints\n- The number of clusters `noofclusters` should be less than the number of data points `n`.\n- The dimensionality `d` of the data points should be greater than 0.\n\n#### Performance Requirements\n- The implementation should be efficient and handle large datasets (e.g., `n` > 10,000 and `d` > 10).\n\n#### Implementation Guidelines\n1. Initialize the centroids randomly from the dataset.\n2. Perform the Expectation step: Assign each data point to the nearest centroid.\n3. Perform the Maximization step: Update the centroids to be the mean of the assigned data points.\n4. Repeat steps 2 and 3 for a fixed number of iterations (e.g., 100).\n5. Return the final centroids and assignments.\n\n#### Example\n```python\nimport numpy as np\nfrom sklearn.datasets import make_blobs\n\n# Generate sample data\nvectors, _ = make_blobs(n_samples=1000, centers=5, n_features=2, random_state=42)\nnoofclusters = 5\n\n# Implement the K-Means clustering algorithm\ncentroids, assignments = simplified_k_means_clustering(vectors, noofclusters)\n\nprint(\"Centroids:\", centroids)\nprint(\"Assignments:\", assignments)\n```\n\n#### Notes\n- You should not use any external packages other than TensorFlow and NumPy.\n- Ensure that your implementation is self-contained and clear."}], "metadata": {"prompt_id": "00000069", "row_id": 69, "seed_ids": [18], "mode": "algorithm", "instruction": "### Task: Implement a Simplified K-Means Clustering Algorithm Using TensorFlow\n\nYou are tasked with implementing a simplified version of the K-Means clustering algorithm using TensorFlow for a given dataset. The goal is to partition a set of data points into a specified number of clusters based on their proximity to the cluster centroids.\n\n#### Scenario\nYou are working on a dataset of customer transaction records and need to segment the customers into a specified number of clusters for targeted marketing campaigns. Your task is to implement the K-Means clustering algorithm to achieve this.\n\n#### Input\n- `vectors`: A 2D NumPy array of shape `(n, d)`, where `n` is the number of data points and `d` is the dimensionality of each data point.\n- `noofclusters`: An integer indicating the number of clusters to form.\n\n#### Output\n- `centroids`: A 2D NumPy array of shape `(k, d)`, where `k` is the number of clusters and `d` is the dimensionality of each centroid.\n- `assignments`: A list of integers of length `n`, where each integer represents the cluster assignment of the corresponding data point from `vectors`.\n\n#### Constraints\n- The number of clusters `noofclusters` should be less than the number of data points `n`.\n- The dimensionality `d` of the data points should be greater than 0.\n\n#### Performance Requirements\n- The implementation should be efficient and handle large datasets (e.g., `n` > 10,000 and `d` > 10).\n\n#### Implementation Guidelines\n1. Initialize the centroids randomly from the dataset.\n2. Perform the Expectation step: Assign each data point to the nearest centroid.\n3. Perform the Maximization step: Update the centroids to be the mean of the assigned data points.\n4. Repeat steps 2 and 3 for a fixed number of iterations (e.g., 100).\n5. Return the final centroids and assignments.\n\n#### Example\n```python\nimport numpy as np\nfrom sklearn.datasets import make_blobs\n\n# Generate sample data\nvectors, _ = make_blobs(n_samples=1000, centers=5, n_features=2, random_state=42)\nnoofclusters = 5\n\n# Implement the K-Means clustering algorithm\ncentroids, assignments = simplified_k_means_clustering(vectors, noofclusters)\n\nprint(\"Centroids:\", centroids)\nprint(\"Assignments:\", assignments)\n```\n\n#### Notes\n- You should not use any external packages other than TensorFlow and NumPy.\n- Ensure that your implementation is self-contained and clear."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:**Scenario**: You are working on a project that involves processing text data in various languages, including those that use non-ASCII characters. You need a function to convert all uppercase letters to lowercase letters in a string, handling both ASCII and non-ASCII characters correctly.\n\n**Question**: Implement a function `enhanced_lower` that takes a string as input and returns a new string with all uppercase letters converted to lowercase. The function should handle both ASCII and non-ASCII characters and preserve the original order of characters in the string.\n\n**Input**: A string `text` (1 <= len(text) <= 10^5) consisting of alphanumeric characters, spaces, and punctuation marks. The string may contain non-ASCII characters.\n\n**Output**: A string where all uppercase letters in the input string are converted to lowercase.\n\n**Example**:\n```python\n>>> enhanced_lower(\"Hello, World!\")\n'hello, world!'\n>>> enhanced_lower(\"\u00a1Hola, MUNDO!\")\n'\u00a1hola, mundo!'\n>>> enhanced_lower(\"Python 3.8\")\n'python 3.8'\n>>> enhanced_lower(\"12345\")\n'12345'\n>>> enhanced_lower(\" caf\u00e9\")\n' caf\u00e9'\n```\n\n**Constraints**:\n- The input string will contain at least one character and at most 10^5 characters.\n- The string may contain non-ASCII characters.\n\n**Performance Requirement**: The function should handle large strings efficiently, aiming for a time complexity of O(n) and a space complexity of O(n)."}], "metadata": {"prompt_id": "00000070", "row_id": 70, "seed_ids": [286], "mode": "algorithm", "instruction": "**Scenario**: You are working on a project that involves processing text data in various languages, including those that use non-ASCII characters. You need a function to convert all uppercase letters to lowercase letters in a string, handling both ASCII and non-ASCII characters correctly.\n\n**Question**: Implement a function `enhanced_lower` that takes a string as input and returns a new string with all uppercase letters converted to lowercase. The function should handle both ASCII and non-ASCII characters and preserve the original order of characters in the string.\n\n**Input**: A string `text` (1 <= len(text) <= 10^5) consisting of alphanumeric characters, spaces, and punctuation marks. The string may contain non-ASCII characters.\n\n**Output**: A string where all uppercase letters in the input string are converted to lowercase.\n\n**Example**:\n```python\n>>> enhanced_lower(\"Hello, World!\")\n'hello, world!'\n>>> enhanced_lower(\"\u00a1Hola, MUNDO!\")\n'\u00a1hola, mundo!'\n>>> enhanced_lower(\"Python 3.8\")\n'python 3.8'\n>>> enhanced_lower(\"12345\")\n'12345'\n>>> enhanced_lower(\" caf\u00e9\")\n' caf\u00e9'\n```\n\n**Constraints**:\n- The input string will contain at least one character and at most 10^5 characters.\n- The string may contain non-ASCII characters.\n\n**Performance Requirement**: The function should handle large strings efficiently, aiming for a time complexity of O(n) and a space complexity of O(n)."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Scenario\nYou are developing an application that requires access to astronomical images and data from NASA's API. Your application should be able to fetch and save these images locally. To ensure robustness, you need to implement error handling and retry mechanisms.\n\n### Requirement\nWrite a Python function `download_and_save_apod` that fetches the \"Astronomical Picture of the Day\" (APOD) from NASA's APOD API and saves it to a specified directory. The function should handle the following requirements:\n\n1. **Error Handling**: Implement error handling to gracefully deal with network failures, HTTP errors, and file I/O errors.\n2. **Retry Mechanism**: Implement a retry mechanism to attempt downloading the image up to 3 times if the initial attempt fails.\n3. **Input and Output**: The function should take an `api_key` and a `save_path` as arguments and return the APOD data as a dictionary.\n4. **Performance**: Ensure that the function does not hog the system resources and handles large images efficiently.\n5. **Documentation**: Add appropriate comments and docstring to the function for clarity.\n\n### Example\n```python\ndef download_and_save_apod(api_key: str, save_path: str) -> dict:\n    # Your implementation here\n    pass\n\n# Example usage\napi_key = \"YOUR_API_KEY\"\nsave_path = \"./apod_images\"\ndata = download_and_save_apod(api_key, save_path)\nprint(data)\n```\n\n### Constraints\n- The `api_key` is a valid NASA API key.\n- The `save_path` is a valid directory path.\n- The image URLs provided by the APOD API are always valid.\n\n### Performance Requirements\n- The function should be able to handle APOD images up to 10MB in size.\n- The function should not block the main thread for long periods during the download process.\n\n### Note\n- Use `requests` and `shutil` to handle HTTP requests and file I/O operations, respectively.\n- Use the `shutil.copyfileobj` method to copy the image data to a file."}], "metadata": {"prompt_id": "00000071", "row_id": 71, "seed_ids": [464], "mode": "algorithm", "instruction": "### Scenario\nYou are developing an application that requires access to astronomical images and data from NASA's API. Your application should be able to fetch and save these images locally. To ensure robustness, you need to implement error handling and retry mechanisms.\n\n### Requirement\nWrite a Python function `download_and_save_apod` that fetches the \"Astronomical Picture of the Day\" (APOD) from NASA's APOD API and saves it to a specified directory. The function should handle the following requirements:\n\n1. **Error Handling**: Implement error handling to gracefully deal with network failures, HTTP errors, and file I/O errors.\n2. **Retry Mechanism**: Implement a retry mechanism to attempt downloading the image up to 3 times if the initial attempt fails.\n3. **Input and Output**: The function should take an `api_key` and a `save_path` as arguments and return the APOD data as a dictionary.\n4. **Performance**: Ensure that the function does not hog the system resources and handles large images efficiently.\n5. **Documentation**: Add appropriate comments and docstring to the function for clarity.\n\n### Example\n```python\ndef download_and_save_apod(api_key: str, save_path: str) -> dict:\n    # Your implementation here\n    pass\n\n# Example usage\napi_key = \"YOUR_API_KEY\"\nsave_path = \"./apod_images\"\ndata = download_and_save_apod(api_key, save_path)\nprint(data)\n```\n\n### Constraints\n- The `api_key` is a valid NASA API key.\n- The `save_path` is a valid directory path.\n- The image URLs provided by the APOD API are always valid.\n\n### Performance Requirements\n- The function should be able to handle APOD images up to 10MB in size.\n- The function should not block the main thread for long periods during the download process.\n\n### Note\n- Use `requests` and `shutil` to handle HTTP requests and file I/O operations, respectively.\n- Use the `shutil.copyfileobj` method to copy the image data to a file."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Scenario\nYou are developing a multimedia application where you need to compare the quality of two images to determine the effectiveness of a compression algorithm. Your task is to write a function to calculate the PSNR between two images and a main function to test the implementation.\n\n### Instructions\n1. Implement a function `calculate_psnr(image1: np.ndarray, image2: np.ndarray) -> float` that computes the PSNR between two images.\n2. The function should return the PSNR value in dB.\n3. Ensure the function handles the case where the mean squared error (MSE) is zero.\n4. The images are assumed to be 8-bit grayscale images and are represented as NumPy arrays.\n5. Include a main function `test_psnr()` to test your implementation using the provided images. The main function should:\n   - Compare two images and print the PSNR value.\n   - Compare another pair of images and print the PSNR value, ensuring it matches the expected value of 31.53 dB (from the Wikipedia example).\n\n### Constraints\n- The images are both grayscale and in the range of 0 to 255.\n\n### Example\n```python\nimport numpy as np\n\nimage1 = np.array([[128, 128, 128], [128, 128, 128]], dtype=np.uint8)\nimage2 = np.array([[128, 128, 128], [128, 128, 128]], dtype=np.uint8)\n\npsnr = calculate_psnr(image1, image2)\nprint(f\"PSNR value is {psnr} dB\")\n# Expected output: PSNR value is 100.0 dB\n```\n\n### Expected Output\n- The PSNR value should be printed in dB.\n- Ensure that the PSNR calculation matches the expected values for the provided images.\n\n### Performance Requirements\n- The function should be efficient and handle large images without significant performance degradation.\n\n### Hint\n- Utilize NumPy for efficient array operations to speed up the computation."}], "metadata": {"prompt_id": "00000072", "row_id": 72, "seed_ids": [956], "mode": "algorithm", "instruction": "### Scenario\nYou are developing a multimedia application where you need to compare the quality of two images to determine the effectiveness of a compression algorithm. Your task is to write a function to calculate the PSNR between two images and a main function to test the implementation.\n\n### Instructions\n1. Implement a function `calculate_psnr(image1: np.ndarray, image2: np.ndarray) -> float` that computes the PSNR between two images.\n2. The function should return the PSNR value in dB.\n3. Ensure the function handles the case where the mean squared error (MSE) is zero.\n4. The images are assumed to be 8-bit grayscale images and are represented as NumPy arrays.\n5. Include a main function `test_psnr()` to test your implementation using the provided images. The main function should:\n   - Compare two images and print the PSNR value.\n   - Compare another pair of images and print the PSNR value, ensuring it matches the expected value of 31.53 dB (from the Wikipedia example).\n\n### Constraints\n- The images are both grayscale and in the range of 0 to 255.\n\n### Example\n```python\nimport numpy as np\n\nimage1 = np.array([[128, 128, 128], [128, 128, 128]], dtype=np.uint8)\nimage2 = np.array([[128, 128, 128], [128, 128, 128]], dtype=np.uint8)\n\npsnr = calculate_psnr(image1, image2)\nprint(f\"PSNR value is {psnr} dB\")\n# Expected output: PSNR value is 100.0 dB\n```\n\n### Expected Output\n- The PSNR value should be printed in dB.\n- Ensure that the PSNR calculation matches the expected values for the provided images.\n\n### Performance Requirements\n- The function should be efficient and handle large images without significant performance degradation.\n\n### Hint\n- Utilize NumPy for efficient array operations to speed up the computation."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Scenario\nYou are developing a horoscope application that fetches daily horoscopes for users based on their zodiac sign. The application needs to be robust and handle various edge cases.\n\n### Task\nImplement a function `fetch_horoscope` that interacts with a horoscope website to fetch daily horoscopes. The function should take a zodiac sign and a day as input and return the horoscope text. Ensure the function handles invalid inputs and network-related issues gracefully.\n\n### Requirements\n1. **Input**:\n   - `zodiac_sign`: An integer representing the zodiac sign (1 for Aries, 2 for Taurus, ..., 12 for Pisces).\n   - `day`: A string representing the day for which the horoscope is requested (e.g., \"yesterday\", \"today\", \"tomorrow\").\n\n2. **Output**:\n   - A string containing the horoscope text.\n\n3. **Constraints**:\n   - The zodiac sign must be an integer between 1 and 12.\n   - The day must be one of \"yesterday\", \"today\", or \"tomorrow\".\n\n4. **Performance**:\n   - The function should handle network errors and retry once if the request fails.\n   - The function should avoid making unnecessary requests, such as requesting the same horoscope multiple times within the same day.\n\n5. **Error Handling**:\n   - If the zodiac sign is invalid, the function should return a user-friendly error message.\n   - If the day is invalid, the function should return a user-friendly error message.\n   - If the network request fails, the function should retry once and then return a generic error message if the retry fails.\n\n### Example\n```python\ndef fetch_horoscope(zodiac_sign: int, day: str) -> str:\n    # Your implementation here\n    pass\n\n# Example usage\nprint(fetch_horoscope(1, \"today\"))  # Example output: \"Your daily horoscope for today...\"\nprint(fetch_horoscope(13, \"today\"))  # Example output: \"Invalid zodiac sign.\"\nprint(fetch_horoscope(1, \"next week\"))  # Example output: \"Invalid day.\"\n```\n\n### Notes\n- You can use `requests` and `BeautifulSoup` for web scraping if needed. Ensure you handle potential exceptions and errors gracefully."}], "metadata": {"prompt_id": "00000073", "row_id": 73, "seed_ids": [449], "mode": "algorithm", "instruction": "### Scenario\nYou are developing a horoscope application that fetches daily horoscopes for users based on their zodiac sign. The application needs to be robust and handle various edge cases.\n\n### Task\nImplement a function `fetch_horoscope` that interacts with a horoscope website to fetch daily horoscopes. The function should take a zodiac sign and a day as input and return the horoscope text. Ensure the function handles invalid inputs and network-related issues gracefully.\n\n### Requirements\n1. **Input**:\n   - `zodiac_sign`: An integer representing the zodiac sign (1 for Aries, 2 for Taurus, ..., 12 for Pisces).\n   - `day`: A string representing the day for which the horoscope is requested (e.g., \"yesterday\", \"today\", \"tomorrow\").\n\n2. **Output**:\n   - A string containing the horoscope text.\n\n3. **Constraints**:\n   - The zodiac sign must be an integer between 1 and 12.\n   - The day must be one of \"yesterday\", \"today\", or \"tomorrow\".\n\n4. **Performance**:\n   - The function should handle network errors and retry once if the request fails.\n   - The function should avoid making unnecessary requests, such as requesting the same horoscope multiple times within the same day.\n\n5. **Error Handling**:\n   - If the zodiac sign is invalid, the function should return a user-friendly error message.\n   - If the day is invalid, the function should return a user-friendly error message.\n   - If the network request fails, the function should retry once and then return a generic error message if the retry fails.\n\n### Example\n```python\ndef fetch_horoscope(zodiac_sign: int, day: str) -> str:\n    # Your implementation here\n    pass\n\n# Example usage\nprint(fetch_horoscope(1, \"today\"))  # Example output: \"Your daily horoscope for today...\"\nprint(fetch_horoscope(13, \"today\"))  # Example output: \"Invalid zodiac sign.\"\nprint(fetch_horoscope(1, \"next week\"))  # Example output: \"Invalid day.\"\n```\n\n### Notes\n- You can use `requests` and `BeautifulSoup` for web scraping if needed. Ensure you handle potential exceptions and errors gracefully."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are tasked with optimizing the given Python code to efficiently count the number of reversible numbers below a given power of 10. A reversible number is a positive integer such that the sum of the number and its reverse consists entirely of odd (decimal) digits. Leading zeros are not allowed.\n\n### Problem Description\nImplement a function `count_reversible_numbers(max_power: int) -> int` that returns the number of reversible numbers below \\(10^{max_power}\\).\n\n### Constraints\n- \\(1 \\leq max_power \\leq 9\\)\n\n### Input and Output Formats\n- **Input**:\n  - `max_power`: An integer representing the power of 10 to which the upper limit is set.\n- **Output**:\n  - An integer representing the count of reversible numbers below \\(10^{max_power}\\).\n\n### Example\n\n```python\nassert count_reversible_numbers(3) == 120\nassert count_reversible_numbers(6) == 18720\nassert count_reversible_numbers(7) == 68720\n```\n\n### Performance Requirements\n- The solution should be efficient and able to handle the maximum input size within a reasonable time.\n\n### Optimized Solution\nYou are required to optimize the given code to improve its performance. You can use memoization, dynamic programming, or any other technique to achieve this.\n\n### Code Snippet\n```python\nEVEN_DIGITS = [0, 2, 4, 6, 8]\nODD_DIGITS = [1, 3, 5, 7, 9]\n\ndef count_reversible_numbers(max_power: int) -> int:\n    # Your optimized implementation goes here\n    pass\n\n# Example usage\nprint(count_reversible_numbers(3))  # Output: 120\n```\n\n### Explanation\nThe function `count_reversible_numbers` should efficiently count the number of reversible numbers for the given `max_power`. You should consider edge cases and ensure that the sum of the number and its reverse consists entirely of odd digits."}], "metadata": {"prompt_id": "00000074", "row_id": 74, "seed_ids": [578], "mode": "algorithm", "instruction": "You are tasked with optimizing the given Python code to efficiently count the number of reversible numbers below a given power of 10. A reversible number is a positive integer such that the sum of the number and its reverse consists entirely of odd (decimal) digits. Leading zeros are not allowed.\n\n### Problem Description\nImplement a function `count_reversible_numbers(max_power: int) -> int` that returns the number of reversible numbers below \\(10^{max_power}\\).\n\n### Constraints\n- \\(1 \\leq max_power \\leq 9\\)\n\n### Input and Output Formats\n- **Input**:\n  - `max_power`: An integer representing the power of 10 to which the upper limit is set.\n- **Output**:\n  - An integer representing the count of reversible numbers below \\(10^{max_power}\\).\n\n### Example\n\n```python\nassert count_reversible_numbers(3) == 120\nassert count_reversible_numbers(6) == 18720\nassert count_reversible_numbers(7) == 68720\n```\n\n### Performance Requirements\n- The solution should be efficient and able to handle the maximum input size within a reasonable time.\n\n### Optimized Solution\nYou are required to optimize the given code to improve its performance. You can use memoization, dynamic programming, or any other technique to achieve this.\n\n### Code Snippet\n```python\nEVEN_DIGITS = [0, 2, 4, 6, 8]\nODD_DIGITS = [1, 3, 5, 7, 9]\n\ndef count_reversible_numbers(max_power: int) -> int:\n    # Your optimized implementation goes here\n    pass\n\n# Example usage\nprint(count_reversible_numbers(3))  # Output: 120\n```\n\n### Explanation\nThe function `count_reversible_numbers` should efficiently count the number of reversible numbers for the given `max_power`. You should consider edge cases and ensure that the sum of the number and its reverse consists entirely of odd digits."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are tasked with implementing a function that finds the maximum sum of a subsequence in an array. Unlike finding the maximum sum subarray, the subsequence can be non-contiguous. For instance, given the array `[-2, 1, -3, 4, -1, 2, 1, -5, 4]`, the maximum sum of a subsequence is `6` (1 + 4 + 1).\n\nWrite a function `max_subsequence_sum` that takes an array of integers as input and returns the maximum sum of a subsequence. A subsequence is defined as a sequence that can be derived from the array by deleting some or no elements without changing the order of the remaining elements.\n\nYour function should meet the following requirements:\n\n- **Input**: A list of integers.\n- **Output**: An integer representing the maximum sum of a subsequence.\n\n**Constraints**:\n- The length of the input list is between 1 and 1000.\n- Each element in the list is an integer between -1000 and 1000.\n\n**Performance Requirement**:\n- The function should have a time complexity of O(n), where n is the length of the input list.\n\n**Example**:\n```python\ndef max_subsequence_sum(nums: list[int]) -> int:\n    # Your implementation here\n    pass\n\n# Test cases\nprint(max_subsequence_sum([-2, 1, -3, 4, -1, 2, 1, -5, 4]))  # Output: 6\nprint(max_subsequence_sum([-1, -2, -3, -4]))  # Output: -1\nprint(max_subsequence_sum([1, 2, 3, 4]))  # Output: 10\nprint(max_subsequence_sum([0]))  # Output: 0\n```\n\n**Note**: Ensure your solution handles all edge cases as described in the analysis."}], "metadata": {"prompt_id": "00000075", "row_id": 75, "seed_ids": [979], "mode": "algorithm", "instruction": "You are tasked with implementing a function that finds the maximum sum of a subsequence in an array. Unlike finding the maximum sum subarray, the subsequence can be non-contiguous. For instance, given the array `[-2, 1, -3, 4, -1, 2, 1, -5, 4]`, the maximum sum of a subsequence is `6` (1 + 4 + 1).\n\nWrite a function `max_subsequence_sum` that takes an array of integers as input and returns the maximum sum of a subsequence. A subsequence is defined as a sequence that can be derived from the array by deleting some or no elements without changing the order of the remaining elements.\n\nYour function should meet the following requirements:\n\n- **Input**: A list of integers.\n- **Output**: An integer representing the maximum sum of a subsequence.\n\n**Constraints**:\n- The length of the input list is between 1 and 1000.\n- Each element in the list is an integer between -1000 and 1000.\n\n**Performance Requirement**:\n- The function should have a time complexity of O(n), where n is the length of the input list.\n\n**Example**:\n```python\ndef max_subsequence_sum(nums: list[int]) -> int:\n    # Your implementation here\n    pass\n\n# Test cases\nprint(max_subsequence_sum([-2, 1, -3, 4, -1, 2, 1, -5, 4]))  # Output: 6\nprint(max_subsequence_sum([-1, -2, -3, -4]))  # Output: -1\nprint(max_subsequence_sum([1, 2, 3, 4]))  # Output: 10\nprint(max_subsequence_sum([0]))  # Output: 0\n```\n\n**Note**: Ensure your solution handles all edge cases as described in the analysis."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are tasked with implementing a function `hex_to_bin_v2` that converts a hexadecimal value to its binary equivalent. The function should handle the following cases:\n\n* Leading and trailing whitespace in the input string should be stripped.\n* The input string must represent a valid hexadecimal number. If the input string contains invalid characters or is not a valid hexadecimal number, the function should raise a `ValueError` with an appropriate message.\n* The function should handle negative numbers correctly by preserving the sign during conversion.\n\nYour function should meet the following requirements:\n\n* Input: A string representing a hexadecimal number (optionally with leading/trailing whitespace).\n* Output: A string representing the binary equivalent of the input hexadecimal number.\n* Constraints:\n  - The input string will be between 1 and 1000 characters long.\n  - The input string will contain only hexadecimal digits (0-9, a-f, A-F) and optional leading/trailing whitespace.\n\nExample usage:\n\n```python\nprint(hex_to_bin_v2(\"AC\"))  # Output: \"10101100\"\nprint(hex_to_bin_v2(\"9A4\"))  # Output: \"100110100100\"\nprint(hex_to_bin_v2(\"   12f   \"))  # Output: \"100101111\"\nprint(hex_to_bin_v2(\"FfFf\"))  # Output: \"1111111111111111\"\nprint(hex_to_bin_v2(\"-fFfF\"))  # Output: \"-1111111111111111\"\n```\n\nIf the input string contains invalid characters or is not a valid hexadecimal number, your function should raise a `ValueError` with a message indicating the issue.\n\n```python\nprint(hex_to_bin_v2(\"G1\"))  # ValueError: Invalid value was passed to the function\nprint(hex_to_bin_v2(\"\"))  # ValueError: No value was passed to the function\n```"}], "metadata": {"prompt_id": "00000076", "row_id": 76, "seed_ids": [650], "mode": "algorithm", "instruction": "You are tasked with implementing a function `hex_to_bin_v2` that converts a hexadecimal value to its binary equivalent. The function should handle the following cases:\n\n* Leading and trailing whitespace in the input string should be stripped.\n* The input string must represent a valid hexadecimal number. If the input string contains invalid characters or is not a valid hexadecimal number, the function should raise a `ValueError` with an appropriate message.\n* The function should handle negative numbers correctly by preserving the sign during conversion.\n\nYour function should meet the following requirements:\n\n* Input: A string representing a hexadecimal number (optionally with leading/trailing whitespace).\n* Output: A string representing the binary equivalent of the input hexadecimal number.\n* Constraints:\n  - The input string will be between 1 and 1000 characters long.\n  - The input string will contain only hexadecimal digits (0-9, a-f, A-F) and optional leading/trailing whitespace.\n\nExample usage:\n\n```python\nprint(hex_to_bin_v2(\"AC\"))  # Output: \"10101100\"\nprint(hex_to_bin_v2(\"9A4\"))  # Output: \"100110100100\"\nprint(hex_to_bin_v2(\"   12f   \"))  # Output: \"100101111\"\nprint(hex_to_bin_v2(\"FfFf\"))  # Output: \"1111111111111111\"\nprint(hex_to_bin_v2(\"-fFfF\"))  # Output: \"-1111111111111111\"\n```\n\nIf the input string contains invalid characters or is not a valid hexadecimal number, your function should raise a `ValueError` with a message indicating the issue.\n\n```python\nprint(hex_to_bin_v2(\"G1\"))  # ValueError: Invalid value was passed to the function\nprint(hex_to_bin_v2(\"\"))  # ValueError: No value was passed to the function\n```"}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:**Scenario**:\nYou are working on a project that requires the implementation of the Liouville Lambda function for a range of integers. The function should efficiently determine whether a given integer has an even or odd number of prime factors and return the corresponding value.\n\n**Task**:\nImplement the `liouville_lambda` function to calculate the Liouville Lambda value for a given integer. Additionally, extend the function to handle a list of integers and return a list of corresponding Liouville Lambda values.\n\n**Requirements**:\n- The function should take a single integer or a list of integers as input.\n- If a single integer is provided, the function should return the Liouville Lambda value for that integer.\n- If a list of integers is provided, the function should return a list of Liouville Lambda values for each integer in the list.\n- Ensure the function handles edge cases such as non-integer inputs, negative numbers, and zero.\n- Optimize the function for efficiency, especially for large inputs.\n\n**Input and Output Formats**:\n- **Input**: A single integer or a list of integers.\n- **Output**: The Liouville Lambda value for a single integer or a list of Liouville Lambda values for each integer in the list.\n\n**Constraints**:\n- The input list can contain up to 1000 integers.\n- Each integer in the list will be between 1 and 10^6, inclusive.\n\n**Example**:\n```python\n# Example 1: Single integer\nprint(liouville_lambda(10))  # Output: 1\n\n# Example 2: List of integers\nprint(liouville_lambda([10, 11, 12]))  # Output: [1, -1, -1]\n```\n\n**Note**:\nYou are not allowed to use the `prime_factors` function directly. Instead, you must implement your own efficient prime factorization method."}], "metadata": {"prompt_id": "00000077", "row_id": 77, "seed_ids": [752], "mode": "algorithm", "instruction": "**Scenario**:\nYou are working on a project that requires the implementation of the Liouville Lambda function for a range of integers. The function should efficiently determine whether a given integer has an even or odd number of prime factors and return the corresponding value.\n\n**Task**:\nImplement the `liouville_lambda` function to calculate the Liouville Lambda value for a given integer. Additionally, extend the function to handle a list of integers and return a list of corresponding Liouville Lambda values.\n\n**Requirements**:\n- The function should take a single integer or a list of integers as input.\n- If a single integer is provided, the function should return the Liouville Lambda value for that integer.\n- If a list of integers is provided, the function should return a list of Liouville Lambda values for each integer in the list.\n- Ensure the function handles edge cases such as non-integer inputs, negative numbers, and zero.\n- Optimize the function for efficiency, especially for large inputs.\n\n**Input and Output Formats**:\n- **Input**: A single integer or a list of integers.\n- **Output**: The Liouville Lambda value for a single integer or a list of Liouville Lambda values for each integer in the list.\n\n**Constraints**:\n- The input list can contain up to 1000 integers.\n- Each integer in the list will be between 1 and 10^6, inclusive.\n\n**Example**:\n```python\n# Example 1: Single integer\nprint(liouville_lambda(10))  # Output: 1\n\n# Example 2: List of integers\nprint(liouville_lambda([10, 11, 12]))  # Output: [1, -1, -1]\n```\n\n**Note**:\nYou are not allowed to use the `prime_factors` function directly. Instead, you must implement your own efficient prime factorization method."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are tasked with enhancing the `convert_currency` function to handle a more complex scenario. The function should be able to convert multiple currency amounts in one API call and return the results in a formatted string. Additionally, the function should handle invalid inputs and provide appropriate error messages.\n\n**Function Signature**:\n```python\ndef convert_currency_multiple(\n    api_key: str,\n    from_currency: str,\n    to_currency: str,\n    amounts: List[float],\n) -> str:\n    \"\"\"\n    Convert multiple currency amounts from one currency to another using the Amdoren Currency API.\n\n    :param api_key: API key for the Amdoren Currency API.\n    :param from_currency: Currency to convert from.\n    :param to_currency: Currency to convert to.\n    :param amounts: List of amounts to convert.\n    :return: A formatted string containing the converted amounts or an error message.\n\n    Example:\n    >>> convert_currency_multiple(\"your_api_key\", \"USD\", \"INR\", [1.0, 2.5, 3.0])\n    '1.0: 74.65 INR, 2.5: 186.63 INR, 3.0: 223.98 INR'\n    \"\"\"\n```\n\n**Constraints**:\n- The `from_currency`, `to_currency`, and `amounts` parameters must be provided.\n- The `from_currency` and `to_currency` must be valid currency codes.\n- The `amounts` list can contain up to 100 elements.\n- The API key is valid and provided.\n\n**Edge Cases**:\n- Handle cases where the currency codes are invalid.\n- Handle cases where the amounts list is empty.\n- Handle the case where the API fails to respond or returns an error.\n\n**Performance Requirements**:\n- The function should make the minimum number of API calls to convert the amounts.\n- The function should return a formatted string with the converted amounts or an error message.\n\nImplement the `convert_currency_multiple` function to meet the requirements."}], "metadata": {"prompt_id": "00000078", "row_id": 78, "seed_ids": [455], "mode": "algorithm", "instruction": "You are tasked with enhancing the `convert_currency` function to handle a more complex scenario. The function should be able to convert multiple currency amounts in one API call and return the results in a formatted string. Additionally, the function should handle invalid inputs and provide appropriate error messages.\n\n**Function Signature**:\n```python\ndef convert_currency_multiple(\n    api_key: str,\n    from_currency: str,\n    to_currency: str,\n    amounts: List[float],\n) -> str:\n    \"\"\"\n    Convert multiple currency amounts from one currency to another using the Amdoren Currency API.\n\n    :param api_key: API key for the Amdoren Currency API.\n    :param from_currency: Currency to convert from.\n    :param to_currency: Currency to convert to.\n    :param amounts: List of amounts to convert.\n    :return: A formatted string containing the converted amounts or an error message.\n\n    Example:\n    >>> convert_currency_multiple(\"your_api_key\", \"USD\", \"INR\", [1.0, 2.5, 3.0])\n    '1.0: 74.65 INR, 2.5: 186.63 INR, 3.0: 223.98 INR'\n    \"\"\"\n```\n\n**Constraints**:\n- The `from_currency`, `to_currency`, and `amounts` parameters must be provided.\n- The `from_currency` and `to_currency` must be valid currency codes.\n- The `amounts` list can contain up to 100 elements.\n- The API key is valid and provided.\n\n**Edge Cases**:\n- Handle cases where the currency codes are invalid.\n- Handle cases where the amounts list is empty.\n- Handle the case where the API fails to respond or returns an error.\n\n**Performance Requirements**:\n- The function should make the minimum number of API calls to convert the amounts.\n- The function should return a formatted string with the converted amounts or an error message.\n\nImplement the `convert_currency_multiple` function to meet the requirements."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are given an unsorted list of integers and are required to perform a wiggle sort on it. The goal is to reorder the list such that each element is either greater or smaller than its adjacent elements, following the wiggle pattern.\n\n**Problem Description**:\nImplement the `wiggle_sort` function to achieve the desired wiggle sorting. The function should take a list of integers as input and return the list after performing the wiggle sort.\n\n**Input**:\n- A list of integers `nums`.\n\n**Output**:\n- A list of integers representing the wiggle sorted array.\n\n**Constraints**:\n- The length of `nums` is between 1 and 5000.\n- Each element in `nums` is an integer in the range \\([-10^5, 10^5]\\).\n\n**Performance Requirements**:\n- The solution should have a time complexity of \\(O(n)\\) and a space complexity of \\(O(1)\\).\n\n**Example**:\n```python\n>>> wiggle_sort([3, 5, 2, 1, 6, 4])\n[3, 5, 1, 6, 2, 4]\n```\n\n**Note**:\n- Ensure that your implementation adheres to the provided constraints and performance requirements."}], "metadata": {"prompt_id": "00000079", "row_id": 79, "seed_ids": [218], "mode": "algorithm", "instruction": "You are given an unsorted list of integers and are required to perform a wiggle sort on it. The goal is to reorder the list such that each element is either greater or smaller than its adjacent elements, following the wiggle pattern.\n\n**Problem Description**:\nImplement the `wiggle_sort` function to achieve the desired wiggle sorting. The function should take a list of integers as input and return the list after performing the wiggle sort.\n\n**Input**:\n- A list of integers `nums`.\n\n**Output**:\n- A list of integers representing the wiggle sorted array.\n\n**Constraints**:\n- The length of `nums` is between 1 and 5000.\n- Each element in `nums` is an integer in the range \\([-10^5, 10^5]\\).\n\n**Performance Requirements**:\n- The solution should have a time complexity of \\(O(n)\\) and a space complexity of \\(O(1)\\).\n\n**Example**:\n```python\n>>> wiggle_sort([3, 5, 2, 1, 6, 4])\n[3, 5, 1, 6, 2, 4]\n```\n\n**Note**:\n- Ensure that your implementation adheres to the provided constraints and performance requirements."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:The task is to implement a function that checks if a given number is an automorphic number. An automorphic number is defined as a number whose square ends in the same digits as the number itself.\n\n### Function Signature\n```python\ndef is_automorphic_number(number: int) -> bool:\n    pass\n```\n\n### Input and Output\n- **Input**: An integer number.\n- **Output**: A boolean indicating whether the number is an automorphic number.\n\n### Constraints\n- The input number will be within the range \\([-10^{18}, 10^{18} - 1]\\).\n\n### Performance Requirements\n- The function should be efficient and run within a reasonable time for the given constraints.\n\n### Additional Notes\n- The function should handle both positive and negative numbers correctly, but negative numbers are not considered automorphic.\n- The function should raise a `TypeError` if the input is not an integer.\n\n### Example Cases\n```python\n# Example 1\nassert is_automorphic_number(76) == True\n# Example 2\nassert is_automorphic_number(25) == True\n# Example 3\nassert is_automorphic_number(9376) == True\n# Example 4\nassert is_automorphic_number(7) == False\n# Example 5\nassert is_automorphic_number(-25) == False\n# Example 6\nassert is_automorphic_number(5.0) == TypeError\n```\n\n### Implementation\n\n1. Validate the input to ensure it is an integer.\n2. Handle negative numbers by returning `False`.\n3. Compare the last digits of the square of the number with the number itself.\n4. Return `True` if the last digits match, otherwise return `False`.\n\n### Function to Test\n```python\ndef test_is_automorphic_number():\n    assert is_automorphic_number(76) == True\n    assert is_automorphic_number(25) == True\n    assert is_automorphic_number(9376) == True\n    assert is_automorphic_number(7) == False\n    assert is_automorphic_number(-25) == False\n    try:\n        is_automorphic_number(5.0)\n    except TypeError:\n        pass\n    else:\n        raise AssertionError(\"TypeError not raised for non-integer input\")\n```\n\nImplement the `is_automorphic_number` function following the above requirements and guidelines."}], "metadata": {"prompt_id": "00000080", "row_id": 80, "seed_ids": [802], "mode": "algorithm", "instruction": "The task is to implement a function that checks if a given number is an automorphic number. An automorphic number is defined as a number whose square ends in the same digits as the number itself.\n\n### Function Signature\n```python\ndef is_automorphic_number(number: int) -> bool:\n    pass\n```\n\n### Input and Output\n- **Input**: An integer number.\n- **Output**: A boolean indicating whether the number is an automorphic number.\n\n### Constraints\n- The input number will be within the range \\([-10^{18}, 10^{18} - 1]\\).\n\n### Performance Requirements\n- The function should be efficient and run within a reasonable time for the given constraints.\n\n### Additional Notes\n- The function should handle both positive and negative numbers correctly, but negative numbers are not considered automorphic.\n- The function should raise a `TypeError` if the input is not an integer.\n\n### Example Cases\n```python\n# Example 1\nassert is_automorphic_number(76) == True\n# Example 2\nassert is_automorphic_number(25) == True\n# Example 3\nassert is_automorphic_number(9376) == True\n# Example 4\nassert is_automorphic_number(7) == False\n# Example 5\nassert is_automorphic_number(-25) == False\n# Example 6\nassert is_automorphic_number(5.0) == TypeError\n```\n\n### Implementation\n\n1. Validate the input to ensure it is an integer.\n2. Handle negative numbers by returning `False`.\n3. Compare the last digits of the square of the number with the number itself.\n4. Return `True` if the last digits match, otherwise return `False`.\n\n### Function to Test\n```python\ndef test_is_automorphic_number():\n    assert is_automorphic_number(76) == True\n    assert is_automorphic_number(25) == True\n    assert is_automorphic_number(9376) == True\n    assert is_automorphic_number(7) == False\n    assert is_automorphic_number(-25) == False\n    try:\n        is_automorphic_number(5.0)\n    except TypeError:\n        pass\n    else:\n        raise AssertionError(\"TypeError not raised for non-integer input\")\n```\n\nImplement the `is_automorphic_number` function following the above requirements and guidelines."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:Given the following code for checking and counting right triangles on a grid from the origin, you are to optimize the solution to compute the number of right triangles more efficiently.\n\n#### Function Description\n\nYou need to implement a function `optimized_solution` that returns the number of right triangles \\( \\Delta OPQ \\) that can be formed by points \\( P(x1, y1) \\) and \\( Q(x2, y2) \\) with coordinates between 0 and a given limit `limit` inclusive.\n\n#### Constraints\n\n- \\(0 \\leq x1, y1, x2, y2 \\leq \\text{limit}\\)\n- \\(0 \\leq \\text{limit} \\leq 50\\)\n\n#### Example\n\n```python\ndef optimized_solution(limit: int) -> int:\n    # Your implementation goes here\n```\n\n#### Expected Output\n\nThe function should return the number of right triangles that can be formed.\n\n#### Performance Requirements\n\nOptimize the solution to handle the maximum limit of 50 efficiently."}], "metadata": {"prompt_id": "00000081", "row_id": 81, "seed_ids": [611], "mode": "algorithm", "instruction": "Given the following code for checking and counting right triangles on a grid from the origin, you are to optimize the solution to compute the number of right triangles more efficiently.\n\n#### Function Description\n\nYou need to implement a function `optimized_solution` that returns the number of right triangles \\( \\Delta OPQ \\) that can be formed by points \\( P(x1, y1) \\) and \\( Q(x2, y2) \\) with coordinates between 0 and a given limit `limit` inclusive.\n\n#### Constraints\n\n- \\(0 \\leq x1, y1, x2, y2 \\leq \\text{limit}\\)\n- \\(0 \\leq \\text{limit} \\leq 50\\)\n\n#### Example\n\n```python\ndef optimized_solution(limit: int) -> int:\n    # Your implementation goes here\n```\n\n#### Expected Output\n\nThe function should return the number of right triangles that can be formed.\n\n#### Performance Requirements\n\nOptimize the solution to handle the maximum limit of 50 efficiently."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are tasked with enhancing the existing LCS (Longest Common Subsequence) solution to include additional functionalities. Your task is to modify the provided code to achieve the following:\n\n1. **Return All LCS**: Instead of just the length of the LCS, modify the solution to also return all possible LCS sequences as a list of strings. If there are multiple LCS sequences of the same length, include all of them in the list.\n\n2. **Print All LCS**: Additionally, print all the LCS sequences in a formatted manner, similar to the provided example.\n\n3. **Optimize Space Usage**: Optimize the space complexity of the solution to \\(O(n)\\) by using only two rows of the DP table at a time.\n\n**Constraints**:\n- The length of both input strings will be between 1 and 1000.\n\n**Input**:\n- Two strings `x` and `y` as input.\n\n**Output**:\n- A tuple containing:\n  - The length of the LCS.\n  - A list of all LCS sequences.\n\n**Performance Requirement**:\n- The solution should be efficient and handle large input strings within a reasonable time.\n\n**Example**:\n```python\na = \"AGGTAB\"\nb = \"GXTXAYB\"\nexpected_output = (4, [\"GTAB\", \"GBAB\"])\nprint(longest_common_subsequence(a, b))\n# Output:\n# len = 4, sub-sequence = GTAB\n# len = 4, sub-sequence = GBAB\n# (4, ['GTAB', 'GBAB'])\n```"}], "metadata": {"prompt_id": "00000082", "row_id": 82, "seed_ids": [28], "mode": "algorithm", "instruction": "You are tasked with enhancing the existing LCS (Longest Common Subsequence) solution to include additional functionalities. Your task is to modify the provided code to achieve the following:\n\n1. **Return All LCS**: Instead of just the length of the LCS, modify the solution to also return all possible LCS sequences as a list of strings. If there are multiple LCS sequences of the same length, include all of them in the list.\n\n2. **Print All LCS**: Additionally, print all the LCS sequences in a formatted manner, similar to the provided example.\n\n3. **Optimize Space Usage**: Optimize the space complexity of the solution to \\(O(n)\\) by using only two rows of the DP table at a time.\n\n**Constraints**:\n- The length of both input strings will be between 1 and 1000.\n\n**Input**:\n- Two strings `x` and `y` as input.\n\n**Output**:\n- A tuple containing:\n  - The length of the LCS.\n  - A list of all LCS sequences.\n\n**Performance Requirement**:\n- The solution should be efficient and handle large input strings within a reasonable time.\n\n**Example**:\n```python\na = \"AGGTAB\"\nb = \"GXTXAYB\"\nexpected_output = (4, [\"GTAB\", \"GBAB\"])\nprint(longest_common_subsequence(a, b))\n# Output:\n# len = 4, sub-sequence = GTAB\n# len = 4, sub-sequence = GBAB\n# (4, ['GTAB', 'GBAB'])\n```"}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:<|Analysis Begin|>\n\n### Core Identification\n\n#### Algorithm/Data Structure\n- **Algorithm/Data Structure**: `PokerHand` Class\n- **Type**: This class implements various poker hand evaluation operations, such as checking for flushes, straights, pairs, and calculating the hand type.\n- **Main Purpose**: The class is designed to evaluate and compare poker hands based on standard poker rules.\n\n#### Characteristics & Applications\n\n##### Properties\n- The class uses the `PokerHand` constructor to parse the hand string and store the card values.\n- It includes methods for checking specific poker hand types like flush, straight, pairs, and calculating the hand type.\n- The `compare_with` method is used to compare two hands and determine the winner.\n\n##### Common Use Cases\n- The class is used in scenarios where poker hands need to be evaluated and sorted.\n- It is particularly useful in applications that involve poker games or simulations.\n\n##### Strengths/Limitations\n- **Strengths**: The class is thoroughly tested and covers a wide range of edge cases. It is flexible and can be extended to include more poker hand types.\n- **Limitations**: The implementation relies on string parsing, which can be error-prone. It does not handle invalid input robustly.\n\n#### Implementation Challenges\n\n##### Edge Cases\n- The class should handle invalid hand strings, such as those with invalid characters or incorrect card ranks.\n\n##### Performance Bottlenecks\n- The `compare_with` method may be slow if it involves multiple evaluations, especially when comparing hands with many cards.\n- The `_is_five_high_straight` method may be inefficient if it involves sorting or complex list operations"}], "metadata": {"prompt_id": "00000083", "row_id": 83, "seed_ids": [599], "mode": "algorithm", "instruction": "<|Analysis Begin|>\n\n### Core Identification\n\n#### Algorithm/Data Structure\n- **Algorithm/Data Structure**: `PokerHand` Class\n- **Type**: This class implements various poker hand evaluation operations, such as checking for flushes, straights, pairs, and calculating the hand type.\n- **Main Purpose**: The class is designed to evaluate and compare poker hands based on standard poker rules.\n\n#### Characteristics & Applications\n\n##### Properties\n- The class uses the `PokerHand` constructor to parse the hand string and store the card values.\n- It includes methods for checking specific poker hand types like flush, straight, pairs, and calculating the hand type.\n- The `compare_with` method is used to compare two hands and determine the winner.\n\n##### Common Use Cases\n- The class is used in scenarios where poker hands need to be evaluated and sorted.\n- It is particularly useful in applications that involve poker games or simulations.\n\n##### Strengths/Limitations\n- **Strengths**: The class is thoroughly tested and covers a wide range of edge cases. It is flexible and can be extended to include more poker hand types.\n- **Limitations**: The implementation relies on string parsing, which can be error-prone. It does not handle invalid input robustly.\n\n#### Implementation Challenges\n\n##### Edge Cases\n- The class should handle invalid hand strings, such as those with invalid characters or incorrect card ranks.\n\n##### Performance Bottlenecks\n- The `compare_with` method may be slow if it involves multiple evaluations, especially when comparing hands with many cards.\n- The `_is_five_high_straight` method may be inefficient if it involves sorting or complex list operations"}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are tasked with implementing a function to find the value of `n` (1 < n < 10^7) for which the Euler's Totient function (`\u03c6(n)`) is a permutation of `n` and the ratio `n/\u03c6(n)` produces a minimum. The function should return this value of `n`.\n\n### Problem Description\n\nEuler's Totient function, \u03c6(n), is used to determine the number of positive integers less than or equal to n that are relatively prime to n. For example, \u03c6(9) = 6, as 1, 2, 4, 5, 7, and 8 are all relatively prime to 9.\n\nYou need to find the value of `n` in the range 1 < n < 10^7 such that `\u03c6(n)` is a permutation of `n` and the ratio `n/\u03c6(n)` is minimized. A permutation of a number means the digits of the two numbers are the same, but their order may differ.\n\n### Constraints\n\n- 1 < n < 10^7\n- You may use any efficient data structures to store and update values.\n\n### Example\n\n```python\ndef find_min_ratio():\n    # Your implementation here\n    return n\n```\n\n### Expected Functionality\n\n- The function should return the value of `n` that meets the criteria.\n- The function should handle edge cases and perform efficiently within the given constraints.\n\n### Notes\n\n- You should implement the function from scratch without referencing the provided code snippet.\n- You should also include a check function to test your implementation with provided data points."}], "metadata": {"prompt_id": "00000084", "row_id": 84, "seed_ids": [503], "mode": "algorithm", "instruction": "You are tasked with implementing a function to find the value of `n` (1 < n < 10^7) for which the Euler's Totient function (`\u03c6(n)`) is a permutation of `n` and the ratio `n/\u03c6(n)` produces a minimum. The function should return this value of `n`.\n\n### Problem Description\n\nEuler's Totient function, \u03c6(n), is used to determine the number of positive integers less than or equal to n that are relatively prime to n. For example, \u03c6(9) = 6, as 1, 2, 4, 5, 7, and 8 are all relatively prime to 9.\n\nYou need to find the value of `n` in the range 1 < n < 10^7 such that `\u03c6(n)` is a permutation of `n` and the ratio `n/\u03c6(n)` is minimized. A permutation of a number means the digits of the two numbers are the same, but their order may differ.\n\n### Constraints\n\n- 1 < n < 10^7\n- You may use any efficient data structures to store and update values.\n\n### Example\n\n```python\ndef find_min_ratio():\n    # Your implementation here\n    return n\n```\n\n### Expected Functionality\n\n- The function should return the value of `n` that meets the criteria.\n- The function should handle edge cases and perform efficiently within the given constraints.\n\n### Notes\n\n- You should implement the function from scratch without referencing the provided code snippet.\n- You should also include a check function to test your implementation with provided data points."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:Design a Python function `real_quadratic_roots` that calculates the real roots of a quadratic equation based on the given coefficients \\(a\\), \\(b\\), and \\(c\\). The function should return the roots as a tuple of real numbers. If the roots are not real, the function should return an empty tuple. Additionally, if the coefficient \\(a\\) is zero, the function should raise a `ValueError` with the message \"Coefficient 'a' must not be zero.\".\n\n**Function Signature**:\n```python\ndef real_quadratic_roots(a: int, b: int, c: int) -> tuple[float, ...]:\n    pass\n```\n\n**Input and Output**:\n- **Input**: Three integers \\(a\\), \\(b\\), and \\(c\\) representing the coefficients of the quadratic equation \\(ax^2 + bx + c = 0\\).\n- **Output**: A tuple of two real numbers representing the real roots of the equation. If the equation has no real roots, return an empty tuple `()`.\n\n**Constraints**:\n- \\(a\\), \\(b\\), and \\(c\\) are integers.\n- \\(-1000 \\leq a, b, c \\leq 1000\\).\n\n**Example**:\n```python\nassert real_quadratic_roots(1, -3, 2) == (1.0, 2.0)\nassert real_quadratic_roots(1, 2, 1) == (-1.0, -1.0)\nassert real_quadratic_roots(1, -5, 6) == (2.0, 3.0)\nassert real_quadratic_roots(1, -5, 7) == ()\n```\n\n**Performance Requirement**:\n- The function should be efficient and handle the given constraints effectively."}], "metadata": {"prompt_id": "00000085", "row_id": 85, "seed_ids": [721], "mode": "algorithm", "instruction": "Design a Python function `real_quadratic_roots` that calculates the real roots of a quadratic equation based on the given coefficients \\(a\\), \\(b\\), and \\(c\\). The function should return the roots as a tuple of real numbers. If the roots are not real, the function should return an empty tuple. Additionally, if the coefficient \\(a\\) is zero, the function should raise a `ValueError` with the message \"Coefficient 'a' must not be zero.\".\n\n**Function Signature**:\n```python\ndef real_quadratic_roots(a: int, b: int, c: int) -> tuple[float, ...]:\n    pass\n```\n\n**Input and Output**:\n- **Input**: Three integers \\(a\\), \\(b\\), and \\(c\\) representing the coefficients of the quadratic equation \\(ax^2 + bx + c = 0\\).\n- **Output**: A tuple of two real numbers representing the real roots of the equation. If the equation has no real roots, return an empty tuple `()`.\n\n**Constraints**:\n- \\(a\\), \\(b\\), and \\(c\\) are integers.\n- \\(-1000 \\leq a, b, c \\leq 1000\\).\n\n**Example**:\n```python\nassert real_quadratic_roots(1, -3, 2) == (1.0, 2.0)\nassert real_quadratic_roots(1, 2, 1) == (-1.0, -1.0)\nassert real_quadratic_roots(1, -5, 6) == (2.0, 3.0)\nassert real_quadratic_roots(1, -5, 7) == ()\n```\n\n**Performance Requirement**:\n- The function should be efficient and handle the given constraints effectively."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are working on a project that requires calculating various electrical properties in an electrical circuit. Your task is to extend the given `ind_reactance` function to handle an additional property, `capacitive reactance` (\\(X_C\\)), which is the reactance of a capacitor and is defined as \\(X_C = \\frac{1}{2\\pi fC}\\), where \\(f\\) is the frequency and \\(C\\) is the capacitance.\n\nYou need to implement a function `electrical_properties` that can calculate any one of the four properties: inductance (\\(L\\)), frequency (\\(f\\)), inductive reactance (\\(X_L\\)), or capacitive reactance (\\(X_C\\)), given the other three properties. Your function should validate the inputs and raise a `ValueError` if the inputs are invalid.\n\n**Function Signature**:\n```python\nfrom typing import Union\n\ndef electrical_properties(\n    l: float = None,\n    f: float = None,\n    x_l: float = None,\n    x_c: float = None,\n) -> Union[float, dict[str, float]]:\n    \"\"\"\n    Calculate one of the electrical properties (inductance, frequency, inductive reactance, or capacitive reactance)\n    given the other three properties. Exactly one property must be `None`.\n\n    Parameters:\n    l (float): Inductance in Henries.\n    f (float): Frequency in Hertz.\n    x_l (float): Inductive reactance in Ohms.\n    x_c (float): Capacitive reactance in Ohms.\n    \n    Returns:\n    Union[float, dict[str, float]]: The calculated property as a float or a dictionary with the calculated property.\n    \n    Raises:\n    ValueError: If more than one property is `None` or if any of the given values are negative.\n    \"\"\"\n```\n\n**Example Usage**:\n```python\n# Calculate inductance given frequency and inductive reactance\nprint(electrical_properties(f=1000, x_l=219.9, l=None))  # {'inductance': 35.0e-6}\n\n# Calculate frequency given inductance and inductive reactance\nprint(electrical_properties(l=35e-6, x_l=219.9, f=None))  # {'frequency': 1000.0}\n\n# Calculate inductive reactance given inductance and frequency\nprint(electrical_properties(l=35e-6, f=1000, x_l=None))  # {'inductive reactance': 219.9}\n\n# Calculate capacitance given frequency and capacitive reactance\nprint(electrical_properties(f=1000, x_c=50, c=None))  # {'capacitance': 636619.7723675814e-9}\n\n# Example with invalid inputs\n# print(electrical_properties(f=-1000, x_c=50, c=None))  # Raises ValueError: Frequency cannot be negative\n```\n\n**Constraints**:\n- The input values should be within the range of typical electrical values.\n- The function should handle edge cases such as negative values and ensure only one property is `None`."}], "metadata": {"prompt_id": "00000086", "row_id": 86, "seed_ids": [181], "mode": "algorithm", "instruction": "You are working on a project that requires calculating various electrical properties in an electrical circuit. Your task is to extend the given `ind_reactance` function to handle an additional property, `capacitive reactance` (\\(X_C\\)), which is the reactance of a capacitor and is defined as \\(X_C = \\frac{1}{2\\pi fC}\\), where \\(f\\) is the frequency and \\(C\\) is the capacitance.\n\nYou need to implement a function `electrical_properties` that can calculate any one of the four properties: inductance (\\(L\\)), frequency (\\(f\\)), inductive reactance (\\(X_L\\)), or capacitive reactance (\\(X_C\\)), given the other three properties. Your function should validate the inputs and raise a `ValueError` if the inputs are invalid.\n\n**Function Signature**:\n```python\nfrom typing import Union\n\ndef electrical_properties(\n    l: float = None,\n    f: float = None,\n    x_l: float = None,\n    x_c: float = None,\n) -> Union[float, dict[str, float]]:\n    \"\"\"\n    Calculate one of the electrical properties (inductance, frequency, inductive reactance, or capacitive reactance)\n    given the other three properties. Exactly one property must be `None`.\n\n    Parameters:\n    l (float): Inductance in Henries.\n    f (float): Frequency in Hertz.\n    x_l (float): Inductive reactance in Ohms.\n    x_c (float): Capacitive reactance in Ohms.\n    \n    Returns:\n    Union[float, dict[str, float]]: The calculated property as a float or a dictionary with the calculated property.\n    \n    Raises:\n    ValueError: If more than one property is `None` or if any of the given values are negative.\n    \"\"\"\n```\n\n**Example Usage**:\n```python\n# Calculate inductance given frequency and inductive reactance\nprint(electrical_properties(f=1000, x_l=219.9, l=None))  # {'inductance': 35.0e-6}\n\n# Calculate frequency given inductance and inductive reactance\nprint(electrical_properties(l=35e-6, x_l=219.9, f=None))  # {'frequency': 1000.0}\n\n# Calculate inductive reactance given inductance and frequency\nprint(electrical_properties(l=35e-6, f=1000, x_l=None))  # {'inductive reactance': 219.9}\n\n# Calculate capacitance given frequency and capacitive reactance\nprint(electrical_properties(f=1000, x_c=50, c=None))  # {'capacitance': 636619.7723675814e-9}\n\n# Example with invalid inputs\n# print(electrical_properties(f=-1000, x_c=50, c=None))  # Raises ValueError: Frequency cannot be negative\n```\n\n**Constraints**:\n- The input values should be within the range of typical electrical values.\n- The function should handle edge cases such as negative values and ensure only one property is `None`."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are given a function `bin_to_octal` that converts a binary string to its octal equivalent. The provided function already handles some edge cases and errors. Your task is to optimize the function to handle large binary strings more efficiently and to minimize the creation of intermediate data structures.\n\n**Function Signature**:\n```python\ndef bin_to_octal(bin_string: str) -> str:\n    # Your code here\n```\n\n**Input**:\n- `bin_string` (str): A binary string (composed of '0's and '1's).\n\n**Output**:\n- Return the octal equivalent of the binary string as a string.\n\n**Constraints**:\n- `1 <= len(bin_string) <= 10^6`\n\n**Performance Requirement**:\n- Optimize the function to handle large binary strings efficiently and minimize the use of additional data structures.\n\n**Example**:\n```python\n>>> bin_to_octal(\"1111\")\n'17'\n>>> bin_to_octal(\"101010101010011\")\n'52523'\n>>> bin_to_octal(\"\")\n''\n>>> bin_to_octal(\"a-1\")\nValueError: Non-binary value was passed to the function\n```\n\n**Note**: Ensure that your implementation handles all edge cases, including empty strings and non-binary strings, and performs optimally for large inputs."}], "metadata": {"prompt_id": "00000087", "row_id": 87, "seed_ids": [651], "mode": "algorithm", "instruction": "You are given a function `bin_to_octal` that converts a binary string to its octal equivalent. The provided function already handles some edge cases and errors. Your task is to optimize the function to handle large binary strings more efficiently and to minimize the creation of intermediate data structures.\n\n**Function Signature**:\n```python\ndef bin_to_octal(bin_string: str) -> str:\n    # Your code here\n```\n\n**Input**:\n- `bin_string` (str): A binary string (composed of '0's and '1's).\n\n**Output**:\n- Return the octal equivalent of the binary string as a string.\n\n**Constraints**:\n- `1 <= len(bin_string) <= 10^6`\n\n**Performance Requirement**:\n- Optimize the function to handle large binary strings efficiently and minimize the use of additional data structures.\n\n**Example**:\n```python\n>>> bin_to_octal(\"1111\")\n'17'\n>>> bin_to_octal(\"101010101010011\")\n'52523'\n>>> bin_to_octal(\"\")\n''\n>>> bin_to_octal(\"a-1\")\nValueError: Non-binary value was passed to the function\n```\n\n**Note**: Ensure that your implementation handles all edge cases, including empty strings and non-binary strings, and performs optimally for large inputs."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Analysis Begin\n\n#### Core Identification\n- **Algorithm/Data Structure**: Running Key Cipher.\n- **Complexity**: O(n), where n is the length of the plaintext/ciphertext.\n- **Principles**: The cipher encrypts each character of the plaintext by adding its corresponding character in the running key modulo 26. Decryption reverses this process by subtracting.\n\n#### Characteristics & Applications\n- **Properties**: \n  - Non-interchangeable: Characters depend on the running key and cannot be swapped independently.\n  - Case-sensitive: The cipher does not change case, maintaining uppercase for encrypted text.\n- **Common Use Cases**:\n  - Simple manual encryption/decryption for short messages.\n  - Educational purposes to understand basic encryption principles.\n- **Strengths/Limitations**:\n  - **Strengths**: Simple to implement, provides some level of security compared to plain substitution ciphers.\n  - **Limitations**: Weak against frequency analysis and susceptible to length extension attacks.\n\n#### Implementation Challenges\n- **Edge Cases**:\n  - Key and plaintext/ciphertext must be upper-case and without spaces.\n  - Plaintext and ciphertext can be very long, so performance needs to be efficient.\n- **Performance Bottlenecks**:\n  - Repeated modulo operation can be slow for large inputs.\n- **Error Scenarios**:\n  - Incorrect handling of edge cases like key length being shorter than plaintext.\n- **Optimization Points**:\n  - Use of string methods and modulo operation can be optimized for better performance.\n\n### Question Begin\n\nA student is asked to implement a Running Key Cipher for a text-based communication system. The cipher encrypts and decrypts messages using a running key, which is a long piece of text. Your task is to enhance the functionality of the provided `running_key_encrypt` and `running_key_decrypt` functions and add a new feature to the system.\n\n#### Function Specifications\n- **running_key_encrypt(key: str, plaintext: str) -> str**\n  - Encrypts the plaintext using the Running Key Cipher.\n  - :param key: The running key (long piece of text).\n  - :param plaintext: The plaintext to be encrypted.\n  - :return: The ciphertext.\n- **running_key_decrypt(key: str, ciphertext: str) -> str**\n  - Decrypts the ciphertext using the Running Key Cipher.\n  - :param key: The running key (long piece of text).\n  - :param ciphertext: The ciphertext to be decrypted.\n  - :return: The plaintext.\n- **running_key_encrypt_and_decrypt(key: str, message: str) -> (str, str)**\n  - Encrypts and then decrypts the message to ensure the original message is recovered.\n  - :param key: The running key (long piece of text).\n  - :param message: The message to be encrypted and then decrypted.\n  - :return: A tuple containing the ciphertext and the decrypted plaintext.\n\n#### Constraints and Limitations\n- The `key` and `message` strings are case-sensitive and can contain only uppercase letters.\n- The length of the `key` is at least as long as the `message`.\n- The `message` can be up to 1000 characters long.\n\n#### Example\n```python\nkey = \"How does the duck know that? said Victor\"\nplaintext = \"DEFEND THIS\"\nciphertext, decrypted_text = running_key_encrypt_and_decrypt(key, plaintext)\nprint(f\"Ciphertext: {ciphertext}\")\nprint(f\"Decrypted Text: {decrypted_text}\")\n```\n\n#### Expected Output\n```\nCiphertext: FUGQHUBKH\nDecrypted Text: DEFEND THIS\n```\n\n### Question End\n\n### Analysis End"}], "metadata": {"prompt_id": "00000088", "row_id": 88, "seed_ids": [61], "mode": "algorithm", "instruction": "### Analysis Begin\n\n#### Core Identification\n- **Algorithm/Data Structure**: Running Key Cipher.\n- **Complexity**: O(n), where n is the length of the plaintext/ciphertext.\n- **Principles**: The cipher encrypts each character of the plaintext by adding its corresponding character in the running key modulo 26. Decryption reverses this process by subtracting.\n\n#### Characteristics & Applications\n- **Properties**: \n  - Non-interchangeable: Characters depend on the running key and cannot be swapped independently.\n  - Case-sensitive: The cipher does not change case, maintaining uppercase for encrypted text.\n- **Common Use Cases**:\n  - Simple manual encryption/decryption for short messages.\n  - Educational purposes to understand basic encryption principles.\n- **Strengths/Limitations**:\n  - **Strengths**: Simple to implement, provides some level of security compared to plain substitution ciphers.\n  - **Limitations**: Weak against frequency analysis and susceptible to length extension attacks.\n\n#### Implementation Challenges\n- **Edge Cases**:\n  - Key and plaintext/ciphertext must be upper-case and without spaces.\n  - Plaintext and ciphertext can be very long, so performance needs to be efficient.\n- **Performance Bottlenecks**:\n  - Repeated modulo operation can be slow for large inputs.\n- **Error Scenarios**:\n  - Incorrect handling of edge cases like key length being shorter than plaintext.\n- **Optimization Points**:\n  - Use of string methods and modulo operation can be optimized for better performance.\n\n### Question Begin\n\nA student is asked to implement a Running Key Cipher for a text-based communication system. The cipher encrypts and decrypts messages using a running key, which is a long piece of text. Your task is to enhance the functionality of the provided `running_key_encrypt` and `running_key_decrypt` functions and add a new feature to the system.\n\n#### Function Specifications\n- **running_key_encrypt(key: str, plaintext: str) -> str**\n  - Encrypts the plaintext using the Running Key Cipher.\n  - :param key: The running key (long piece of text).\n  - :param plaintext: The plaintext to be encrypted.\n  - :return: The ciphertext.\n- **running_key_decrypt(key: str, ciphertext: str) -> str**\n  - Decrypts the ciphertext using the Running Key Cipher.\n  - :param key: The running key (long piece of text).\n  - :param ciphertext: The ciphertext to be decrypted.\n  - :return: The plaintext.\n- **running_key_encrypt_and_decrypt(key: str, message: str) -> (str, str)**\n  - Encrypts and then decrypts the message to ensure the original message is recovered.\n  - :param key: The running key (long piece of text).\n  - :param message: The message to be encrypted and then decrypted.\n  - :return: A tuple containing the ciphertext and the decrypted plaintext.\n\n#### Constraints and Limitations\n- The `key` and `message` strings are case-sensitive and can contain only uppercase letters.\n- The length of the `key` is at least as long as the `message`.\n- The `message` can be up to 1000 characters long.\n\n#### Example\n```python\nkey = \"How does the duck know that? said Victor\"\nplaintext = \"DEFEND THIS\"\nciphertext, decrypted_text = running_key_encrypt_and_decrypt(key, plaintext)\nprint(f\"Ciphertext: {ciphertext}\")\nprint(f\"Decrypted Text: {decrypted_text}\")\n```\n\n#### Expected Output\n```\nCiphertext: FUGQHUBKH\nDecrypted Text: DEFEND THIS\n```\n\n### Question End\n\n### Analysis End"}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are given a function `is_prime` that checks whether a number is prime. Your task is to implement a function `find_next_prime` that finds the next prime number greater than a given value. The function should handle edge cases and optimize performance for larger numbers.\n\n#### Function Signature\n```python\ndef find_next_prime(value: int) -> int:\n    pass\n```\n\n#### Constraints\n- `1 <= value <= 10^9`\n- The function should return the smallest prime number greater than the given value.\n\n#### Input and Output\n- **Input**: An integer `value`.\n- **Output**: The smallest prime number greater than `value`.\n\n#### Example\n```python\nassert find_next_prime(10) == 11\nassert find_next_prime(29) == 31\nassert find_next_prime(100) == 101\n```\n\n#### Performance Requirements\n- The function should be able to handle values up to `10^9` efficiently.\n\n#### Scenario\nYou are developing a secure messaging system that requires generating prime numbers for encryption keys. Your task is to ensure that the next prime number is found quickly and accurately."}], "metadata": {"prompt_id": "00000089", "row_id": 89, "seed_ids": [326], "mode": "algorithm", "instruction": "You are given a function `is_prime` that checks whether a number is prime. Your task is to implement a function `find_next_prime` that finds the next prime number greater than a given value. The function should handle edge cases and optimize performance for larger numbers.\n\n#### Function Signature\n```python\ndef find_next_prime(value: int) -> int:\n    pass\n```\n\n#### Constraints\n- `1 <= value <= 10^9`\n- The function should return the smallest prime number greater than the given value.\n\n#### Input and Output\n- **Input**: An integer `value`.\n- **Output**: The smallest prime number greater than `value`.\n\n#### Example\n```python\nassert find_next_prime(10) == 11\nassert find_next_prime(29) == 31\nassert find_next_prime(100) == 101\n```\n\n#### Performance Requirements\n- The function should be able to handle values up to `10^9` efficiently.\n\n#### Scenario\nYou are developing a secure messaging system that requires generating prime numbers for encryption keys. Your task is to ensure that the next prime number is found quickly and accurately."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are given a problem that involves calculating the difference between the square of the sum of the first \\( n \\) natural numbers and the sum of the squares of the first \\( n \\) natural numbers. Your task is to implement a function that returns this difference.\n\n### Problem Statement\n\nWrite a function `calculate_difference(n)` that takes a positive integer \\( n \\) and returns the difference between the square of the sum of the first \\( n \\) natural numbers and the sum of the squares of the first \\( n \\) natural numbers.\n\n#### Input\n- \\( n \\): A positive integer representing the number of natural numbers to consider.\n\n#### Output\n- An integer representing the difference as described.\n\n#### Constraints\n- \\( 1 \\leq n \\leq 10^6 \\)\n\n#### Example\n```python\nprint(calculate_difference(10))  # Output: 2640\nprint(calculate_difference(15))  # Output: 13160\nprint(calculate_difference(20))  # Output: 41230\nprint(calculate_difference(50))  # Output: 1582700\n```\n\n### Implementation Notes\n- Use the following formulas:\n  - Sum of the squares of the first \\( n \\) natural numbers: \\( \\frac{n(n + 1)(2n + 1)}{6} \\)\n  - Square of the sum of the first \\( n \\) natural numbers: \\( \\left(\\frac{n(n + 1)}{2}\\right)^2 \\)\n\n### Edge Cases\n- Ensure your function handles the smallest possible value of \\( n \\) (1) and the largest possible value of \\( n \\) (10^6).\n\n### Additional Challenge\n- Your solution should be efficient enough to handle large values of \\( n \\) without performance issues."}], "metadata": {"prompt_id": "00000090", "row_id": 90, "seed_ids": [585], "mode": "algorithm", "instruction": "You are given a problem that involves calculating the difference between the square of the sum of the first \\( n \\) natural numbers and the sum of the squares of the first \\( n \\) natural numbers. Your task is to implement a function that returns this difference.\n\n### Problem Statement\n\nWrite a function `calculate_difference(n)` that takes a positive integer \\( n \\) and returns the difference between the square of the sum of the first \\( n \\) natural numbers and the sum of the squares of the first \\( n \\) natural numbers.\n\n#### Input\n- \\( n \\): A positive integer representing the number of natural numbers to consider.\n\n#### Output\n- An integer representing the difference as described.\n\n#### Constraints\n- \\( 1 \\leq n \\leq 10^6 \\)\n\n#### Example\n```python\nprint(calculate_difference(10))  # Output: 2640\nprint(calculate_difference(15))  # Output: 13160\nprint(calculate_difference(20))  # Output: 41230\nprint(calculate_difference(50))  # Output: 1582700\n```\n\n### Implementation Notes\n- Use the following formulas:\n  - Sum of the squares of the first \\( n \\) natural numbers: \\( \\frac{n(n + 1)(2n + 1)}{6} \\)\n  - Square of the sum of the first \\( n \\) natural numbers: \\( \\left(\\frac{n(n + 1)}{2}\\right)^2 \\)\n\n### Edge Cases\n- Ensure your function handles the smallest possible value of \\( n \\) (1) and the largest possible value of \\( n \\) (10^6).\n\n### Additional Challenge\n- Your solution should be efficient enough to handle large values of \\( n \\) without performance issues."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Context\nYou are working on a computational number theory project and need to implement a function to calculate the number of distinct prime factors for a given number. The function should be efficient and handle edge cases properly.\n\n### Problem Description\nWrite a Python function `calculate_distinct_prime_factors` that takes an integer \\( n \\) and returns the number of distinct prime factors of \\( n \\). The function should follow the following specifications:\n\n- **Input**:\n  - A positive integer \\( n \\) where \\( 1 \\leq n \\leq 10^6 \\).\n\n- **Output**:\n  - An integer representing the number of distinct prime factors of \\( n \\).\n\n### Example\n```python\nprint(calculate_distinct_prime_factors(51242183))  # Output: 3\nprint(calculate_distinct_prime_factors(123456789))  # Output: 2\n```\n\n### Constraints\n- \\( 1 \\leq n \\leq 10^6 \\)\n\n### Notes\n- Ensure that your implementation is efficient and handles edge cases correctly.\n\n### Hint\nConsider the provided code snippet for inspiration but do not directly copy the code. Think about how you can optimize the algorithm for better performance."}], "metadata": {"prompt_id": "00000091", "row_id": 91, "seed_ids": [736], "mode": "algorithm", "instruction": "### Context\nYou are working on a computational number theory project and need to implement a function to calculate the number of distinct prime factors for a given number. The function should be efficient and handle edge cases properly.\n\n### Problem Description\nWrite a Python function `calculate_distinct_prime_factors` that takes an integer \\( n \\) and returns the number of distinct prime factors of \\( n \\). The function should follow the following specifications:\n\n- **Input**:\n  - A positive integer \\( n \\) where \\( 1 \\leq n \\leq 10^6 \\).\n\n- **Output**:\n  - An integer representing the number of distinct prime factors of \\( n \\).\n\n### Example\n```python\nprint(calculate_distinct_prime_factors(51242183))  # Output: 3\nprint(calculate_distinct_prime_factors(123456789))  # Output: 2\n```\n\n### Constraints\n- \\( 1 \\leq n \\leq 10^6 \\)\n\n### Notes\n- Ensure that your implementation is efficient and handles edge cases correctly.\n\n### Hint\nConsider the provided code snippet for inspiration but do not directly copy the code. Think about how you can optimize the algorithm for better performance."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Problem Description\nIn the context of number theory and decimal expansions, we are interested in finding the denominator \\( d \\) (where \\( d < 1000 \\)) that produces the longest recurring cycle in the decimal representation of \\( \\frac{1}{d} \\). \n\nGiven the brute-force approach implemented in the provided code, you are tasked with writing a function to find the value of \\( d \\) that yields the longest recurring cycle. \n\n### Function Signature\n```python\ndef find_longest_recurring_cycle(denominator_limit: int) -> int:\n    \"\"\"\n    Find the value of d < denominator_limit for which 1/d contains the longest recurring cycle in its decimal fraction part.\n\n    :param denominator_limit: The upper limit for the search (exclusive).\n    :return: The value of d that produces the longest recurring cycle.\n    \"\"\"\n```\n\n### Constraints\n- \\( 2 \\leq denominator_limit \\leq 1000 \\)\n\n### Examples\n```python\n# Example 1\nprint(find_longest_recurring_cycle(10))  # Output: 7\n\n# Example 2\nprint(find_longest_recurring_cycle(100))  # Output: 97\n\n# Example 3\nprint(find_longest_recurring_cycle(1000))  # Output: 983\n```\n\n### Performance Requirements\n- The function should be efficient and handle the given constraints within the required time and space limits.\n\n### Implementation\nImplement the function to find the value of \\( d \\) that produces the longest recurring cycle in the decimal representation of \\( \\frac{1}{d} \\).\n\n### Hints\n- Consider using a more efficient algorithm or number theory techniques to improve performance.\n- Ensure correct handling of remainders and edge cases.\n- Optimize the code to handle the given constraints efficiently."}], "metadata": {"prompt_id": "00000092", "row_id": 92, "seed_ids": [487], "mode": "algorithm", "instruction": "### Problem Description\nIn the context of number theory and decimal expansions, we are interested in finding the denominator \\( d \\) (where \\( d < 1000 \\)) that produces the longest recurring cycle in the decimal representation of \\( \\frac{1}{d} \\). \n\nGiven the brute-force approach implemented in the provided code, you are tasked with writing a function to find the value of \\( d \\) that yields the longest recurring cycle. \n\n### Function Signature\n```python\ndef find_longest_recurring_cycle(denominator_limit: int) -> int:\n    \"\"\"\n    Find the value of d < denominator_limit for which 1/d contains the longest recurring cycle in its decimal fraction part.\n\n    :param denominator_limit: The upper limit for the search (exclusive).\n    :return: The value of d that produces the longest recurring cycle.\n    \"\"\"\n```\n\n### Constraints\n- \\( 2 \\leq denominator_limit \\leq 1000 \\)\n\n### Examples\n```python\n# Example 1\nprint(find_longest_recurring_cycle(10))  # Output: 7\n\n# Example 2\nprint(find_longest_recurring_cycle(100))  # Output: 97\n\n# Example 3\nprint(find_longest_recurring_cycle(1000))  # Output: 983\n```\n\n### Performance Requirements\n- The function should be efficient and handle the given constraints within the required time and space limits.\n\n### Implementation\nImplement the function to find the value of \\( d \\) that produces the longest recurring cycle in the decimal representation of \\( \\frac{1}{d} \\).\n\n### Hints\n- Consider using a more efficient algorithm or number theory techniques to improve performance.\n- Ensure correct handling of remainders and edge cases.\n- Optimize the code to handle the given constraints efficiently."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:<|Analysis Begin|>\n\n### Core Identification\n**Algorithm/Data Structure**: Frequent Pattern Growth (FP-Growth) Algorithm\n- **Type**: Data Mining Technique\n- **Main Purpose**: Discovering frequent itemsets in large transaction databases.\n- **Complexity**:\n  - Time Complexity: Constructing the FP-Tree is O(T), where T is the number of transactions. Mining the tree is O(I * L * N), where I is the number of itemsets, L is the maximum length of itemsets, and N is the average number of items in a transaction.\n  - Space Complexity: O(T + I), where T is the number of transactions and I is the number of itemsets.\n\n**Principles**:\n- The FP-Growth algorithm constructs a compact data structure (FP-Tree) to efficiently find frequent itemsets without generating candidate sets.\n- It uses a header table to link nodes and a conditional pattern base to recursively mine larger itemsets.\n\n### Characteristics & Applications\n**Properties**:\n- **Memory Efficiency**: FP-Tree is more memory-efficient than the CBA (Candidate Generation and Testing) approach used in Apriori.\n- **Mining Frequent Itemsets**: It can discover all frequent itemsets without candidate generation.\n- **Traversal**: Efficiently traverses the tree to find frequent itemsets.\n\n**Common Use Cases**:\n- **Market Basket Analysis**: Identifying frequent itemsets in sales data to optimize product placements and promotions.\n- **Web Log Analysis**: Discovering frequent sequences of web pages visited by users.\n\n**Strengths/Limitations**:\n- **Strengths**:\n  - Memory-efficient for large datasets.\n  - Avoids the candidate generation step, which is computationally expensive in traditional methods.\n- **Limitations**:\n  - The effectiveness depends on the minimum support threshold (min_sup).\n  - It may not perform well if the dataset is sparse or has long transactions.\n\n### Implementation Challenges\n**Edge Cases**:\n- **Empty Transactions**: Handling transactions with no items.\n- **Items with Low Support**: Filtering out items below the specified min_sup threshold.\n\n**Performance Bottlenecks**:\n- **Memory Management**: Efficiently managing the FP-Tree and its nodes.\n- **Traversal Overhead**: Recursively mining larger itemsets can increase the overhead.\n\n**Error Scenarios**:\n- Incorrectly calculating the support of itemsets.\n- Failing to properly update node links in the header table.\n- Missing frequent itemsets due to incorrect pruning.\n\n**Optimization Points**:\n- **Early Pruning**: Prune nodes with low support early to reduce memory usage.\n- **Parallel Processing**: Utilizing multi-threading or distributed computing for large datasets.\n\n<|Analysis End|>\n\n<|Question Begin|>\n\nYou are tasked with implementing a function to mine frequent itemsets using the FP-Growth algorithm. Given a list of"}], "metadata": {"prompt_id": "00000093", "row_id": 93, "seed_ids": [115], "mode": "algorithm", "instruction": "<|Analysis Begin|>\n\n### Core Identification\n**Algorithm/Data Structure**: Frequent Pattern Growth (FP-Growth) Algorithm\n- **Type**: Data Mining Technique\n- **Main Purpose**: Discovering frequent itemsets in large transaction databases.\n- **Complexity**:\n  - Time Complexity: Constructing the FP-Tree is O(T), where T is the number of transactions. Mining the tree is O(I * L * N), where I is the number of itemsets, L is the maximum length of itemsets, and N is the average number of items in a transaction.\n  - Space Complexity: O(T + I), where T is the number of transactions and I is the number of itemsets.\n\n**Principles**:\n- The FP-Growth algorithm constructs a compact data structure (FP-Tree) to efficiently find frequent itemsets without generating candidate sets.\n- It uses a header table to link nodes and a conditional pattern base to recursively mine larger itemsets.\n\n### Characteristics & Applications\n**Properties**:\n- **Memory Efficiency**: FP-Tree is more memory-efficient than the CBA (Candidate Generation and Testing) approach used in Apriori.\n- **Mining Frequent Itemsets**: It can discover all frequent itemsets without candidate generation.\n- **Traversal**: Efficiently traverses the tree to find frequent itemsets.\n\n**Common Use Cases**:\n- **Market Basket Analysis**: Identifying frequent itemsets in sales data to optimize product placements and promotions.\n- **Web Log Analysis**: Discovering frequent sequences of web pages visited by users.\n\n**Strengths/Limitations**:\n- **Strengths**:\n  - Memory-efficient for large datasets.\n  - Avoids the candidate generation step, which is computationally expensive in traditional methods.\n- **Limitations**:\n  - The effectiveness depends on the minimum support threshold (min_sup).\n  - It may not perform well if the dataset is sparse or has long transactions.\n\n### Implementation Challenges\n**Edge Cases**:\n- **Empty Transactions**: Handling transactions with no items.\n- **Items with Low Support**: Filtering out items below the specified min_sup threshold.\n\n**Performance Bottlenecks**:\n- **Memory Management**: Efficiently managing the FP-Tree and its nodes.\n- **Traversal Overhead**: Recursively mining larger itemsets can increase the overhead.\n\n**Error Scenarios**:\n- Incorrectly calculating the support of itemsets.\n- Failing to properly update node links in the header table.\n- Missing frequent itemsets due to incorrect pruning.\n\n**Optimization Points**:\n- **Early Pruning**: Prune nodes with low support early to reduce memory usage.\n- **Parallel Processing**: Utilizing multi-threading or distributed computing for large datasets.\n\n<|Analysis End|>\n\n<|Question Begin|>\n\nYou are tasked with implementing a function to mine frequent itemsets using the FP-Growth algorithm. Given a list of"}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:### Scenario\nYou are tasked with implementing a robust version of the Runge-Kutta-Fehlberg (RK45) method for solving ordinary differential equations. This version should include additional checks and optimizations to ensure the method works correctly and efficiently.\n\n### Task\nImplement the `runge_kutta_fehlberg_45` function that solves an ODE given by the function `func` using the Runge-Kutta-Fehlberg method. The function should:\n- Validate the inputs: `func`, `x_initial`, `y_initial`, `step_size`, and `x_final`.\n- Use the RK45 method to solve the ODE and return the solution `y` at each nodal point.\n- Ensure the step size is positive and the final value of `x` is greater than the initial value.\n\n### Requirements\n1. **Inputs**:\n   - `func`: A function representing the ODE, which takes two arguments `x` and `y`, and returns the derivative `dy/dx`.\n   - `x_initial`: The initial value of `x`.\n   - `y_initial`: The initial value of `y`.\n   - `step_size`: The increment value of `x`.\n   - `x_final`: The final value of `x`.\n\n2. **Output**:\n   - A NumPy array containing the solution `y` at each nodal point.\n\n3. **Constraints**:\n   - The `step_size` must be a positive number.\n   - The final value of `x` must be greater than the initial value of `x`.\n\n4. **Performance**:\n   - The function should efficiently handle the solution process and avoid unnecessary computations.\n\n### Example\n```python\ndef f(x, y):\n    return x + y\n\ny = runge_kutta_fehlberg_45(f, 0, 0, 0.1, 1)\nprint(y)\n```\n\n### Expected Output\n```\narray([ 0.00000000e+00,  1.00000000e-01,  2.05000000e-01,  3.15500000e-01,\n        4.32250000e-01,  5.56785000e-01,  6.89364500e-01,  8.29995350e-01,\n        9.78794935e-01,  1.13687443e+00,  1.30446187e+00,  1.48173531e+00,\n        1.66979727e+00,  1.86904726e+00,  2.07978369e+00,  2.29220419e+00,\n        2.51641445e+00,  2.75261038e+00,  2.99999999e+00,  3.25867937e+00,\n        3.52873731e+00,  3.80917374e+00,  4.09999999e+00,  4.39221387e+00,\n        4.68571341e+00,  4.98049310e+00,  5.27655090e+00,  5.57388469e+00,\n        5.87250319e+00,  6.17230427e+00,  6.47328584e+00,  6.77544669e+00,\n        7.07878461e+00,  7.38330738e+00,  7.68891368e+00,  8.00000000e+00])\n```\n\n### Notes\n- Ensure all edge cases are handled appropriately.\n- Use efficient computation and minimize unnecessary operations."}], "metadata": {"prompt_id": "00000094", "row_id": 94, "seed_ids": [827], "mode": "algorithm", "instruction": "### Scenario\nYou are tasked with implementing a robust version of the Runge-Kutta-Fehlberg (RK45) method for solving ordinary differential equations. This version should include additional checks and optimizations to ensure the method works correctly and efficiently.\n\n### Task\nImplement the `runge_kutta_fehlberg_45` function that solves an ODE given by the function `func` using the Runge-Kutta-Fehlberg method. The function should:\n- Validate the inputs: `func`, `x_initial`, `y_initial`, `step_size`, and `x_final`.\n- Use the RK45 method to solve the ODE and return the solution `y` at each nodal point.\n- Ensure the step size is positive and the final value of `x` is greater than the initial value.\n\n### Requirements\n1. **Inputs**:\n   - `func`: A function representing the ODE, which takes two arguments `x` and `y`, and returns the derivative `dy/dx`.\n   - `x_initial`: The initial value of `x`.\n   - `y_initial`: The initial value of `y`.\n   - `step_size`: The increment value of `x`.\n   - `x_final`: The final value of `x`.\n\n2. **Output**:\n   - A NumPy array containing the solution `y` at each nodal point.\n\n3. **Constraints**:\n   - The `step_size` must be a positive number.\n   - The final value of `x` must be greater than the initial value of `x`.\n\n4. **Performance**:\n   - The function should efficiently handle the solution process and avoid unnecessary computations.\n\n### Example\n```python\ndef f(x, y):\n    return x + y\n\ny = runge_kutta_fehlberg_45(f, 0, 0, 0.1, 1)\nprint(y)\n```\n\n### Expected Output\n```\narray([ 0.00000000e+00,  1.00000000e-01,  2.05000000e-01,  3.15500000e-01,\n        4.32250000e-01,  5.56785000e-01,  6.89364500e-01,  8.29995350e-01,\n        9.78794935e-01,  1.13687443e+00,  1.30446187e+00,  1.48173531e+00,\n        1.66979727e+00,  1.86904726e+00,  2.07978369e+00,  2.29220419e+00,\n        2.51641445e+00,  2.75261038e+00,  2.99999999e+00,  3.25867937e+00,\n        3.52873731e+00,  3.80917374e+00,  4.09999999e+00,  4.39221387e+00,\n        4.68571341e+00,  4.98049310e+00,  5.27655090e+00,  5.57388469e+00,\n        5.87250319e+00,  6.17230427e+00,  6.47328584e+00,  6.77544669e+00,\n        7.07878461e+00,  7.38330738e+00,  7.68891368e+00,  8.00000000e+00])\n```\n\n### Notes\n- Ensure all edge cases are handled appropriately.\n- Use efficient computation and minimize unnecessary operations."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:You are tasked with enhancing the `is_balanced` function to handle more complex scenarios involving nested sequences and ensuring robustness against malformed input. Your goal is to extend the functionality to validate more intricate patterns of nested brackets.\n\n**Enhancements**:\n1. **Escaped Characters**: Handle escaped brackets, where a backslash character `\\` before an opening or closing bracket indicates that the next character should be treated as a literal character rather than a bracket.\n2. **Nested Sequences**: Support nested sequences of any depth, ensuring that each sequence of brackets is properly closed.\n3. **Malformed Input Handling**: Improve error handling to provide more informative feedback when the input is malformed.\n\n**Requirements**:\n- **Input**: A string `s` consisting of a sequence of brackets and possibly other characters.\n- **Output**: A boolean value indicating whether the sequence of brackets is properly nested.\n- **Constraints**:\n  - The input string `s` can have a maximum length of \\(10^6\\) characters.\n- **Performance**: The function should handle large inputs efficiently.\n\n**Example**:\n```python\nis_balanced(\"({[\\\\]})\")  # True, with escaped square bracket\nis_balanced(\"({[\\\\[\\\\]})\")  # False, with malformed input\nis_balanced(\"[{()}\\\\{\\\\}[]]\")  # True, with nested sequences and escaped characters\n```\n\n**Your Task**:\nImplement the enhanced `is_balanced` function that meets the above requirements."}], "metadata": {"prompt_id": "00000095", "row_id": 95, "seed_ids": [970], "mode": "algorithm", "instruction": "You are tasked with enhancing the `is_balanced` function to handle more complex scenarios involving nested sequences and ensuring robustness against malformed input. Your goal is to extend the functionality to validate more intricate patterns of nested brackets.\n\n**Enhancements**:\n1. **Escaped Characters**: Handle escaped brackets, where a backslash character `\\` before an opening or closing bracket indicates that the next character should be treated as a literal character rather than a bracket.\n2. **Nested Sequences**: Support nested sequences of any depth, ensuring that each sequence of brackets is properly closed.\n3. **Malformed Input Handling**: Improve error handling to provide more informative feedback when the input is malformed.\n\n**Requirements**:\n- **Input**: A string `s` consisting of a sequence of brackets and possibly other characters.\n- **Output**: A boolean value indicating whether the sequence of brackets is properly nested.\n- **Constraints**:\n  - The input string `s` can have a maximum length of \\(10^6\\) characters.\n- **Performance**: The function should handle large inputs efficiently.\n\n**Example**:\n```python\nis_balanced(\"({[\\\\]})\")  # True, with escaped square bracket\nis_balanced(\"({[\\\\[\\\\]})\")  # False, with malformed input\nis_balanced(\"[{()}\\\\{\\\\}[]]\")  # True, with nested sequences and escaped characters\n```\n\n**Your Task**:\nImplement the enhanced `is_balanced` function that meets the above requirements."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:**Problem Statement**:\nYou are tasked with implementing an LFU Cache that supports the following operations:\n- `put(key, value)`: Insert a key-value pair into the cache. If the cache is at capacity, it should evict the least frequently used item first.\n- `get(key)`: Retrieve the value associated with the given key. If the key is not found, return `None`.\n\n**Cache Operations**:\n- The cache should maintain a doubly linked list to order nodes based on their frequency.\n- Nodes should be repositioned in the list to maintain the correct order.\n- The cache should use a dictionary to map keys to their corresponding nodes.\n\n**Constraints**:\n- The capacity of the LFU Cache will be an integer between 1 and 1000 (inclusive).\n- The key and value types can be any valid Python objects.\n\n**Example**:\n```python\ncache = LFUCache(2)\ncache.put(1, 1)\ncache.put(2, 2)\nprint(cache.get(1))  # Output: 1\ncache.put(3, 3)\nprint(cache.get(2))  # Output: None\ncache.put(4, 4)\nprint(cache.get(1))  # Output: None\nprint(cache.get(3))  # Output: 3\nprint(cache.get(4))  # Output: 4\n```\n\n**Function Signature**:\n```python\nclass LFUCache(Generic[T, U]):\n    def __init__(self, capacity: int):\n        pass\n\n    def get(self, key: T) -> U | None:\n        pass\n\n    def put(self, key: T, value: U) -> None:\n        pass\n```\n\n**Note**:\n- Ensure the cache operations are efficient and handle edge cases correctly.\n- The provided code snippet includes a `DoubleLinkedList` class and a `LFUCache` class with some methods implemented. You need to implement the `get` and `put` methods."}], "metadata": {"prompt_id": "00000096", "row_id": 96, "seed_ids": [975], "mode": "algorithm", "instruction": "**Problem Statement**:\nYou are tasked with implementing an LFU Cache that supports the following operations:\n- `put(key, value)`: Insert a key-value pair into the cache. If the cache is at capacity, it should evict the least frequently used item first.\n- `get(key)`: Retrieve the value associated with the given key. If the key is not found, return `None`.\n\n**Cache Operations**:\n- The cache should maintain a doubly linked list to order nodes based on their frequency.\n- Nodes should be repositioned in the list to maintain the correct order.\n- The cache should use a dictionary to map keys to their corresponding nodes.\n\n**Constraints**:\n- The capacity of the LFU Cache will be an integer between 1 and 1000 (inclusive).\n- The key and value types can be any valid Python objects.\n\n**Example**:\n```python\ncache = LFUCache(2)\ncache.put(1, 1)\ncache.put(2, 2)\nprint(cache.get(1))  # Output: 1\ncache.put(3, 3)\nprint(cache.get(2))  # Output: None\ncache.put(4, 4)\nprint(cache.get(1))  # Output: None\nprint(cache.get(3))  # Output: 3\nprint(cache.get(4))  # Output: 4\n```\n\n**Function Signature**:\n```python\nclass LFUCache(Generic[T, U]):\n    def __init__(self, capacity: int):\n        pass\n\n    def get(self, key: T) -> U | None:\n        pass\n\n    def put(self, key: T, value: U) -> None:\n        pass\n```\n\n**Note**:\n- Ensure the cache operations are efficient and handle edge cases correctly.\n- The provided code snippet includes a `DoubleLinkedList` class and a `LFUCache` class with some methods implemented. You need to implement the `get` and `put` methods."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:## Scenario\nYou are tasked with enhancing the functionality of an image processing application. Your goal is to implement a more advanced color transformation technique that not only applies a sepia tone but also adjusts the brightness and contrast of the image. This will improve the visual appeal and artistic quality of the images processed by the application.\n\n## Requirements\n1. **Input**: The function should accept an image (as a NumPy array) and two parameters: `factor` (an integer representing the sepia effect intensity, where a higher value enhances the sepia tone) and `brightness` (an integer representing the brightness adjustment, where positive values increase brightness and negative values decrease it).\n2. **Output**: Return the modified image as a NumPy array.\n3. **Constraints**:\n   - The input image is represented as a NumPy array of shape \\( (H, W, 3) \\) where \\( H \\) is the height and \\( W \\) is the width of the image.\n   - The `factor` and `brightness` parameters are integers, and valid values for `factor` are in the range \\([0, 100]\\), and for `brightness` are in the range \\([-100, 100]\\).\n4. **Performance**: The solution should be efficient, especially for large images, and should avoid unnecessary memory usage.\n\n## Function Signature\n```python\ndef enhanced_sepia(image: np.ndarray, factor: int, brightness: int) -> np.ndarray:\n    pass\n```\n\n## Example\n```python\nimport numpy as np\n\nimage = np.array([[[255, 255, 255], [0, 0, 0]], [[128, 128, 128], [64, 64, 64]]], dtype=np.uint8)\nresult = enhanced_sepia(image, 50, 10)\nprint(result)\n```\n\n### Expected Output\n```\narray([[[191, 170, 145], [ 23,  12,   0]], [[ 91,  76,  61], [ 44,  41,  34]]], dtype=uint8)\n```\n\n### Explanation\n- The sepia effect is applied with a `factor` of 50, enhancing the sepia tone.\n- The image brightness is increased by 10.\n\n## Evaluation\nYour implementation will be evaluated based on the correctness of the output, efficiency, and adherence to the constraints. Additionally, ensure that the code handles edge cases and performance bottlenecks effectively."}], "metadata": {"prompt_id": "00000097", "row_id": 97, "seed_ids": [837], "mode": "algorithm", "instruction": "## Scenario\nYou are tasked with enhancing the functionality of an image processing application. Your goal is to implement a more advanced color transformation technique that not only applies a sepia tone but also adjusts the brightness and contrast of the image. This will improve the visual appeal and artistic quality of the images processed by the application.\n\n## Requirements\n1. **Input**: The function should accept an image (as a NumPy array) and two parameters: `factor` (an integer representing the sepia effect intensity, where a higher value enhances the sepia tone) and `brightness` (an integer representing the brightness adjustment, where positive values increase brightness and negative values decrease it).\n2. **Output**: Return the modified image as a NumPy array.\n3. **Constraints**:\n   - The input image is represented as a NumPy array of shape \\( (H, W, 3) \\) where \\( H \\) is the height and \\( W \\) is the width of the image.\n   - The `factor` and `brightness` parameters are integers, and valid values for `factor` are in the range \\([0, 100]\\), and for `brightness` are in the range \\([-100, 100]\\).\n4. **Performance**: The solution should be efficient, especially for large images, and should avoid unnecessary memory usage.\n\n## Function Signature\n```python\ndef enhanced_sepia(image: np.ndarray, factor: int, brightness: int) -> np.ndarray:\n    pass\n```\n\n## Example\n```python\nimport numpy as np\n\nimage = np.array([[[255, 255, 255], [0, 0, 0]], [[128, 128, 128], [64, 64, 64]]], dtype=np.uint8)\nresult = enhanced_sepia(image, 50, 10)\nprint(result)\n```\n\n### Expected Output\n```\narray([[[191, 170, 145], [ 23,  12,   0]], [[ 91,  76,  61], [ 44,  41,  34]]], dtype=uint8)\n```\n\n### Explanation\n- The sepia effect is applied with a `factor` of 50, enhancing the sepia tone.\n- The image brightness is increased by 10.\n\n## Evaluation\nYour implementation will be evaluated based on the correctness of the output, efficiency, and adherence to the constraints. Additionally, ensure that the code handles edge cases and performance bottlenecks effectively."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:**Question:**\n\nIn a fluid dynamics simulation, you are given the mass of a sphere, the density of the fluid, the cross-sectional area of the sphere, and its drag coefficient. Your task is to implement a function to calculate the terminal velocity of the sphere using the provided data.\n\nThe terminal velocity is calculated using the formula:\n\\[ V_t = \\left( \\frac{2 \\cdot m \\cdot g}{p \\cdot A \\cdot C_d} \\right)^{0.5} \\]\n\nWhere:\n- \\( V_t \\) is the terminal velocity (m/s)\n- \\( m \\) is the mass of the sphere (Kg)\n- \\( g \\) is the acceleration due to gravity (9.81 m/s\u00b2)\n- \\( p \\) is the fluid density (Kg/m\u00b3)\n- \\( A \\) is the cross-sectional area of the sphere (m\u00b2)\n- \\( C_d \\) is the drag coefficient (dimensionless)\n\nYour function should:\n- Accept four parameters: `mass`, `density`, `area`, and `drag_coefficient`.\n- Validate that all inputs are positive. If any input is non-positive, raise a `ValueError` with a clear message.\n- Return the terminal velocity as a float.\n\n**Constraints:**\n- \\( 1 \\leq \\text{mass} \\leq 1000 \\)\n- \\( 1 \\leq \\text{density} \\leq 1000 \\)\n- \\( 0.001 \\leq \\text{area} \\leq 1 \\)\n- \\( 0.1 \\leq \\text{drag_coefficient} \\leq 1 \\)\n\n**Function Signature:**\n```python\ndef terminal_velocity(mass: float, density: float, area: float, drag_coefficient: float) -> float:\n    pass\n```\n\n**Example:**\n```python\nassert terminal_velocity(0.5, 750, 0.05, 0.47) == 1.6416094135332785\nassert terminal_velocity(1, 1000, 0.1, 0.5) == 1.9843136660766868\n```\n\n**Note:**\nEnsure your function handles all edge cases as specified."}], "metadata": {"prompt_id": "00000098", "row_id": 98, "seed_ids": [142], "mode": "algorithm", "instruction": "**Question:**\n\nIn a fluid dynamics simulation, you are given the mass of a sphere, the density of the fluid, the cross-sectional area of the sphere, and its drag coefficient. Your task is to implement a function to calculate the terminal velocity of the sphere using the provided data.\n\nThe terminal velocity is calculated using the formula:\n\\[ V_t = \\left( \\frac{2 \\cdot m \\cdot g}{p \\cdot A \\cdot C_d} \\right)^{0.5} \\]\n\nWhere:\n- \\( V_t \\) is the terminal velocity (m/s)\n- \\( m \\) is the mass of the sphere (Kg)\n- \\( g \\) is the acceleration due to gravity (9.81 m/s\u00b2)\n- \\( p \\) is the fluid density (Kg/m\u00b3)\n- \\( A \\) is the cross-sectional area of the sphere (m\u00b2)\n- \\( C_d \\) is the drag coefficient (dimensionless)\n\nYour function should:\n- Accept four parameters: `mass`, `density`, `area`, and `drag_coefficient`.\n- Validate that all inputs are positive. If any input is non-positive, raise a `ValueError` with a clear message.\n- Return the terminal velocity as a float.\n\n**Constraints:**\n- \\( 1 \\leq \\text{mass} \\leq 1000 \\)\n- \\( 1 \\leq \\text{density} \\leq 1000 \\)\n- \\( 0.001 \\leq \\text{area} \\leq 1 \\)\n- \\( 0.1 \\leq \\text{drag_coefficient} \\leq 1 \\)\n\n**Function Signature:**\n```python\ndef terminal_velocity(mass: float, density: float, area: float, drag_coefficient: float) -> float:\n    pass\n```\n\n**Example:**\n```python\nassert terminal_velocity(0.5, 750, 0.05, 0.47) == 1.6416094135332785\nassert terminal_velocity(1, 1000, 0.1, 0.5) == 1.9843136660766868\n```\n\n**Note:**\nEnsure your function handles all edge cases as specified."}}
{"messages": [{"role": "user", "content": "## Task:\nPlease Answer the question and generate unit tests to verify your answer.\n\n## Output Format:\nYour solution and unit tests should be presented in markdown Python code format within the specified sections below. Ensure your code is within code blocks. For the tests, use pytest style by defining individual test functions (without classes) and using assert statements. \n\n<|Solution Begin|>\n[Solution Code in Python]\n<|Solution End|>\n<|Test Begin|>\n[Unit Test Code in Python]\n<|Test End|>\n\n## Example\nBelow is an example output format implementing a simple a + b function.\n\n<|Solution Begin|>\n```python\ndef add(a, b):\n    \"\"\"\n    Returns the sum of a and b.\n    \"\"\"\n    return a + b\n```\n<|Solution End|>\n\n<|Test Begin|>\n```python\nfrom solution import add\n\ndef test_add_positive_numbers():\n    assert add(2, 3) == 5\n\ndef test_add_with_zero():\n    assert add(0, 5) == 5\n    assert add(5, 0) == 5\n\ndef test_add_negative_numbers():\n    assert add(-1, -1) == -2\n\ndef test_add_mixed_sign_numbers():\n    assert add(-1, 3) == 2\n```\n<|Test End|>\n\n## Question:**Context**: You are working on a text editor that needs to efficiently find patterns within a large document. To optimize the search process, you decide to implement the Rabin-Karp algorithm. However, you have a challenge in ensuring the algorithm's robustness against various edge cases and performance optimizations.\n\n**Task**: Enhance the Rabin-Karp algorithm to handle the following requirements and optimizations:\n\n1. **Edge Cases**:\n   - Handle cases where the pattern or text is empty.\n   - Ensure the algorithm correctly handles large alphabets (e.g., Unicode characters).\n\n2. **Performance**:\n   - Optimize the algorithm to handle large texts and patterns efficiently by reducing the number of hash comparisons.\n   - Implement a mechanism to skip unnecessary comparisons when a hash mismatch occurs.\n\n3. **Customization**:\n   - Allow the user to specify the alphabet size and modulus for the hash function.\n   - Implement a function to test the enhanced Rabin-Karp algorithm with multiple patterns and texts.\n\n**Function Implementations**:\n- **Function 1**: `enhanced_rabin_karp(pattern: str, text: str, alphabet_size: int, modulus: int) -> List[int]`\n  - **Input**: \n    - `pattern` (str): The pattern string to search for.\n    - `text` (str): The text in which to search for the pattern.\n    - `alphabet_size` (int): The size of the alphabet used in the text.\n    - `modulus` (int): The modulus value used in the hash function.\n  - **Output**: \n    - A list of starting indices where the pattern is found in the text. If the pattern is not found, return an empty list.\n\n- **Function 2**: `test_enhanced_rabin_karp()` \n  - **Input**: None\n  - **Output**: None\n  - **Description**: Test the `enhanced_rabin_karp` function with multiple patterns and texts to ensure it works correctly.\n\n**Constraints**:\n- `1 <= len(pattern) <= 1000`\n- `1 <= len(text) <= 10^6`\n- `1 <= alphabet_size <= 10^6`\n- `1 <= modulus <= 10^9 + 7`\n\n**Performance Requirements**:\n- The algorithm should handle large texts and patterns efficiently, minimizing the number of hash comparisons.\n\n**Example**:\n\n```python\npattern = \"abc1abc12\"\ntext = \"alskfjaldsabc1abc1abc12k23adsfabcabc\"\nalphabet_size = 256\nmodulus = 1000003\nprint(enhanced_rabin_karp(pattern, text, alphabet_size, modulus))\n# Output: [11, 21]\n\npattern = \"ABABX\"\ntext = \"ABABZABABYABABX\"\nalphabet_size = 256\nmodulus = 1000003\nprint(enhanced_rabin_karp(pattern, text, alphabet_size, modulus))\n# Output: [6]\n```"}], "metadata": {"prompt_id": "00000099", "row_id": 99, "seed_ids": [259], "mode": "algorithm", "instruction": "**Context**: You are working on a text editor that needs to efficiently find patterns within a large document. To optimize the search process, you decide to implement the Rabin-Karp algorithm. However, you have a challenge in ensuring the algorithm's robustness against various edge cases and performance optimizations.\n\n**Task**: Enhance the Rabin-Karp algorithm to handle the following requirements and optimizations:\n\n1. **Edge Cases**:\n   - Handle cases where the pattern or text is empty.\n   - Ensure the algorithm correctly handles large alphabets (e.g., Unicode characters).\n\n2. **Performance**:\n   - Optimize the algorithm to handle large texts and patterns efficiently by reducing the number of hash comparisons.\n   - Implement a mechanism to skip unnecessary comparisons when a hash mismatch occurs.\n\n3. **Customization**:\n   - Allow the user to specify the alphabet size and modulus for the hash function.\n   - Implement a function to test the enhanced Rabin-Karp algorithm with multiple patterns and texts.\n\n**Function Implementations**:\n- **Function 1**: `enhanced_rabin_karp(pattern: str, text: str, alphabet_size: int, modulus: int) -> List[int]`\n  - **Input**: \n    - `pattern` (str): The pattern string to search for.\n    - `text` (str): The text in which to search for the pattern.\n    - `alphabet_size` (int): The size of the alphabet used in the text.\n    - `modulus` (int): The modulus value used in the hash function.\n  - **Output**: \n    - A list of starting indices where the pattern is found in the text. If the pattern is not found, return an empty list.\n\n- **Function 2**: `test_enhanced_rabin_karp()` \n  - **Input**: None\n  - **Output**: None\n  - **Description**: Test the `enhanced_rabin_karp` function with multiple patterns and texts to ensure it works correctly.\n\n**Constraints**:\n- `1 <= len(pattern) <= 1000`\n- `1 <= len(text) <= 10^6`\n- `1 <= alphabet_size <= 10^6`\n- `1 <= modulus <= 10^9 + 7`\n\n**Performance Requirements**:\n- The algorithm should handle large texts and patterns efficiently, minimizing the number of hash comparisons.\n\n**Example**:\n\n```python\npattern = \"abc1abc12\"\ntext = \"alskfjaldsabc1abc1abc12k23adsfabcabc\"\nalphabet_size = 256\nmodulus = 1000003\nprint(enhanced_rabin_karp(pattern, text, alphabet_size, modulus))\n# Output: [11, 21]\n\npattern = \"ABABX\"\ntext = \"ABABZABABYABABX\"\nalphabet_size = 256\nmodulus = 1000003\nprint(enhanced_rabin_karp(pattern, text, alphabet_size, modulus))\n# Output: [6]\n```"}}
